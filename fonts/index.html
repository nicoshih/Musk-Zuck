<!DOCTYPE html><html><head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- The <title> is inserted by Flourish -->

		<!-- Link to a stylesheet, or include an inline <style> section here -->
		<link rel="stylesheet" type="text/css" href="static/style.css">
	<title>Flourish template: Data explorer</title></head>
	<body>
		<!-- If you want to start with a non-empty document, add elements here -->
		<!-- Relative links are rewritten to refer to the files in the static directory -->
	

<script>window.Flourish = {"static_prefix":"static","environment":"live","is_read_only":true};</script><script>var template=function(t){"use strict";var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/gi,r=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function i(t){var e=t.match(r);return e?e.map(Number):[]}function o(t){var r=[],o=String(t).trim();return"M"!==o[0]&&"m"!==o[0]||o.replace(n,(function(t,n,o){var a=n.toLowerCase(),l=i(o),s=n;if("m"===a&&l.length>2&&(r.push([s].concat(l.splice(0,2))),a="l",s="m"===s?"l":"L"),l.length<e[a])return"";for(r.push([s].concat(l.splice(0,e[a])));l.length>=e[a]&&l.length&&e[a];)r.push([s].concat(l.splice(0,e[a])));return""})),r}var a=o,l;function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function c(t,e,n){return e&&u(t.prototype,e),n&&u(t,n),t}function f(t){return h(t)||d(t)||p()}function h(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function d(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _(t){var e,n=t.document.createElement("canvas").getContext("2d"),r=new t.Path2D("M0 0 L1 1"),i;return n.strokeStyle="red",n.lineWidth=1,n.stroke(r),255===n.getImageData(0,0,1,1).data[0]}function g(t,e){var n=t.x*Math.cos(e)-t.y*Math.sin(e),r=t.y*Math.cos(e)+t.x*Math.sin(e);t.x=n,t.y=r}function y(t,e,n){t.x+=e,t.y+=n}function m(t,e){t.x*=e,t.y*=e}function v(t){if(void 0!==t&&t.CanvasRenderingContext2D&&(!t.Path2D||!_(t))){var e=function(){function t(e){var n;(s(this,t),this.segments=[],e&&e instanceof t)?(n=this.segments).push.apply(n,f(e.segments)):e&&(this.segments=a(e))}return c(t,[{key:"addPath",value:function e(n){var r;n&&n instanceof t&&(r=this.segments).push.apply(r,f(n.segments))}},{key:"moveTo",value:function t(e,n){this.segments.push(["M",e,n])}},{key:"lineTo",value:function t(e,n){this.segments.push(["L",e,n])}},{key:"arc",value:function t(e,n,r,i,o,a){this.segments.push(["AC",e,n,r,i,o,!!a])}},{key:"arcTo",value:function t(e,n,r,i,o){this.segments.push(["AT",e,n,r,i,o])}},{key:"ellipse",value:function t(e,n,r,i,o,a,l,s){this.segments.push(["E",e,n,r,i,o,a,l,!!s])}},{key:"closePath",value:function t(){this.segments.push(["Z"])}},{key:"bezierCurveTo",value:function t(e,n,r,i,o,a){this.segments.push(["C",e,n,r,i,o,a])}},{key:"quadraticCurveTo",value:function t(e,n,r,i){this.segments.push(["Q",e,n,r,i])}},{key:"rect",value:function t(e,n,r,i){this.segments.push(["R",e,n,r,i])}}]),t}(),n=t.CanvasRenderingContext2D.prototype.fill,r=t.CanvasRenderingContext2D.prototype.stroke;t.CanvasRenderingContext2D.prototype.fill=function t(){for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];var a="nonzero",l;0===r.length||1===r.length&&"string"==typeof r[0]?n.apply(this,r):(2===arguments.length&&(a=r[1]),i(this,r[0].segments),n.call(this,a))},t.CanvasRenderingContext2D.prototype.stroke=function t(e){e?(i(this,e.segments),r.call(this)):r.call(this)},t.Path2D=e}function i(t,e){var n,r,i,o,a,l,s,u,c,f,h,d,p,_,v,b,x,w,k,M,A,S,C,E,z,T,N={x:0,y:0},j={x:0,y:0};t.beginPath();for(var L=0;L<e.length;++L){var P=e[L];switch("S"!==(M=P[0])&&"s"!==M&&"C"!==M&&"c"!==M&&(S=null,C=null),"T"!==M&&"t"!==M&&"Q"!==M&&"q"!==M&&(E=null,z=null),M){case"m":case"M":"m"===M?(h+=P[1],p+=P[2]):(h=P[1],p=P[2]),"M"!==M&&N||(N={x:h,y:p}),t.moveTo(h,p);break;case"l":h+=P[1],p+=P[2],t.lineTo(h,p);break;case"L":h=P[1],p=P[2],t.lineTo(h,p);break;case"H":h=P[1],t.lineTo(h,p);break;case"h":h+=P[1],t.lineTo(h,p);break;case"V":p=P[1],t.lineTo(h,p);break;case"v":p+=P[1],t.lineTo(h,p);break;case"a":case"A":"a"===M?(h+=P[6],p+=P[7]):(h=P[6],p=P[7]),b=P[1],x=P[2],s=P[3]*Math.PI/180,i=!!P[4],o=!!P[5],a={x:h,y:p},g(l={x:(j.x-a.x)/2,y:(j.y-a.y)/2},-s),(u=l.x*l.x/(b*b)+l.y*l.y/(x*x))>1&&(b*=u=Math.sqrt(u),x*=u),c=b*b*x*x,f=b*b*l.y*l.y+x*x*l.x*l.x,m(A={x:b*l.y/x,y:-x*l.x/b},o!==i?Math.sqrt((c-f)/f)||0:-Math.sqrt((c-f)/f)||0),r=Math.atan2((l.y-A.y)/x,(l.x-A.x)/b),n=Math.atan2(-(l.y+A.y)/x,-(l.x+A.x)/b),g(A,s),y(A,(a.x+j.x)/2,(a.y+j.y)/2),t.save(),t.translate(A.x,A.y),t.rotate(s),t.scale(b,x),t.arc(0,0,1,r,n,!o),t.restore();break;case"C":S=P[3],C=P[4],h=P[5],p=P[6],t.bezierCurveTo(P[1],P[2],S,C,h,p);break;case"c":t.bezierCurveTo(P[1]+h,P[2]+p,P[3]+h,P[4]+p,P[5]+h,P[6]+p),S=P[3]+h,C=P[4]+p,h+=P[5],p+=P[6];break;case"S":null!==S&&null!==S||(S=h,C=p),t.bezierCurveTo(2*h-S,2*p-C,P[1],P[2],P[3],P[4]),S=P[1],C=P[2],h=P[3],p=P[4];break;case"s":null!==S&&null!==S||(S=h,C=p),t.bezierCurveTo(2*h-S,2*p-C,P[1]+h,P[2]+p,P[3]+h,P[4]+p),S=P[1]+h,C=P[2]+p,h+=P[3],p+=P[4];break;case"Q":E=P[1],z=P[2],h=P[3],p=P[4],t.quadraticCurveTo(E,z,h,p);break;case"q":E=P[1]+h,z=P[2]+p,h+=P[3],p+=P[4],t.quadraticCurveTo(E,z,h,p);break;case"T":null!==E&&null!==E||(E=h,z=p),E=2*h-E,z=2*p-z,h=P[1],p=P[2],t.quadraticCurveTo(E,z,h,p);break;case"t":null!==E&&null!==E||(E=h,z=p),E=2*h-E,z=2*p-z,h+=P[1],p+=P[2],t.quadraticCurveTo(E,z,h,p);break;case"z":case"Z":h=N.x,p=N.y,N=void 0,t.closePath();break;case"AC":h=P[1],p=P[2],v=P[3],r=P[4],n=P[5],T=P[6],t.arc(h,p,v,r,n,T);break;case"AT":d=P[1],_=P[2],h=P[3],p=P[4],v=P[5],t.arcTo(d,_,h,p,v);break;case"E":h=P[1],p=P[2],b=P[3],x=P[4],s=P[5],r=P[6],n=P[7],T=P[8],t.save(),t.translate(h,p),t.rotate(s),t.scale(b,x),t.arc(0,0,1,r,n,T),t.restore();break;case"R":h=P[1],p=P[2],w=P[3],k=P[4],N={x:h,y:p},t.rect(h,p,w,k)}j.x=h,j.y=p}}}function b(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");const e=Object(t);for(let t=1;t<arguments.length;t++){const n=arguments[t];if(null!=n)for(const t in n)Object.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e}"undefined"!=typeof window&&v(window),"function"!=typeof Object.values&&(Object.values=function(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r}),Object.assign||(Object.assign=b);var x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function w(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var k=function(t){return t&&t.Math==Math&&t},M=k("object"==typeof globalThis&&globalThis)||k("object"==typeof window&&window)||k("object"==typeof self&&self)||k("object"==typeof x&&x)||function(){return this}()||Function("return this")(),A={},S={get exports(){return A},set exports(t){A=t}},C=M,E=Object.defineProperty,z=function(t,e){try{E(C,t,{value:e,configurable:!0,writable:!0})}catch(n){C[t]=e}return e},T,N=z,j="__core-js_shared__",L,P=M[j]||N(j,{}),O=P;(S.exports=function(t,e){return O[t]||(O[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.29.1",mode:"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.29.1/LICENSE",source:"https://github.com/zloirock/core-js"});var F=function(t){try{return!!t()}catch(t){return!0}},D,q=!F((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),R=q,B=Function.prototype,H=B.call,I=R&&B.bind.bind(H,H),U=R?I:function(t){return function(){return H.apply(t,arguments)}},Y=function(t){return null==t},W=Y,V=TypeError,Z=function(t){if(W(t))throw V("Can't call method on "+t);return t},X=Z,G=Object,$=function(t){return G(X(t))},Q,J=$,K=U({}.hasOwnProperty),tt=Object.hasOwn||function t(e,n){return K(J(e),n)},et=U,nt=0,rt=Math.random(),it=et(1..toString),ot=function(t){return"Symbol("+(void 0===t?"":t)+")_"+it(++nt+rt,36)},at,lt=M,st="undefined"!=typeof navigator&&String(navigator.userAgent)||"",ut=lt.process,ct=lt.Deno,ft=ut&&ut.versions||ct&&ct.version,ht=ft&&ft.v8,dt,pt;ht&&(pt=(dt=ht.split("."))[0]>0&&dt[0]<4?1:+(dt[0]+dt[1])),!pt&&st&&(!(dt=st.match(/Edge\/(\d+)/))||dt[1]>=74)&&(dt=st.match(/Chrome\/(\d+)/))&&(pt=+dt[1]);var _t,gt=pt,yt=F,mt=!!Object.getOwnPropertySymbols&&!yt((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&gt&&gt<41})),vt,bt=mt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,xt,wt=A,kt=tt,Mt=ot,At=mt,St=bt,Ct=M.Symbol,Et=wt("wks"),zt=St?Ct.for||Ct:Ct&&Ct.withoutSetter||Mt,Tt=function(t){return kt(Et,t)||(Et[t]=At&&kt(Ct,t)?Ct[t]:zt("Symbol."+t)),Et[t]},Nt="object"==typeof document&&document.all,jt,Lt={all:Nt,IS_HTMLDDA:void 0===Nt&&void 0!==Nt},Pt=Lt,Ot=Lt.all,Ft=Lt.IS_HTMLDDA?function(t){return"function"==typeof t||t===Ot}:function(t){return"function"==typeof t},Dt=Ft,qt=Lt,Rt=Lt.all,Bt=Lt.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:Dt(t)||t===Rt}:function(t){return"object"==typeof t?null!==t:Dt(t)},Ht=Bt,It=String,Ut=TypeError,Yt=function(t){if(Ht(t))return t;throw Ut(It(t)+" is not an object")},Wt={},Vt,Zt=!F((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),Xt,Gt,$t=Zt&&F((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Qt={},Jt,Kt=Bt,te=M.document,ee=Kt(te)&&Kt(te.createElement),ne=function(t){return ee?te.createElement(t):{}},re,ie,oe=ne,ae=!Zt&&!F((function(){return 7!=Object.defineProperty(oe("div"),"a",{get:function(){return 7}}).a})),le=q,se=Function.prototype.call,ue=le?se.bind(se):function(){return se.apply(se,arguments)},ce=M,fe=Ft,he=function(t){return fe(t)?t:void 0},de=function(t,e){return arguments.length<2?he(ce[t]):ce[t]&&ce[t][e]},pe,_e=U({}.isPrototypeOf),ge=de,ye=Ft,me=_e,ve,be=Object,xe=bt?function(t){return"symbol"==typeof t}:function(t){var e=ge("Symbol");return ye(e)&&me(e.prototype,be(t))},we=String,ke,Me=Ft,Ae=function(t){try{return we(t)}catch(t){return"Object"}},Se=TypeError,Ce,Ee=function(t){if(Me(t))return t;throw Se(Ae(t)+" is not a function")},ze=Y,Te=function(t,e){var n=t[e];return ze(n)?void 0:Ee(n)},Ne=ue,je=Ft,Le=Bt,Pe=TypeError,Oe,Fe=ue,De=Bt,qe=xe,Re=Te,Be=function(t,e){var n,r;if("string"===e&&je(n=t.toString)&&!Le(r=Ne(n,t)))return r;if(je(n=t.valueOf)&&!Le(r=Ne(n,t)))return r;if("string"!==e&&je(n=t.toString)&&!Le(r=Ne(n,t)))return r;throw Pe("Can't convert object to primitive value")},He,Ie=TypeError,Ue=Tt("toPrimitive"),Ye,We=function(t,e){if(!De(t)||qe(t))return t;var n=Re(t,Ue),r;if(n){if(void 0===e&&(e="default"),r=Fe(n,t,e),!De(r)||qe(r))return r;throw Ie("Can't convert object to primitive value")}return void 0===e&&(e="number"),Be(t,e)},Ve=xe,Ze=function(t){var e=We(t,"string");return Ve(e)?e:e+""},Xe=Zt,Ge=ae,$e=$t,Qe=Yt,Je=Ze,Ke=TypeError,tn=Object.defineProperty,en=Object.getOwnPropertyDescriptor,nn="enumerable",rn="configurable",on="writable";Qt.f=Xe?$e?function t(e,n,r){if(Qe(e),n=Je(n),Qe(r),"function"==typeof e&&"prototype"===n&&"value"in r&&on in r&&!r[on]){var i=en(e,n);i&&i[on]&&(e[n]=r.value,r={configurable:rn in r?r[rn]:i[rn],enumerable:nn in r?r[nn]:i[nn],writable:!1})}return tn(e,n,r)}:tn:function t(e,n,r){if(Qe(e),n=Je(n),Qe(r),Ge)try{return tn(e,n,r)}catch(t){}if("get"in r||"set"in r)throw Ke("Accessors not supported");return"value"in r&&(e[n]=r.value),e};var an=U,ln=an({}.toString),sn=an("".slice),un=function(t){return sn(ln(t),8,-1)},cn,fn=F,hn=un,dn=Object,pn=U("".split),_n,gn=fn((function(){return!dn("z").propertyIsEnumerable(0)}))?function(t){return"String"==hn(t)?pn(t,""):dn(t)}:dn,yn=Z,mn=function(t){return gn(yn(t))},vn=Math.ceil,bn=Math.floor,xn,wn=Math.trunc||function t(e){var n=+e;return(n>0?bn:vn)(n)},kn=function(t){var e=+t;return e!=e||0===e?0:wn(e)},Mn=kn,An=Math.max,Sn=Math.min,Cn=function(t,e){var n=Mn(t);return n<0?An(n+e,0):Sn(n,e)},En=kn,zn=Math.min,Tn=function(t){return t>0?zn(En(t),9007199254740991):0},Nn=Tn,jn,Ln=mn,Pn=Cn,On=function(t){return Nn(t.length)},Fn=function(t){return function(e,n,r){var i=Ln(e),o=On(i),a=Pn(r,o),l;if(t&&n!=n){for(;o>a;)if((l=i[a++])!=l)return!0}else for(;o>a;a++)if((t||a in i)&&i[a]===n)return t||a||0;return!t&&-1}},Dn={includes:Fn(!0),indexOf:Fn(!1)},qn={},Rn,Bn=tt,Hn=mn,In=Dn.indexOf,Un=qn,Yn=U([].push),Wn=function(t,e){var n=Hn(t),r=0,i=[],o;for(o in n)!Bn(Un,o)&&Bn(n,o)&&Yn(i,o);for(;e.length>r;)Bn(n,o=e[r++])&&(~In(i,o)||Yn(i,o));return i},Vn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Zn=Wn,Xn=Vn,Gn=Object.keys||function t(e){return Zn(e,Xn)},$n=Zt,Qn=$t,Jn=Qt,Kn=Yt,tr=mn,er=Gn;Wt.f=$n&&!Qn?Object.defineProperties:function t(e,n){Kn(e);for(var r=tr(n),i=er(n),o=i.length,a=0,l;o>a;)Jn.f(e,l=i[a++],r[l]);return e};var nr,rr=de("document","documentElement"),ir,or=ot,ar=A("keys"),lr=function(t){return ar[t]||(ar[t]=or(t))},sr=Yt,ur=Wt,cr=Vn,fr=qn,hr=rr,dr=ne,pr,_r=">",gr="<",yr="prototype",mr="script",vr=lr("IE_PROTO"),br=function(){},xr=function(t){return gr+mr+_r+t+gr+"/"+mr+_r},wr=function(t){t.write(xr("")),t.close();var e=t.parentWindow.Object;return t=null,e},kr=function(){var t=dr("iframe"),e="java"+mr+":",n;return t.style.display="none",hr.appendChild(t),t.src=String(e),(n=t.contentWindow.document).open(),n.write(xr("document.F=Object")),n.close(),n.F},Mr,Ar=function(){try{Mr=new ActiveXObject("htmlfile")}catch(t){}Ar="undefined"!=typeof document?document.domain&&Mr?wr(Mr):kr():wr(Mr);for(var t=cr.length;t--;)delete Ar[yr][cr[t]];return Ar()};fr[vr]=!0;var Sr=Object.create||function t(e,n){var r;return null!==e?(br[yr]=sr(e),r=new br,br[yr]=null,r[vr]=e):r=Ar(),void 0===n?r:ur.f(r,n)},Cr=Tt,Er=Sr,zr=Qt.f,Tr=Cr("unscopables"),Nr=Array.prototype;null==Nr[Tr]&&zr(Nr,Tr,{configurable:!0,value:Er(null)});var jr=function(t){Nr[Tr][t]=!0},Lr,Pr;jr("flat"),jr("flatMap");var Or=q,Fr=Function.prototype,Dr=Fr.apply,qr=Fr.call,Rr="object"==typeof Reflect&&Reflect.apply||(Or?qr.bind(Dr):function(){return qr.apply(Dr,arguments)}),Br={},Hr={},Ir={}.propertyIsEnumerable,Ur=Object.getOwnPropertyDescriptor,Yr=Ur&&!Ir.call({1:2},1);Hr.f=Yr?function t(e){var n=Ur(this,e);return!!n&&n.enumerable}:Ir;var Wr=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},Vr=Zt,Zr=ue,Xr=Hr,Gr=Wr,$r=mn,Qr=Ze,Jr=tt,Kr=ae,ti=Object.getOwnPropertyDescriptor;Br.f=Vr?ti:function t(e,n){if(e=$r(e),n=Qr(n),Kr)try{return ti(e,n)}catch(t){}if(Jr(e,n))return Gr(!Zr(Xr.f,e,n),e[n])};var ei,ni=Qt,ri=Wr,ii=Zt?function(t,e,n){return ni.f(t,e,ri(1,n))}:function(t,e,n){return t[e]=n,t},oi={},ai={get exports(){return oi},set exports(t){oi=t}},li=Zt,si=tt,ui=Function.prototype,ci=li&&Object.getOwnPropertyDescriptor,fi=si(ui,"name"),hi,di,pi={EXISTS:fi,PROPER:fi&&"something"===function t(){}.name,CONFIGURABLE:fi&&(!li||li&&ci(ui,"name").configurable)},_i,gi=Ft,yi=P,mi=U(Function.toString);gi(yi.inspectSource)||(yi.inspectSource=function(t){return mi(t)});var vi=yi.inspectSource,bi,xi=Ft,wi=M.WeakMap,ki,Mi=xi(wi)&&/native code/.test(String(wi)),Ai=M,Si=Bt,Ci=ii,Ei=tt,zi=P,Ti=lr,Ni=qn,ji="Object already initialized",Li=Ai.TypeError,Pi=Ai.WeakMap,Oi,Fi,Di,qi=function(t){return Di(t)?Fi(t):Oi(t,{})},Ri=function(t){return function(e){var n;if(!Si(e)||(n=Fi(e)).type!==t)throw Li("Incompatible receiver, "+t+" required");return n}};if(Mi||zi.state){var Bi=zi.state||(zi.state=new Pi);Bi.get=Bi.get,Bi.has=Bi.has,Bi.set=Bi.set,Oi=function(t,e){if(Bi.has(t))throw Li(ji);return e.facade=t,Bi.set(t,e),e},Fi=function(t){return Bi.get(t)||{}},Di=function(t){return Bi.has(t)}}else{var Hi=Ti("state");Ni[Hi]=!0,Oi=function(t,e){if(Ei(t,Hi))throw Li(ji);return e.facade=t,Ci(t,Hi,e),e},Fi=function(t){return Ei(t,Hi)?t[Hi]:{}},Di=function(t){return Ei(t,Hi)}}var Ii={set:Oi,get:Fi,has:Di,enforce:qi,getterFor:Ri},Ui=U,Yi=F,Wi=Ft,Vi=tt,Zi=Zt,Xi=pi.CONFIGURABLE,Gi=vi,$i=Ii,Qi=Ii.enforce,Ji=Ii.get,Ki=String,to=Object.defineProperty,eo=Ui("".slice),no=Ui("".replace),ro=Ui([].join),io=Zi&&!Yi((function(){return 8!==to((function(){}),"length",{value:8}).length})),oo=String(String).split("String"),ao=ai.exports=function(t,e,n){"Symbol("===eo(Ki(e),0,7)&&(e="["+no(Ki(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!Vi(t,"name")||Xi&&t.name!==e)&&(Zi?to(t,"name",{value:e,configurable:!0}):t.name=e),io&&n&&Vi(n,"arity")&&t.length!==n.arity&&to(t,"length",{value:n.arity});try{n&&Vi(n,"constructor")&&n.constructor?Zi&&to(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=Qi(t);return Vi(r,"source")||(r.source=ro(oo,"string"==typeof e?e:"")),t};Function.prototype.toString=ao((function t(){return Wi(this)&&Ji(this).source||Gi(this)}),"toString");var lo=Ft,so=Qt,uo=oi,co=z,fo=function(t,e,n,r){r||(r={});var i=r.enumerable,o=void 0!==r.name?r.name:e;if(lo(n)&&uo(n,o,r),r.global)i?t[e]=n:co(e,n);else{try{r.unsafe?t[e]&&(i=!0):delete t[e]}catch(t){}i?t[e]=n:so.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},ho={},po=Wn,_o,go=Vn.concat("length","prototype");ho.f=Object.getOwnPropertyNames||function t(e){return po(e,go)};var yo={};yo.f=Object.getOwnPropertySymbols;var mo=de,vo,bo=ho,xo=yo,wo=Yt,ko=U([].concat),Mo=mo("Reflect","ownKeys")||function t(e){var n=bo.f(wo(e)),r=xo.f;return r?ko(n,r(e)):n},Ao=tt,So=Mo,Co=Br,Eo=Qt,zo=function(t,e,n){for(var r=So(e),i=Eo.f,o=Co.f,a=0;a<r.length;a++){var l=r[a];Ao(t,l)||n&&Ao(n,l)||i(t,l,o(e,l))}},To=F,No=Ft,jo=/#|\.prototype\./,Lo=function(t,e){var n=Oo[Po(t)];return n==Do||n!=Fo&&(No(e)?To(e):!!e)},Po=Lo.normalize=function(t){return String(t).replace(jo,".").toLowerCase()},Oo=Lo.data={},Fo=Lo.NATIVE="N",Do=Lo.POLYFILL="P",qo=Lo,Ro=M,Bo=Br.f,Ho=ii,Io=fo,Uo=z,Yo=zo,Wo=qo,Vo=function(t,e){var n=t.target,r=t.global,i=t.stat,o,a,l,s,u,c;if(a=r?Ro:i?Ro[n]||Uo(n,{}):(Ro[n]||{}).prototype)for(l in e){if(u=e[l],s=t.dontCallGetSet?(c=Bo(a,l))&&c.value:a[l],!(o=Wo(r?l:n+(i?".":"#")+l,t.forced))&&void 0!==s){if(typeof u==typeof s)continue;Yo(u,s)}(t.sham||s&&s.sham)&&Ho(u,"sham",!0),Io(a,l,u,t)}},Zo,Xo,Go={};Go[Tt("toStringTag")]="z";var $o,Qo="[object z]"===String(Go),Jo=Ft,Ko=un,ta,ea=Tt("toStringTag"),na=Object,ra="Arguments"==Ko(function(){return arguments}()),ia=function(t,e){try{return t[e]}catch(t){}},oa,aa=Qo?Ko:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=ia(e=na(t),ea))?n:ra?Ko(e):"Object"==(r=Ko(e))&&Jo(e.callee)?"Arguments":r},la=String,sa=function(t){if("Symbol"===aa(t))throw TypeError("Cannot convert a Symbol value to a string");return la(t)},ua=Yt,ca=function(){var t=ua(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},fa=F,ha,da=M.RegExp,pa=fa((function(){var t=da("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),_a=pa||fa((function(){return!da("a","y").sticky})),ga=pa||fa((function(){var t=da("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),ya={BROKEN_CARET:ga,MISSED_STICKY:_a,UNSUPPORTED_Y:pa},ma=F,va,ba=M.RegExp,xa=ma((function(){var t=ba(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),wa=F,ka,Ma=M.RegExp,Aa=wa((function(){var t=Ma("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),Sa=ue,Ca=U,Ea=sa,za=ca,Ta=ya,Na,ja=Sr,La=Ii.get,Pa=xa,Oa=Aa,Fa=A("native-string-replace",String.prototype.replace),Da=RegExp.prototype.exec,qa=Da,Ra=Ca("".charAt),Ba=Ca("".indexOf),Ha=Ca("".replace),Ia=Ca("".slice),Ua=(Wa=/b*/g,Sa(Da,Ya=/a/,"a"),Sa(Da,Wa,"a"),0!==Ya.lastIndex||0!==Wa.lastIndex),Ya,Wa,Va=Ta.BROKEN_CARET,Za=void 0!==/()??/.exec("")[1],Xa;(Ua||Za||Va||Pa||Oa)&&(qa=function t(e){var n=this,r=La(n),i=Ea(e),o=r.raw,a,l,s,u,c,f,h;if(o)return o.lastIndex=n.lastIndex,a=Sa(qa,o,i),n.lastIndex=o.lastIndex,a;var d=r.groups,p=Va&&n.sticky,_=Sa(za,n),g=n.source,y=0,m=i;if(p&&(_=Ha(_,"y",""),-1===Ba(_,"g")&&(_+="g"),m=Ia(i,n.lastIndex),n.lastIndex>0&&(!n.multiline||n.multiline&&"\n"!==Ra(i,n.lastIndex-1))&&(g="(?: "+g+")",m=" "+m,y++),l=new RegExp("^(?:"+g+")",_)),Za&&(l=new RegExp("^"+g+"$(?!\\s)",_)),Ua&&(s=n.lastIndex),u=Sa(Da,p?l:n,m),p?u?(u.input=Ia(u.input,y),u[0]=Ia(u[0],y),u.index=n.lastIndex,n.lastIndex+=u[0].length):n.lastIndex=0:Ua&&u&&(n.lastIndex=n.global?u.index+u[0].length:s),Za&&u&&u.length>1&&Sa(Fa,u[0],l,(function(){for(c=1;c<arguments.length-2;c++)void 0===arguments[c]&&(u[c]=void 0)})),u&&d)for(u.groups=f=ja(null),c=0;c<d.length;c++)f[(h=d[c])[0]]=u[h[1]];return u});var Ga=qa,$a,Qa=Ga;Vo({target:"RegExp",proto:!0,forced:/./.exec!==Ga},{exec:Ga});var Ja=un,Ka=U,tl,el=function(t){if("Function"===Ja(t))return Ka(t)},nl=fo,rl=Ga,il=F,ol=Tt,al=ii,ll=ol("species"),sl=RegExp.prototype,ul=function(t,e,n,r){var i=ol(t),o=!il((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!il((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[ll]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||n){var l=el(/./[i]),s=e(i,""[t],(function(t,e,n,r,i){var a=el(t),s=e.exec;return s===rl||s===sl.exec?o&&!i?{done:!0,value:l(e,n,r)}:{done:!0,value:a(n,e,r)}:{done:!1}}));nl(String.prototype,t,s[0]),nl(sl,i,s[1])}r&&al(sl[i],"sham",!0)},cl=U,fl=kn,hl=sa,dl=Z,pl=cl("".charAt),_l=cl("".charCodeAt),gl=cl("".slice),yl=function(t){return function(e,n){var r=hl(dl(e)),i=fl(n),o=r.length,a,l;return i<0||i>=o?t?"":void 0:(a=_l(r,i))<55296||a>56319||i+1===o||(l=_l(r,i+1))<56320||l>57343?t?pl(r,i):a:t?gl(r,i,i+2):l-56320+(a-55296<<10)+65536}},ml,vl={codeAt:yl(!1),charAt:yl(!0)}.charAt,bl=function(t,e,n){return e+(n?vl(t,e).length:1)},xl=U,wl=$,kl=Math.floor,Ml=xl("".charAt),Al=xl("".replace),Sl=xl("".slice),Cl=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,El=/\$([$&'`]|\d{1,2})/g,zl=function(t,e,n,r,i,o){var a=n+t.length,l=r.length,s=El;return void 0!==i&&(i=wl(i),s=Cl),Al(o,s,(function(o,s){var u;switch(Ml(s,0)){case"$":return"$";case"&":return t;case"`":return Sl(e,0,n);case"'":return Sl(e,a);case"<":u=i[Sl(s,1,-1)];break;default:var c=+s;if(0===c)return o;if(c>l){var f=kl(c/10);return 0===f?o:f<=l?void 0===r[f-1]?Ml(s,1):r[f-1]+Ml(s,1):o}u=r[c-1]}return void 0===u?"":u}))},Tl=ue,Nl=Yt,jl=Ft,Ll=un,Pl=Ga,Ol=TypeError,Fl=function(t,e){var n=t.exec;if(jl(n)){var r=Tl(n,t,e);return null!==r&&Nl(r),r}if("RegExp"===Ll(t))return Tl(Pl,t,e);throw Ol("RegExp#exec called on incompatible receiver")},Dl=Rr,ql=ue,Rl=U,Bl=ul,Hl=F,Il=Yt,Ul=Ft,Yl=Y,Wl=kn,Vl=Tn,Zl=sa,Xl=Z,Gl=bl,$l=Te,Ql=zl,Jl=Fl,Kl,ts=Tt("replace"),es=Math.max,ns=Math.min,rs=Rl([].concat),is=Rl([].push),os=Rl("".indexOf),as=Rl("".slice),ls=function(t){return void 0===t?t:String(t)},ss="$0"==="a".replace(/./,"$0"),us=!!/./[ts]&&""===/./[ts]("a","$0"),cs=!Hl((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),fs;function hs(){(fs=document.createElement("style")).id="flourish-page-styles",fs.type="text/css",document.head.appendChild(fs)}function ds(){var t,e="";["mobile_small","mobile_big","tablet","desktop","big_screen"].forEach((function(t,n){var r="@media(min-width: "+rc["breakpoint_"+t]+"px) {\n",i="html { font-size:"+rc["font_size_"+t]+"%; }";e+=(0==n?"":r)+i+(0==n?"":"\n}")+"\n\n"})),fs.innerHTML=e;var n=[rc.body_font,rc.title_font,rc.subtitle_font,rc.footer_font];n.forEach((function(t){if(t){for(var e=!1,n=document.head.querySelectorAll("link.layout-font"),r=0;r<n.length;r++){var i;n[r].href==t.url&&(e=!0)}if(!e){var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("href",t.url),o.className="layout-font",document.head.appendChild(o)}}}));for(var r=document.head.querySelectorAll("link.layout-font"),i=0;i<r.length;i++){var o=r[i],a=!1;n.forEach((function(t){t&&t.url==o.href&&(a=!0)})),a||o.parentElement.removeChild(o)}document.body.style.fontFamily=rc.body_font.name}Bl("replace",(function(t,e,n){var r=us?"$":"$0";return[function t(n,r){var i=Xl(this),o=Yl(n)?void 0:$l(n,ts);return o?ql(o,n,i,r):ql(e,Zl(i),n,r)},function(t,i){var o=Il(this),a=Zl(t);if("string"==typeof i&&-1===os(i,r)&&-1===os(i,"$<")){var l=n(e,o,a,i);if(l.done)return l.value}var s=Ul(i);s||(i=Zl(i));var u=o.global;if(u){var c=o.unicode;o.lastIndex=0}for(var f=[];;){var h=Jl(o,a),d;if(null===h)break;if(is(f,h),!u)break;""===Zl(h[0])&&(o.lastIndex=Gl(a,Vl(o.lastIndex),c))}for(var p="",_=0,g=0;g<f.length;g++){for(var y=Zl((h=f[g])[0]),m=es(ns(Wl(h.index),a.length),0),v=[],b=1;b<h.length;b++)is(v,ls(h[b]));var x=h.groups;if(s){var w=rs([y],v,m,a);void 0!==x&&is(w,x);var k=Zl(Dl(i,void 0,w))}else k=Ql(y,a,m,v,x,i);m>=_&&(p+=as(a,_,m)+k,_=m+y.length)}return p+as(a,_)}]}),!cs||!ss||us);var ps=Object.freeze({"stack-default":["header","controls","primary","footer"],"stack-2":["primary","header","controls","footer"],"stack-3":["header","primary","controls","footer"],"stack-4":["controls","primary","header","footer"]});function _s(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function gs(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function ys(){}var ms=.7,vs=1/ms,bs="\\s*([+-]?\\d+)\\s*",xs="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ws="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ks=/^#([0-9a-f]{3,8})$/,Ms=new RegExp("^rgb\\("+[bs,bs,bs]+"\\)$"),As=new RegExp("^rgb\\("+[ws,ws,ws]+"\\)$"),Ss=new RegExp("^rgba\\("+[bs,bs,bs,xs]+"\\)$"),Cs=new RegExp("^rgba\\("+[ws,ws,ws,xs]+"\\)$"),Es=new RegExp("^hsl\\("+[xs,ws,ws]+"\\)$"),zs=new RegExp("^hsla\\("+[xs,ws,ws,xs]+"\\)$"),Ts={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Ns(){return this.rgb().formatHex()}function js(){return Ys(this).formatHsl()}function Ls(){return this.rgb().formatRgb()}function Ps(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=ks.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?Os(e):3===n?new Rs(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?Fs(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?Fs(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Ms.exec(t))?new Rs(e[1],e[2],e[3],1):(e=As.exec(t))?new Rs(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ss.exec(t))?Fs(e[1],e[2],e[3],e[4]):(e=Cs.exec(t))?Fs(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Es.exec(t))?Us(e[1],e[2]/100,e[3]/100,1):(e=zs.exec(t))?Us(e[1],e[2]/100,e[3]/100,e[4]):Ts.hasOwnProperty(t)?Os(Ts[t]):"transparent"===t?new Rs(NaN,NaN,NaN,0):null}function Os(t){return new Rs(t>>16&255,t>>8&255,255&t,1)}function Fs(t,e,n,r){return r<=0&&(t=e=n=NaN),new Rs(t,e,n,r)}function Ds(t){return t instanceof ys||(t=Ps(t)),t?new Rs((t=t.rgb()).r,t.g,t.b,t.opacity):new Rs}function qs(t,e,n,r){return 1===arguments.length?Ds(t):new Rs(t,e,n,null==r?1:r)}function Rs(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function Bs(){return"#"+Is(this.r)+Is(this.g)+Is(this.b)}function Hs(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Is(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Us(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Vs(t,e,n,r)}function Ys(t){if(t instanceof Vs)return new Vs(t.h,t.s,t.l,t.opacity);if(t instanceof ys||(t=Ps(t)),!t)return new Vs;if(t instanceof Vs)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,l=o-i,s=(o+i)/2;return l?(a=e===o?(n-r)/l+6*(n<r):n===o?(r-e)/l+2:(e-n)/l+4,l/=s<.5?o+i:2-o-i,a*=60):l=s>0&&s<1?0:a,new Vs(a,l,s,t.opacity)}function Ws(t,e,n,r){return 1===arguments.length?Ys(t):new Vs(t,e,n,null==r?1:r)}function Vs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Zs(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}_s(ys,Ps,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Ns,formatHex:Ns,formatHsl:js,formatRgb:Ls,toString:Ls}),_s(Rs,qs,gs(ys,{brighter:function(t){return t=null==t?vs:Math.pow(vs,t),new Rs(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?ms:Math.pow(ms,t),new Rs(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Bs,formatHex:Bs,formatRgb:Hs,toString:Hs})),_s(Vs,Ws,gs(ys,{brighter:function(t){return t=null==t?vs:Math.pow(vs,t),new Vs(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?ms:Math.pow(ms,t),new Vs(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Rs(Zs(t>=240?t-240:t+120,i,r),Zs(t,i,r),Zs(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var Xs=Math.PI/180,Gs=180/Math.PI,$s=18,Qs=.96422,Js=1,Ks=.82521,tu=4/29,eu=6/29,nu=3*eu*eu,ru=eu*eu*eu;function iu(t){if(t instanceof au)return new au(t.l,t.a,t.b,t.opacity);if(t instanceof du)return pu(t);t instanceof Rs||(t=Ds(t));var e=cu(t.r),n=cu(t.g),r=cu(t.b),i=lu((.2225045*e+.7168786*n+.0606169*r)/Js),o,a;return e===n&&n===r?o=a=i:(o=lu((.4360747*e+.3850649*n+.1430804*r)/Qs),a=lu((.0139322*e+.0971045*n+.7141733*r)/Ks)),new au(116*i-16,500*(o-i),200*(i-a),t.opacity)}function ou(t,e,n,r){return 1===arguments.length?iu(t):new au(t,e,n,null==r?1:r)}function au(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function lu(t){return t>ru?Math.pow(t,1/3):t/nu+tu}function su(t){return t>eu?t*t*t:nu*(t-tu)}function uu(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function cu(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function fu(t){if(t instanceof du)return new du(t.h,t.c,t.l,t.opacity);if(t instanceof au||(t=iu(t)),0===t.a&&0===t.b)return new du(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*Gs;return new du(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function hu(t,e,n,r){return 1===arguments.length?fu(t):new du(t,e,n,null==r?1:r)}function du(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function pu(t){if(isNaN(t.h))return new au(t.l,0,0,t.opacity);var e=t.h*Xs;return new au(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}_s(au,ou,gs(ys,{brighter:function(t){return new au(this.l+$s*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new au(this.l-$s*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Rs(uu(3.1338561*(e=Qs*su(e))-1.6168667*(t=Js*su(t))-.4906146*(n=Ks*su(n))),uu(-.9787684*e+1.9161415*t+.033454*n),uu(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),_s(du,hu,gs(ys,{brighter:function(t){return new du(this.h,this.c,this.l+$s*(null==t?1:t),this.opacity)},darker:function(t){return new du(this.h,this.c,this.l-$s*(null==t?1:t),this.opacity)},rgb:function(){return pu(this).rgb()}}));var _u=-.14861,gu=1.78277,yu=-.29227,mu=-.90649,vu=1.97294,bu=vu*mu,xu=vu*gu,wu=gu*yu-mu*_u,ku,Mu,Au,Su,Cu,Eu,zu,Tu,Nu,ju;function Lu(t){if(t instanceof Ou)return new Ou(t.h,t.s,t.l,t.opacity);t instanceof Rs||(t=Ds(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(wu*r+bu*e-xu*n)/(wu+bu-xu),o=r-i,a=(vu*(n-i)-yu*o)/mu,l=Math.sqrt(a*a+o*o)/(vu*i*(1-i)),s=l?Math.atan2(a,o)*Gs-120:NaN;return new Ou(s<0?s+360:s,l,i,t.opacity)}function Pu(t,e,n,r){return 1===arguments.length?Lu(t):new Ou(t,e,n,null==r?1:r)}function Ou(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Fu(t){return"string"==typeof t&&null!=t.match(/^(https?:\/\/|data:)/i)}function Du(t,e){if("string"!=typeof t)return!1;var n=Ps(t);return n.opacity=void 0!==e?e:1,n}function qu(t,e){var n=Du(t,e);return!!n&&n.toString()}function Ru(){(Mu=document.createElement("header")).className="flourish-header";var t=document.createElement("hgroup");return Au=document.createElement("h1"),Su=document.createElement("h2"),Cu=document.createElement("p"),Eu=document.createElement("img"),Mu.appendChild(Eu),Mu.appendChild(t),t.appendChild(Au),t.appendChild(Su),Mu.appendChild(Cu),Mu}function Bu(){Mu.style.textAlign=rc.header_align,Mu.style.margin=0,Mu.style.borderTop="top"==rc.header_border?rc.header_border_width+"px "+rc.header_border_style+" "+rc.header_border_color:null,Mu.style.borderBottom="bottom"==rc.header_border?rc.header_border_width+"px "+rc.header_border_style+" "+rc.header_border_color:null,Mu.style.paddingTop="top"==rc.header_border?rc.header_border_space+"rem":"",Mu.style.paddingBottom="bottom"==rc.header_border?rc.header_border_space+"rem":"",Au.innerHTML=rc.title?rc.title:"",Au.style.fontFamily=rc.title_font?rc.title_font.name:"inherit",Au.style.fontSize=("custom"!=rc.title_size?rc.title_size:rc.title_size_custom)+"rem",Au.style.lineHeight=rc.title_line_height,Au.style.fontWeight=rc.title_weight,Au.style.color=rc.title_color||rc.font_color,Au.style.margin=0,Au.style.paddingTop=rc.title?("custom"==rc.title_space_above?rc.title_space_above_custom:rc.title_space_above)+"rem":0,Su.innerHTML=rc.subtitle?rc.subtitle:"",Su.style.fontFamily=rc.subtitle_font?rc.subtitle_font.name:"inherit",Su.style.fontSize=("custom"!=rc.subtitle_size?rc.subtitle_size:rc.subtitle_size_custom)+"rem",Su.style.lineHeight=rc.subtitle_line_height,Su.style.fontWeight=rc.subtitle_weight,Su.style.color=rc.subtitle_color||rc.font_color,Su.style.margin=0,Su.style.paddingTop=rc.subtitle?("custom"==rc.subtitle_space_above?rc.subtitle_space_above_custom:rc.subtitle_space_above)+"rem":0,Cu.innerHTML=rc.header_text?rc.header_text:"",Cu.style.fontSize=("custom"!=rc.header_text_size?rc.header_text_size:rc.header_text_size_custom)+"rem",Cu.style.lineHeight=rc.header_text_line_height,Cu.style.fontWeight=rc.header_text_weight,Cu.style.margin=0,Cu.style.color=rc.header_text_color||rc.font_color,Cu.style.paddingTop=rc.header_text?("custom"==rc.header_text_space_above?rc.header_text_space_above_custom:rc.header_text_space_above)+"rem":0,Eu.style.display=rc.header_logo_enabled&&Fu(rc.header_logo_src)?"":"none",Eu.style.position="inside"==rc.header_logo_align?"":"fixed",Eu.style.height=rc.header_logo_height+"rem",Eu.style.top="outside"==rc.header_logo_align?0:"",Eu.style.left="outside"==rc.header_logo_align&&"left"==rc.header_logo_position_outside?0:"",Eu.style.right="outside"==rc.header_logo_align&&"right"==rc.header_logo_position_outside?0:"",Eu.style.marginTop=rc.header_logo_margin_top+"rem",Eu.style.marginBottom=rc.header_logo_margin_bottom+"rem",Eu.style.marginLeft=rc.header_logo_margin_left+"rem",Eu.style.marginRight=rc.header_logo_margin_right+"rem",Eu.style.float="top"==rc.header_logo_position_inside||"outside"==rc.header_logo_align?"":rc.header_logo_position_inside,Eu.style.width="auto",Eu.src=Fu(rc.header_logo_src)?rc.header_logo_src:""}_s(Ou,Pu,gs(ys,{brighter:function(t){return t=null==t?vs:Math.pow(vs,t),new Ou(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?ms:Math.pow(ms,t),new Ou(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Xs,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new Rs(255*(e+n*(_u*r+gu*i)),255*(e+n*(yu*r+mu*i)),255*(e+n*(vu*r)),this.opacity)}})),ku=document.createElement("canvas").getContext("2d");var Hu=!1;function Iu(){var t=document.createElement("style");t.type="text/css",t.innerHTML=".flourish-footer { margin: 0; } .flourish-footer p { margin: 0; display: inline; } .flourish-footer p:empty { height: 0; } .flourish-footer a { color: inherit; }",document.head.appendChild(t)}function Uu(t){return 0!==t.indexOf("http://")&&0!==t.indexOf("https://")?"http://"+t:t}function Yu(){return Iu(),(zu=document.createElement("footer")).className="flourish-footer",(Tu=document.createElement("div")).className="flourish-footer-text",(ju=document.createElement("a")).target="_blank",(Nu=document.createElement("img")).className="flourish-footer-logo",ju.appendChild(Nu),zu.appendChild(Tu),zu.appendChild(ju),zu}function Wu(t){if(t){var e=Ps(t);return Math.round(299*e.r+587*e.g+114*e.b)/1e3>195}console.warn("No valid color",t)}function Vu(){return rc.background_color_enabled&&!Wu(rc.background_color)}function Zu(){var t=Fu(rc.footer_logo_src)?rc.footer_logo_src:"";return Fu(rc.footer_logo_src_light)&&Vu()&&(t=rc.footer_logo_src_light),t}function Xu(){return rc.footer_logo_enabled&&Zu()}function Gu(){var t=[{name:rc.source_name,url:rc.source_url},{name:rc.multiple_sources?rc.source_name_2:"",url:rc.multiple_sources?rc.source_url_2:""},{name:rc.multiple_sources?rc.source_name_3:"",url:rc.multiple_sources?rc.source_url_3:""}].filter((function(t){return t.name||t.url}));Hu=t.length>0||rc.footer_note||rc.footer_note_secondary||Xu(),zu.style.display="flex",zu.style.height=Hu?null:0,zu.style.width="100%",zu.style.paddingTop="top"==rc.footer_border?rc.footer_border_space+"rem":"",zu.style.paddingBottom="bottom"==rc.footer_border?rc.footer_border_space+"rem":"",zu.style.borderTop="top"==rc.footer_border?rc.footer_border_width+"px "+rc.footer_border_style+" "+rc.footer_border_color:"",zu.style.borderBottom="bottom"==rc.footer_border?rc.footer_border_width+"px "+rc.footer_border_style+" "+rc.footer_border_color:"",zu.style.fontFamily=rc.footer_font?rc.footer_font.name:"inherit",zu.style.fontWeight=rc.footer_text_weight,"justify"==rc.footer_align?zu.style.justifyContent="space-between":"left"==rc.footer_align?zu.style.justifyContent="flex-start":"right"==rc.footer_align?zu.style.justifyContent="flex-end":"center"==rc.footer_align&&(zu.style.justifyContent="center"),zu.style.fontSize=rc.footer_text_size+"rem",zu.style.color=rc.footer_text_color||rc.font_color,zu.style.alignItems=rc.footer_align_vertical;var e=document.createElement("span");t.forEach((function(t,n){var r=document.createElement("p");if(n>0&&(r.innerText=", "),t.url){var i=document.createElement("a");i.innerText=t.name||t.url,i.href=Uu(t.url),i.target="_blank",r.appendChild(i)}else r.innerText+=t.name||t.url;e.innerHTML+=r.innerHTML})),Tu.style.order="left"==rc.footer_logo_order?2:"",Tu.style.textAlign="justify"==rc.footer_align?"":rc.footer_align;var n="<p>";n+=""!==e.innerHTML?rc.source_label+" "+e.innerHTML:"",n+=rc.footer_note?(""!==e.innerHTML?" • ":"")+rc.footer_note:"",n+="</p>",n+=rc.footer_note_secondary?"<br /><p>"+rc.footer_note_secondary+"</p>":"",Tu.innerHTML=n,Nu.src=Zu(),Nu.style.height=rc.footer_logo_height+"rem",Nu.style.marginLeft="right"==rc.footer_logo_order?rc.footer_logo_margin+"rem":"",Nu.style.marginRight="left"==rc.footer_logo_order?rc.footer_logo_margin+"rem":"",Nu.style.verticalAlign=rc.footer_align_vertical,Nu.style.display=Xu()?"":"none",ju.href=""==rc.footer_logo_link_url?"":Uu(rc.footer_logo_link_url),ju.style.cursor=""==rc.footer_logo_link_url?"default":"pointer"}function $u(t){t||ds(),Bu(),Gu(),Qu();var e=lc.wrapper.style;e.height="100vh",e.color=rc.font_color,e.maxWidth="wrapper"==rc.max_width_target?rc.max_width+"px":"",e.marginLeft="wrapper"==rc.max_width_target&&"left"!=rc.max_width_align?"auto":"",e.marginRight="wrapper"==rc.max_width_target&&"right"!=rc.max_width_align?"auto":"",e.padding=rc.margin_top+"rem "+rc.margin_right+"rem "+rc.margin_bottom+"rem "+rc.margin_left+"rem",e.borderTop=rc.border.enabled?rc.border.top.width+"px "+rc.border.top.style+" "+rc.border.top.color:"",e.borderRight=rc.border.enabled?rc.border.right.width+"px "+rc.border.right.style+" "+rc.border.right.color:"",e.borderBottom=rc.border.enabled?rc.border.bottom.width+"px "+rc.border.bottom.style+" "+rc.border.bottom.color:"",e.borderLeft=rc.border.enabled?rc.border.left.width+"px "+rc.border.left.style+" "+rc.border.left.color:"";var n=lc.primary.outer.style,r=lc.legend.outer.style,i=parseFloat(n.order)>parseFloat(r.order)?"above":"below";ps[rc.layout_order].forEach((function(t,e){lc[t].outer.style.order=10*e})),n.flex="1 1 auto",n.height=null,Ec(i),r.textAlign=rc.header_align,lc.controls.outer.style.textAlign=rc.header_align,lc.primary.outer.style.maxWidth="primary"==rc.max_width_target?rc.max_width+"px":"",lc.primary.outer.style.marginLeft="primary"==rc.max_width_target&&"left"!=rc.max_width_align?"auto":"",lc.primary.outer.style.marginRight="primary"==rc.max_width_target&&"right"!=rc.max_width_align?"auto":"";var o=rc.screenreader_hide_primary&&""!=rc.screenreader_text_primary,a,l;document.getElementById("fl-layout-primary-description").innerText=rc.screenreader_hide_primary?rc.screenreader_text_primary:"",o?lc.primary.outer.setAttribute("aria-describedBy","fl-layout-primary-description"):lc.primary.outer.removeAttribute("aria-describedBy"),rc.screenreader_hide_primary?lc.primary.inner.setAttribute("aria-hidden",!0):lc.primary.inner.removeAttribute("aria-hidden");var s=(l="custom"==rc.space_between_sections?rc.space_between_sections_custom:rc.space_between_sections)/2+"rem";oc.map((function(t){var e=lc[t],n=e.outer.style,r;return{name:t,height:uc(e.inner),order:parseFloat(n.order),style:n}})).sort((function(t,e){return t.order-e.order})).filter((function(t){if(t.height)return!0;t.style.paddingBottom="",t.style.paddingTop=""})).forEach((function(t,e,n){t.style.paddingTop=e?s:"",t.style.paddingBottom=e<n.length-1?s:""}))}function Qu(){document.body.style.backgroundColor=rc.background_color_enabled?rc.background_color:"transparent",document.body.style.backgroundImage=rc.background_image_enabled?"url("+rc.background_image_src+")":"",document.body.style.backgroundSize=rc.background_image_size,document.body.style.backgroundRepeat="no-repeat",document.body.style.backgroundPosition=rc.background_image_position}var Ju=Object.freeze({body_font:{name:"Source Sans Pro",url:"https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700"},title_font:null,subtitle_font:null,footer_font:null,border:{enabled:!1,top:{width:1,color:"#dddddd",style:"solid"},right:{width:1,color:"#dddddd",style:"solid"},bottom:{width:1,color:"#dddddd",style:"solid"},left:{width:1,color:"#dddddd",style:"solid"}},layout_order:"stack-default",margin_top:.75,margin_right:.75,margin_bottom:.75,margin_left:.75,space_between_sections:1,space_between_sections_custom:1,background_color_enabled:!0,background_color:"#ffffff",background_image_enabled:!1,background_image_src:"",background_image_size:"cover",background_image_position:"center center",max_width:600,max_width_target:"none",max_width_align:"center",breakpoint_mobile_small:0,breakpoint_mobile_big:380,breakpoint_tablet:580,breakpoint_desktop:1080,breakpoint_big_screen:1280,font_color:"#333333",font_size_mobile_small:62.5,font_size_mobile_big:75,font_size_tablet:87.5,font_size_desktop:100,font_size_big_screen:120,header_align:"left",header_border:"none",header_border_width:1,header_border_color:"#dddddd",header_border_style:"solid",header_border_space:.5,header_logo_enabled:!1,header_logo_align:"inside",header_logo_src:"",header_logo_height:3,header_logo_position_inside:"left",header_logo_position_outside:"left",header_logo_margin_top:.25,header_logo_margin_right:.5,header_logo_margin_bottom:0,header_logo_margin_left:0,title:"",title_size:1.6,title_size_custom:1.6,title_line_height:1.2,title_color:null,title_weight:"bold",title_space_above:0,title_space_above_custom:1.5,title_styling:!1,subtitle:"",subtitle_size:1.6,subtitle_size_custom:1.6,subtitle_line_height:1.2,subtitle_color:null,subtitle_weight:"normal",subtitle_space_above:0,subtitle_space_above_custom:1.5,subtitle_styling:!1,header_text:"",header_text_size:1.2,header_text_size_custom:1.2,header_text_line_height:1.2,header_text_color:null,header_text_weight:"normal",header_text_space_above:.5,header_text_space_above_custom:1.5,source_label:"Source: ",source_name:"",source_url:"",source_name_2:"",source_url_2:"",source_name_3:"",source_url_3:"",footer_note:"",footer_note_secondary:"",footer_text_size:1,footer_text_color:null,footer_styling:!1,footer_text_weight:"normal",footer_align:"justify",footer_align_vertical:"center",footer_border:"none",footer_border_width:1,footer_border_color:"#dddddd",footer_border_style:"solid",footer_border_space:.5,footer_logo_enabled:!1,footer_logo_src:"",footer_logo_src_light:"",footer_logo_link_url:"",footer_logo_height:1.5,footer_logo_margin:.25,footer_logo_order:"right",screenreader_hide_primary:!0,screenreader_text_primary:""});function Ku(){if(Flourish.fixed_height)return window.innerHeight;var t=window.innerWidth;return t>999?650:t>599?575:400}var tc="Your web browser does not support the features used by this content. Consider updating to a modern browser.",ec,nc,rc;function ic(t){return window.innerWidth!==ec&&(ec=window.innerWidth,nc=parseFloat(getComputedStyle(document.documentElement).fontSize)),t*nc}var oc=["header","controls","legend","primary","footer"],ac,lc={};function sc(t){return t.getBoundingClientRect().width}function uc(t){return t.getBoundingClientRect().height}function cc(){var t=document.createElement("div");t.id="fl-layout-wrapper-outer",t.style.display="flex";var e=document.createElement("main");e.id="fl-layout-wrapper",e.style.display="flex",e.style.flexGrow="1",e.style.flexDirection="column",e.style.boxSizing="border-box",e.style.overflow="hidden";var n=document.createElement("aside");return n.id="fl-layout-sidebar",n.style.position="relative",lc.sidebar=n,t.appendChild(e),t.appendChild(n),document.body.appendChild(t),e}function fc(t,e){var n="fl-layout-"+t,r=document.createElement("section");r.className="fl-layout-container",r.id=n+"-container",r.style.width="100%",r.style.position="relative",r.style.order=e;var i=document.createElement("div");return i.className="fl-layout-inner",i.id=n,i.style.width="100%",i.style.position="relative","primary"==t&&(r.style.display="flex",hc(r)),"controls"!=t&&"legend"!=t||i.setAttribute("aria-hidden",!0),r.appendChild(i),lc.wrapper.appendChild(r),{outer:r,inner:i}}function hc(t){var e=document.createElement("p");e.id="fl-layout-primary-description";var n=e.style;return n.border="0",n.height="1px",n.width="1px",n.margin="-1px",n.overflow="hidden",n.padding="0",n.position="absolute",n.clip="rect(0 0 0 0)",t.appendChild(e),e}function dc(){var t=lc.primary.outer;t.style.position="relative",(ac=document.createElement("div")).id="fl-layout-overlay";var e=ac.style;e.position="absolute",e.display="none",e.width="100%",e.height="100%",e.top=0,e.left=0,e.backgroundColor="rgb(200,200,200)",e.zIndex=999999,e.pointerEvents="none";var n=document.createElement("p");return n.className="fl-layout-overlay-message",(e=n.style).color="#333333",e.fontSize="1.5rem",e.paddingLeft="15%",e.paddingRight="15%",e.width="100%",e.boxSizing="border-box",e.position="absolute",e.top="50%",e.transform="translate(0, -50%)",e.margin="0",e.textAlign="center",ac.appendChild(n),t.appendChild(ac),ac}function pc(){return lc.wrapper}function _c(){return lc.sidebar}function gc(t){return-1!==oc.indexOf(t)?lc[t].inner:null}function yc(t){return lc[t]||void 0===t?sc("wrapper"==t||void 0===t?lc.wrapper:lc[t].outer):null}function mc(t){return lc[t]||void 0===t?"wrapper"==t||void 0===t?sc(lc.wrapper)-Ac("horizontal")-Sc("horizontal"):sc(lc[t].inner):null}function vc(t){return lc[t]||void 0===t?uc("wrapper"==t||void 0===t?lc.wrapper:lc[t].outer):null}function bc(t){return lc[t]||void 0===t?"wrapper"==t||void 0===t?uc(lc.wrapper)-Ac("vertical")-Sc("vertical"):uc(lc[t].inner):null}function xc(){return uc(lc.primary.outer)-kc(lc.primary.outer)}function wc(){return sc(lc.primary.inner)}function kc(t){var e,n;return(parseFloat(getComputedStyle(t).paddingTop)||0)+(parseFloat(getComputedStyle(t).paddingBottom)||0)}function Mc(){var t=Ku()-Ac("vertical")-Sc("vertical"),e,n=["header","controls","legend","footer"].reduce((function(t,e){return t+vc(e)}),0);return t-n-kc(lc.primary.outer)}function Ac(t){var e;return"left"==t?e=rc.margin_left:"right"==t?e=rc.margin_right:"top"==t?e=rc.margin_top:"bottom"==t?e=rc.margin_bottom:"horizontal"==t?e=rc.margin_left+rc.margin_right:"vertical"==t&&(e=rc.margin_top+rc.margin_bottom),ic(e)}function Sc(t){return rc.border.enabled?"vertical"==t?rc.border.top.width+rc.border.bottom.width:"horizontal"==t?rc.border.left.width+rc.border.right.width:null:0}function Cc(t){var e=lc.primary;if(Flourish.fixed_height||void 0===Flourish.fixed_height)e.inner.style.height="";else{var n=null===t,r=n?Mc():t;r+kc(lc.primary.outer)!==parseFloat(e.outer.style.height)&&(lc.wrapper.style.height="",e.outer.style.flex="",e.inner.style.height=r+"px",Flourish.setHeight(n?null:vc()))}}function Ec(t){var e=parseFloat(lc.primary.outer.style.order);lc.legend.outer.style.order=e+1*("below"===t.trim().toLowerCase()?1:-1)}function zc(t){var e=ac.querySelector(".fl-layout-overlay-message");if(t){ac.style.display="block";var n="string"==typeof t?t:tc;e.innerHTML=n}else e.textContent="",ac.style.display="none"}function Tc(){return ac}function Nc(t){for(var e in rc=t,Ju)void 0===rc[e]&&(rc[e]=Ju[e]);return hs(),lc.wrapper=cc(),oc.forEach((function(t,e){lc[t]=fc(t,e)})),gc("header").appendChild(Ru()),gc("footer").appendChild(Yu()),lc.primary.outer.style.overflow="hidden",dc(),$u(!0),{update:$u,getWrapper:pc,getSidebar:_c,getSection:gc,getOuterWidth:yc,getInnerWidth:mc,getOuterHeight:vc,getInnerHeight:bc,getPrimaryHeight:xc,getPrimaryWidth:wc,getDefaultPrimaryHeight:Mc,setHeight:Cc,setLegendPosition:Ec,showOverlay:zc,remToPx:ic,getOverlay:Tc}}var jc={show_controls:!0,geo_mode:"Chart",zoom_focus:[],geo_shapes_index:0,position_by_1:{type:"none",index:null,aggregation_type:"none"},position_by_2:{type:"none",index:null,aggregation_type:"none"},size_by:{type:"none",index:null,aggregation_type:"none"},shade_by:{type:"none",index:null,aggregation_type:"none"},aggregate_by:{type:"none",index:null},filter:"All",layout:{margin:10},shape:"circle",renderer:"canvas",draw_smaller_points_on_top:!0,transition_duration:1.5,scatter_max_radius:1,filter_out_blank_values:!1,prevent_clipping:!0,aspect_ratio:.66,scale_type:"categorical",color:{},default_color:"#aaaaaa",invalid_color:"#ffecec",text_color:null,stroke_width:1,stroke_color:"#ffffff",auto_set_axis_titles:!0,item_label_min_size:.1,item_label_max_size:1,item_label_padding:25,group_label_size:.7,group_label_color:null,group_label_weight:"normal",group_label_margin:1,group_sort_method:"ascending",geo_zoom_enabled:!0,show_all_geojson_regions:!0,geo_region_default_color:"#cccccc",geo_point_show_labels:!1,geo_point_opacity:1,geo_point_max_radius:.75,geo_apply_zoom_scale_to_points:!0,geo_fit_to_points:!0,popup:{popup_custom_header:"{{Country Name}}",panel_custom_header:"{{Country Name}}"},localization:{},number_format:{},narrow_breakpoint:500,control_text_color:null,controls_toggle_background:null,controls_toggle_color:null,controls_toggle_size:1,controls_style:{},button_style:{},dropdown_style:{},geo_control:{control_type:"buttons",button_group:!0,sort:"categorical",button_group_width_mode:"full"},geo_shapes_control:{dropdown_width_mode:"full"},position_by_1_control:{dropdown_width_mode:"full"},position_by_2_control:{dropdown_width_mode:"full"},size_by_control:{dropdown_width_mode:"full"},shade_by_control:{dropdown_width_mode:"full"},filter_control:{dropdown_width_mode:"full"},aggregate_by_control:{dropdown_width_mode:"full"},controls_geo_visible:!0,controls_geo_shapes_visible:!0,controls_position_by_1_visible:!0,controls_position_by_2_visible:!0,controls_size_by_visible:!0,controls_shade_by_visible:!0,controls_aggregate_by_visible:!0,controls_filter_visible:!0,controls_geo_shapes_label:"Map Shapes",controls_position_by_1_label:"Position",controls_position_by_2_label:"Position",controls_size_by_label:"Size",controls_shade_by_label:"Color",controls_aggregate_by_label:"Aggregation",controls_filter_label:"Filter",controls_position_by_items:"",controls_exclude_position_by_items:!1,controls_size_by_items:"",controls_exclude_size_by_items:!1,controls_shade_by_items:"",controls_exclude_shade_by_items:!1,controls_aggregate_by_items:"",controls_exclude_aggregate_by_items:!1,controls_dropdown_sort:!0,controls_dropdown_separate_categorical_and_numeric:!1,filter_control_include_all:!0,filter_control_all_text:"All",xAxis:{gridlines_visible:!0,tick_label_angle:0,line_visible:!1,gridline_width:.05,tick_label_size:.7,tick_label_color:"#333333",tick_length:0,title_size:.8},yAxis:{line_visible:!1,gridline_width:.05,tick_label_size:.7,tick_label_color:"#333333",title_size:.8},legend_container:{},size_by_legend:{},shade_by_legend_discrete:{max_width:100},shade_by_legend_continuous:{},non_header_font:{name:"",url:""},search_enabled:!0,search_box_size:2,search_box_radius:4,search_box_stroke:.1,search_bg_color:null,search_bg_opacity:.8,search_icon_color:null,search_text_color:null,search_dropdown:!1,search_expanded:!1,search_placeholder:"Search.."};function Lc(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}var Pc,Oc="object"==typeof global&&global&&global.Object===Object&&global,Fc="object"==typeof self&&self&&self.Object===Object&&self,Dc,qc=Oc||Fc||Function("return this")(),Rc,Bc=qc.Symbol,Hc=Object.prototype,Ic=Hc.hasOwnProperty,Uc=Hc.toString,Yc=Bc?Bc.toStringTag:void 0;function Wc(t){var e=Ic.call(t,Yc),n=t[Yc];try{t[Yc]=void 0;var r=!0}catch(t){}var i=Uc.call(t);return r&&(e?t[Yc]=n:delete t[Yc]),i}var Vc,Zc=Object.prototype.toString;function Xc(t){return Zc.call(t)}var Gc="[object Null]",$c="[object Undefined]",Qc=Bc?Bc.toStringTag:void 0;function Jc(t){return null==t?void 0===t?$c:Gc:Qc&&Qc in Object(t)?Wc(t):Xc(t)}function Kc(t){return null!=t&&"object"==typeof t}var tf="[object Arguments]";function ef(t){return Kc(t)&&Jc(t)==tf}var nf=Object.prototype,rf=nf.hasOwnProperty,of=nf.propertyIsEnumerable,af=ef(function(){return arguments}())?ef:function(t){return Kc(t)&&rf.call(t,"callee")&&!of.call(t,"callee")},lf=af,sf,uf=Array.isArray,cf=Bc?Bc.isConcatSpreadable:void 0;function ff(t){return uf(t)||lf(t)||!!(cf&&t&&t[cf])}function hf(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=ff),i||(i=[]);++o<a;){var l=t[o];e>0&&n(l)?e>1?hf(l,e-1,n,r,i):Lc(i,l):r||(i[i.length]=l)}return i}function df(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}var pf="[object Symbol]";function _f(t){return"symbol"==typeof t||Kc(t)&&Jc(t)==pf}var gf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yf=/^\w*$/;function mf(t,e){if(uf(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!_f(t))||(yf.test(t)||!gf.test(t)||null!=e&&t in Object(e))}function vf(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}var bf="[object AsyncFunction]",xf="[object Function]",wf="[object GeneratorFunction]",kf="[object Proxy]";function Mf(t){if(!vf(t))return!1;var e=Jc(t);return e==xf||e==wf||e==bf||e==kf}var Af,Sf=qc["__core-js_shared__"],Cf=function(){var t=/[^.]+$/.exec(Sf&&Sf.keys&&Sf.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Ef(t){return!!Cf&&Cf in t}var zf,Tf=Function.prototype.toString;function Nf(t){if(null!=t){try{return Tf.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var jf=/[\\^$.*+?()[\]{}|]/g,Lf=/^\[object .+?Constructor\]$/,Pf=Function.prototype,Of=Object.prototype,Ff=Pf.toString,Df=Of.hasOwnProperty,qf=RegExp("^"+Ff.call(Df).replace(jf,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rf(t){return!(!vf(t)||Ef(t))&&(Mf(t)?qf:Lf).test(Nf(t));var e}function Bf(t,e){return null==t?void 0:t[e]}function Hf(t,e){var n=Bf(t,e);return Rf(n)?n:void 0}var If,Uf=Hf(Object,"create");function Yf(){this.__data__=Uf?Uf(null):{},this.size=0}function Wf(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var Vf="__lodash_hash_undefined__",Zf,Xf=Object.prototype.hasOwnProperty;function Gf(t){var e=this.__data__;if(Uf){var n=e[t];return n===Vf?void 0:n}return Xf.call(e,t)?e[t]:void 0}var $f,Qf=Object.prototype.hasOwnProperty;function Jf(t){var e=this.__data__;return Uf?void 0!==e[t]:Qf.call(e,t)}var Kf="__lodash_hash_undefined__";function th(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Uf&&void 0===e?Kf:e,this}function eh(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function nh(){this.__data__=[],this.size=0}function rh(t,e){return t===e||t!=t&&e!=e}function ih(t,e){for(var n=t.length;n--;)if(rh(t[n][0],e))return n;return-1}eh.prototype.clear=Yf,eh.prototype.delete=Wf,eh.prototype.get=Gf,eh.prototype.has=Jf,eh.prototype.set=th;var oh,ah=Array.prototype.splice;function lh(t){var e=this.__data__,n=ih(e,t),r;return!(n<0)&&(n==e.length-1?e.pop():ah.call(e,n,1),--this.size,!0)}function sh(t){var e=this.__data__,n=ih(e,t);return n<0?void 0:e[n][1]}function uh(t){return ih(this.__data__,t)>-1}function ch(t,e){var n=this.__data__,r=ih(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this}function fh(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}fh.prototype.clear=nh,fh.prototype.delete=lh,fh.prototype.get=sh,fh.prototype.has=uh,fh.prototype.set=ch;var hh,dh=Hf(qc,"Map");function ph(){this.size=0,this.__data__={hash:new eh,map:new(dh||fh),string:new eh}}function _h(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function gh(t,e){var n=t.__data__;return _h(e)?n["string"==typeof e?"string":"hash"]:n.map}function yh(t){var e=gh(this,t).delete(t);return this.size-=e?1:0,e}function mh(t){return gh(this,t).get(t)}function vh(t){return gh(this,t).has(t)}function bh(t,e){var n=gh(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this}function xh(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}xh.prototype.clear=ph,xh.prototype.delete=yh,xh.prototype.get=mh,xh.prototype.has=vh,xh.prototype.set=bh;var wh="Expected a function";function kh(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError(wh);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(kh.Cache||xh),n}kh.Cache=xh;var Mh=500;function Ah(t){var e=kh(t,(function(t){return n.size===Mh&&n.clear(),t})),n=e.cache;return e}var Sh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ch=/\\(\\)?/g,Eh=Ah((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Sh,(function(t,n,r,i){e.push(r?i.replace(Ch,"$1"):n||t)})),e})),zh=Eh,Th=1/0,Nh=Bc?Bc.prototype:void 0,jh=Nh?Nh.toString:void 0;function Lh(t){if("string"==typeof t)return t;if(uf(t))return df(t,Lh)+"";if(_f(t))return jh?jh.call(t):"";var e=t+"";return"0"==e&&1/t==-Th?"-0":e}function Ph(t){return null==t?"":Lh(t)}function Oh(t,e){return uf(t)?t:mf(t,e)?[t]:zh(Ph(t))}var Fh=1/0;function Dh(t){if("string"==typeof t||_f(t))return t;var e=t+"";return"0"==e&&1/t==-Fh?"-0":e}function qh(t,e){for(var n=0,r=(e=Oh(e,t)).length;null!=t&&n<r;)t=t[Dh(e[n++])];return n&&n==r?t:void 0}function Rh(){this.__data__=new fh,this.size=0}function Bh(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function Hh(t){return this.__data__.get(t)}function Ih(t){return this.__data__.has(t)}var Uh=200;function Yh(t,e){var n=this.__data__;if(n instanceof fh){var r=n.__data__;if(!dh||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new xh(r)}return n.set(t,e),this.size=n.size,this}function Wh(t){var e=this.__data__=new fh(t);this.size=e.size}Wh.prototype.clear=Rh,Wh.prototype.delete=Bh,Wh.prototype.get=Hh,Wh.prototype.has=Ih,Wh.prototype.set=Yh;var Vh="__lodash_hash_undefined__";function Zh(t){return this.__data__.set(t,Vh),this}function Xh(t){return this.__data__.has(t)}function Gh(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new xh;++e<n;)this.add(t[e])}function $h(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function Qh(t,e){return t.has(e)}Gh.prototype.add=Gh.prototype.push=Zh,Gh.prototype.has=Xh;var Jh=1,Kh=2;function td(t,e,n,r,i,o){var a=n&Jh,l=t.length,s=e.length;if(l!=s&&!(a&&s>l))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var f=-1,h=!0,d=n&Kh?new Gh:void 0;for(o.set(t,e),o.set(e,t);++f<l;){var p=t[f],_=e[f];if(r)var g=a?r(_,p,f,e,t,o):r(p,_,f,t,e,o);if(void 0!==g){if(g)continue;h=!1;break}if(d){if(!$h(e,(function(t,e){if(!Qh(d,e)&&(p===t||i(p,t,n,r,o)))return d.push(e)}))){h=!1;break}}else if(p!==_&&!i(p,_,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}var ed,nd=qc.Uint8Array;function rd(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function id(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}var od=1,ad=2,ld="[object Boolean]",sd="[object Date]",ud="[object Error]",cd="[object Map]",fd="[object Number]",hd="[object RegExp]",dd="[object Set]",pd="[object String]",_d="[object Symbol]",gd="[object ArrayBuffer]",yd="[object DataView]",md=Bc?Bc.prototype:void 0,vd=md?md.valueOf:void 0;function bd(t,e,n,r,i,o,a){switch(n){case yd:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case gd:return!(t.byteLength!=e.byteLength||!o(new nd(t),new nd(e)));case ld:case sd:case fd:return rh(+t,+e);case ud:return t.name==e.name&&t.message==e.message;case hd:case pd:return t==e+"";case cd:var l=rd;case dd:var s=r&od;if(l||(l=id),t.size!=e.size&&!s)return!1;var u=a.get(t);if(u)return u==e;r|=ad,a.set(t,e);var c=td(l(t),l(e),r,i,o,a);return a.delete(t),c;case _d:if(vd)return vd.call(t)==vd.call(e)}return!1}function xd(t,e,n){var r=e(t);return uf(t)?r:Lc(r,n(t))}function wd(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function kd(){return[]}var Md,Ad=Object.prototype.propertyIsEnumerable,Sd=Object.getOwnPropertySymbols,Cd=Sd?function(t){return null==t?[]:(t=Object(t),wd(Sd(t),(function(e){return Ad.call(t,e)})))}:kd,Ed=Cd;function zd(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Td(){return!1}var Nd="object"==typeof t&&t&&!t.nodeType&&t,jd=Nd&&"object"==typeof module&&module&&!module.nodeType&&module,Ld,Pd=jd&&jd.exports===Nd?qc.Buffer:void 0,Od,Fd,Dd=(Pd?Pd.isBuffer:void 0)||Td,qd=9007199254740991,Rd=/^(?:0|[1-9]\d*)$/;function Bd(t,e){var n=typeof t;return!!(e=null==e?qd:e)&&("number"==n||"symbol"!=n&&Rd.test(t))&&t>-1&&t%1==0&&t<e}var Hd=9007199254740991;function Id(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Hd}var Ud="[object Arguments]",Yd="[object Array]",Wd="[object Boolean]",Vd="[object Date]",Zd="[object Error]",Xd="[object Function]",Gd="[object Map]",$d="[object Number]",Qd="[object Object]",Jd="[object RegExp]",Kd="[object Set]",tp="[object String]",ep="[object WeakMap]",np="[object ArrayBuffer]",rp="[object DataView]",ip,op="[object Float64Array]",ap="[object Int8Array]",lp="[object Int16Array]",sp="[object Int32Array]",up="[object Uint8Array]",cp="[object Uint8ClampedArray]",fp="[object Uint16Array]",hp="[object Uint32Array]",dp={};function pp(t){return Kc(t)&&Id(t.length)&&!!dp[Jc(t)]}function _p(t){return function(e){return t(e)}}dp["[object Float32Array]"]=dp[op]=dp[ap]=dp[lp]=dp[sp]=dp[up]=dp[cp]=dp[fp]=dp[hp]=!0,dp[Ud]=dp[Yd]=dp[np]=dp[Wd]=dp[rp]=dp[Vd]=dp[Zd]=dp[Xd]=dp[Gd]=dp[$d]=dp[Qd]=dp[Jd]=dp[Kd]=dp[tp]=dp[ep]=!1;var gp="object"==typeof t&&t&&!t.nodeType&&t,yp=gp&&"object"==typeof module&&module&&!module.nodeType&&module,mp,vp=yp&&yp.exports===gp&&Oc.process,bp=function(){try{var t=yp&&yp.require&&yp.require("util").types;return t||vp&&vp.binding&&vp.binding("util")}catch(t){}}(),xp=bp,wp=bp&&bp.isTypedArray,kp,Mp=wp?_p(wp):pp,Ap,Sp=Object.prototype.hasOwnProperty;function Cp(t,e){var n=uf(t),r=!n&&lf(t),i=!n&&!r&&Dd(t),o=!n&&!r&&!i&&Mp(t),a=n||r||i||o,l=a?zd(t.length,String):[],s=l.length;for(var u in t)!e&&!Sp.call(t,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Bd(u,s))||l.push(u);return l}var Ep=Object.prototype;function zp(t){var e=t&&t.constructor,n;return t===("function"==typeof e&&e.prototype||Ep)}function Tp(t,e){return function(n){return t(e(n))}}var Np,jp=Tp(Object.keys,Object),Lp,Pp=Object.prototype.hasOwnProperty;function Op(t){if(!zp(t))return jp(t);var e=[];for(var n in Object(t))Pp.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Fp(t){return null!=t&&Id(t.length)&&!Mf(t)}function Dp(t){return Fp(t)?Cp(t):Op(t)}function qp(t){return xd(t,Dp,Ed)}var Rp=1,Bp,Hp=Object.prototype.hasOwnProperty;function Ip(t,e,n,r,i,o){var a=n&Rp,l=qp(t),s=l.length,u,c;if(s!=qp(e).length&&!a)return!1;for(var f=s;f--;){var h=l[f];if(!(a?h in e:Hp.call(e,h)))return!1}var d=o.get(t),p=o.get(e);if(d&&p)return d==e&&p==t;var _=!0;o.set(t,e),o.set(e,t);for(var g=a;++f<s;){var y=t[h=l[f]],m=e[h];if(r)var v=a?r(m,y,h,e,t,o):r(y,m,h,t,e,o);if(!(void 0===v?y===m||i(y,m,n,r,o):v)){_=!1;break}g||(g="constructor"==h)}if(_&&!g){var b=t.constructor,x=e.constructor;b==x||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof x&&x instanceof x||(_=!1)}return o.delete(t),o.delete(e),_}var Up,Yp=Hf(qc,"DataView"),Wp,Vp=Hf(qc,"Promise"),Zp,Xp=Hf(qc,"Set"),Gp,$p=Hf(qc,"WeakMap"),Qp="[object Map]",Jp="[object Object]",Kp="[object Promise]",t_="[object Set]",e_="[object WeakMap]",n_="[object DataView]",r_=Nf(Yp),i_=Nf(dh),o_=Nf(Vp),a_=Nf(Xp),l_=Nf($p),s_=Jc;(Yp&&s_(new Yp(new ArrayBuffer(1)))!=n_||dh&&s_(new dh)!=Qp||Vp&&s_(Vp.resolve())!=Kp||Xp&&s_(new Xp)!=t_||$p&&s_(new $p)!=e_)&&(s_=function(t){var e=Jc(t),n=e==Jp?t.constructor:void 0,r=n?Nf(n):"";if(r)switch(r){case r_:return n_;case i_:return Qp;case o_:return Kp;case a_:return t_;case l_:return e_}return e});var u_=s_,c_=1,f_="[object Arguments]",h_="[object Array]",d_="[object Object]",p_,__=Object.prototype.hasOwnProperty;function g_(t,e,n,r,i,o){var a=uf(t),l=uf(e),s=a?h_:u_(t),u=l?h_:u_(e),c=(s=s==f_?d_:s)==d_,f=(u=u==f_?d_:u)==d_,h=s==u;if(h&&Dd(t)){if(!Dd(e))return!1;a=!0,c=!1}if(h&&!c)return o||(o=new Wh),a||Mp(t)?td(t,e,n,r,i,o):bd(t,e,s,n,r,i,o);if(!(n&c_)){var d=c&&__.call(t,"__wrapped__"),p=f&&__.call(e,"__wrapped__");if(d||p){var _=d?t.value():t,g=p?e.value():e;return o||(o=new Wh),i(_,g,n,r,o)}}return!!h&&(o||(o=new Wh),Ip(t,e,n,r,i,o))}function y_(t,e,n,r,i){return t===e||(null==t||null==e||!Kc(t)&&!Kc(e)?t!=t&&e!=e:g_(t,e,n,r,y_,i))}var m_=1,v_=2;function b_(t,e,n,r){var i=n.length,o=i,a=!r;if(null==t)return!o;for(t=Object(t);i--;){var l=n[i];if(a&&l[2]?l[1]!==t[l[0]]:!(l[0]in t))return!1}for(;++i<o;){var s=(l=n[i])[0],u=t[s],c=l[1];if(a&&l[2]){if(void 0===u&&!(s in t))return!1}else{var f=new Wh;if(r)var h=r(u,c,s,t,e,f);if(!(void 0===h?y_(c,u,m_|v_,r,f):h))return!1}}return!0}function x_(t){return t==t&&!vf(t)}function w_(t){for(var e=Dp(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,x_(i)]}return e}function k_(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}function M_(t){var e=w_(t);return 1==e.length&&e[0][2]?k_(e[0][0],e[0][1]):function(n){return n===t||b_(n,t,e)}}function A_(t,e,n){var r=null==t?void 0:qh(t,e);return void 0===r?n:r}function S_(t,e){return null!=t&&e in Object(t)}function C_(t,e,n){for(var r=-1,i=(e=Oh(e,t)).length,o=!1;++r<i;){var a=Dh(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Id(i)&&Bd(a,i)&&(uf(t)||lf(t))}function E_(t,e){return null!=t&&C_(t,e,S_)}var z_=1,T_=2;function N_(t,e){return mf(t)&&x_(e)?k_(Dh(t),e):function(n){var r=A_(n,t);return void 0===r&&r===e?E_(n,t):y_(e,r,z_|T_)}}function j_(t){return t}function L_(t){return function(e){return null==e?void 0:e[t]}}function P_(t){return function(e){return qh(e,t)}}function O_(t){return mf(t)?L_(Dh(t)):P_(t)}function F_(t){return"function"==typeof t?t:null==t?j_:"object"==typeof t?uf(t)?N_(t[0],t[1]):M_(t):O_(t)}function D_(t){return function(e,n,r){for(var i=-1,o=Object(e),a=r(e),l=a.length;l--;){var s=a[t?l:++i];if(!1===n(o[s],s,o))break}return e}}var q_,R_=D_();function B_(t,e){return t&&R_(t,e,Dp)}function H_(t,e){return function(n,r){if(null==n)return n;if(!Fp(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=Object(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}var I_,U_=H_(B_);function Y_(t,e){var n=-1,r=Fp(t)?Array(t.length):[];return U_(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function W_(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function V_(t,e){if(t!==e){var n=void 0!==t,r=null===t,i=t==t,o=_f(t),a=void 0!==e,l=null===e,s=e==e,u=_f(e);if(!l&&!u&&!o&&t>e||o&&a&&s&&!l&&!u||r&&a&&s||!n&&s||!i)return 1;if(!r&&!o&&!u&&t<e||u&&n&&i&&!r&&!o||l&&n&&i||!a&&i||!s)return-1}return 0}function Z_(t,e,n){for(var r=-1,i=t.criteria,o=e.criteria,a=i.length,l=n.length;++r<a;){var s=V_(i[r],o[r]),u;if(s)return r>=l?s:s*("desc"==n[r]?-1:1)}return t.index-e.index}function X_(t,e,n){e=e.length?df(e,(function(t){return uf(t)?function(e){return qh(e,1===t.length?t[0]:t)}:t})):[j_];var r=-1;e=df(e,_p(F_));var i=Y_(t,(function(t,n,i){var o;return{criteria:df(e,(function(e){return e(t)})),index:++r,value:t}}));return W_(i,(function(t,e){return Z_(t,e,n)}))}function G_(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}var $_=Math.max;function Q_(t,e,n){return e=$_(void 0===e?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=$_(r.length-e,0),a=Array(o);++i<o;)a[i]=r[e+i];i=-1;for(var l=Array(e+1);++i<e;)l[i]=r[i];return l[e]=n(a),G_(t,this,l)}}function J_(t){return function(){return t}}var K_,tg=function(){try{var t=Hf(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),eg,ng=tg?function(t,e){return tg(t,"toString",{configurable:!0,enumerable:!1,value:J_(e),writable:!0})}:j_,rg=800,ig=16,og=Date.now;function ag(t){var e=0,n=0;return function(){var r=og(),i=ig-(r-n);if(n=r,i>0){if(++e>=rg)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}var lg,sg=ag(ng);function ug(t,e){return sg(Q_(t,e,j_),t+"")}function cg(t,e,n){if(!vf(n))return!1;var r=typeof e;return!!("number"==r?Fp(n)&&Bd(e,n.length):"string"==r&&e in n)&&rh(n[e],t)}var fg,hg=ug((function(t,e){if(null==t)return[];var n=e.length;return n>1&&cg(t,e[0],e[1])?e=[]:n>2&&cg(e[0],e[1],e[2])&&(e=[e[0]]),X_(t,hf(e,1),[])}));function dg(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}var pg=/\s/;function _g(t){for(var e=t.length;e--&&pg.test(t.charAt(e)););return e}var gg=/^\s+/;function yg(t){return t?t.slice(0,_g(t)+1).replace(gg,""):t}var mg=NaN,vg=/^[-+]0x[0-9a-f]+$/i,bg=/^0b[01]+$/i,xg=/^0o[0-7]+$/i,wg=parseInt;function kg(t){if("number"==typeof t)return t;if(_f(t))return mg;if(vf(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=vf(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=yg(t);var n=bg.test(t);return n||xg.test(t)?wg(t.slice(2),n?2:8):vg.test(t)?mg:+t}var Mg=1/0,Ag=17976931348623157e292;function Sg(t){return t?(t=kg(t))===Mg||t===-Mg?(t<0?-1:1)*Ag:t==t?t:0:0===t?t:0;var e}function Cg(t){var e=Sg(t),n=e%1;return e==e?n?e-n:e:0}var Eg=Math.max;function zg(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:Cg(n);return i<0&&(i=Eg(r+i,0)),dg(t,F_(e),i)}var Tg="http://www.w3.org/1999/xhtml",Ng={svg:"http://www.w3.org/2000/svg",xhtml:Tg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function jg(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),Ng.hasOwnProperty(e)?{space:Ng[e],local:t}:t}function Lg(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Tg&&e.documentElement.namespaceURI===Tg?e.createElement(t):e.createElementNS(n,t)}}function Pg(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function Og(t){var e=jg(t);return(e.local?Pg:Lg)(e)}function Fg(){}function Dg(t){return null==t?Fg:function(){return this.querySelector(t)}}function qg(t){"function"!=typeof t&&(t=Dg(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,l=r[i]=new Array(a),s,u,c=0;c<a;++c)(s=o[c])&&(u=t.call(s,s.__data__,c,o))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new mm(r,this._parents)}function Rg(){return[]}function Bg(t){return null==t?Rg:function(){return this.querySelectorAll(t)}}function Hg(t){"function"!=typeof t&&(t=Bg(t));for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(r.push(t.call(s,s.__data__,u,a)),i.push(s));return new mm(r,i)}function Ig(t){return function(){return this.matches(t)}}function Ug(t){"function"!=typeof t&&(t=Ig(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new mm(r,this._parents)}function Yg(t){return new Array(t.length)}function Wg(){return new mm(this._enter||this._groups.map(Yg),this._parents)}function Vg(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function Zg(t){return function(){return t}}Vg.prototype={constructor:Vg,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var Xg="$";function Gg(t,e,n,r,i,o){for(var a=0,l,s=e.length,u=o.length;a<u;++a)(l=e[a])?(l.__data__=o[a],r[a]=l):n[a]=new Vg(t,o[a]);for(;a<s;++a)(l=e[a])&&(i[a]=l)}function $g(t,e,n,r,i,o,a){var l,s,u={},c=e.length,f=o.length,h=new Array(c),d;for(l=0;l<c;++l)(s=e[l])&&(h[l]=d=Xg+a.call(s,s.__data__,l,e),d in u?i[l]=s:u[d]=s);for(l=0;l<f;++l)(s=u[d=Xg+a.call(t,o[l],l,o)])?(r[l]=s,s.__data__=o[l],u[d]=null):n[l]=new Vg(t,o[l]);for(l=0;l<c;++l)(s=e[l])&&u[h[l]]===s&&(i[l]=s)}function Qg(t,e){if(!t)return d=new Array(this.size()),u=-1,this.each((function(t){d[++u]=t})),d;var n=e?$g:Gg,r=this._parents,i=this._groups;"function"!=typeof t&&(t=Zg(t));for(var o=i.length,a=new Array(o),l=new Array(o),s=new Array(o),u=0;u<o;++u){var c=r[u],f=i[u],h=f.length,d=t.call(c,c&&c.__data__,u,r),p=d.length,_=l[u]=new Array(p),g=a[u]=new Array(p),y;n(c,f,_,g,s[u]=new Array(h),d,e);for(var m=0,v=0,b,x;m<p;++m)if(b=_[m]){for(m>=v&&(v=m+1);!(x=g[v])&&++v<p;);b._next=x||null}}return(a=new mm(a,r))._enter=l,a._exit=s,a}function Jg(){return new mm(this._exit||this._groups.map(Yg),this._parents)}function Kg(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i}function ty(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var s=e[l],u=n[l],c=s.length,f=a[l]=new Array(c),h,d=0;d<c;++d)(h=s[d]||u[d])&&(f[d]=h);for(;l<r;++l)a[l]=e[l];return new mm(a,this._parents)}function ey(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&4^a.compareDocumentPosition(o)&&o.parentNode.insertBefore(a,o),o=a);return this}function ny(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=ry);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],l=a.length,s=i[o]=new Array(l),u,c=0;c<l;++c)(u=a[c])&&(s[c]=u);s.sort(e)}return new mm(i,this._parents).order()}function ry(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function iy(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function oy(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t}function ay(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function ly(){var t=0;return this.each((function(){++t})),t}function sy(){return!this.node()}function uy(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,l;o<a;++o)(l=i[o])&&t.call(l,l.__data__,o,i);return this}function cy(t){return function(){this.removeAttribute(t)}}function fy(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hy(t,e){return function(){this.setAttribute(t,e)}}function dy(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function py(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function _y(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function gy(t,e){var n=jg(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?fy:cy:"function"==typeof e?n.local?_y:py:n.local?dy:hy)(n,e))}function yy(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function my(t){return function(){this.style.removeProperty(t)}}function vy(t,e,n){return function(){this.style.setProperty(t,e,n)}}function by(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function xy(t,e,n){return arguments.length>1?this.each((null==e?my:"function"==typeof e?by:vy)(t,e,null==n?"":n)):wy(this.node(),t)}function wy(t,e){return t.style.getPropertyValue(e)||yy(t).getComputedStyle(t,null).getPropertyValue(e)}function ky(t){return function(){delete this[t]}}function My(t,e){return function(){this[t]=e}}function Ay(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Sy(t,e){return arguments.length>1?this.each((null==e?ky:"function"==typeof e?Ay:My)(t,e)):this.node()[t]}function Cy(t){return t.trim().split(/^|\s+/)}function Ey(t){return t.classList||new zy(t)}function zy(t){this._node=t,this._names=Cy(t.getAttribute("class")||"")}function Ty(t,e){for(var n=Ey(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Ny(t,e){for(var n=Ey(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function jy(t){return function(){Ty(this,t)}}function Ly(t){return function(){Ny(this,t)}}function Py(t,e){return function(){(e.apply(this,arguments)?Ty:Ny)(this,t)}}function Oy(t,e){var n=Cy(t+"");if(arguments.length<2){for(var r=Ey(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Py:e?jy:Ly)(n,e))}function Fy(){this.textContent=""}function Dy(t){return function(){this.textContent=t}}function qy(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function Ry(t){return arguments.length?this.each(null==t?Fy:("function"==typeof t?qy:Dy)(t)):this.node().textContent}function By(){this.innerHTML=""}function Hy(t){return function(){this.innerHTML=t}}function Iy(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Uy(t){return arguments.length?this.each(null==t?By:("function"==typeof t?Iy:Hy)(t)):this.node().innerHTML}function Yy(){this.nextSibling&&this.parentNode.appendChild(this)}function Wy(){return this.each(Yy)}function Vy(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Zy(){return this.each(Vy)}function Xy(t){var e="function"==typeof t?t:Og(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function Gy(){return null}function $y(t,e){var n="function"==typeof t?t:Og(t),r=null==e?Gy:"function"==typeof e?e:Dg(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))}function Qy(){var t=this.parentNode;t&&t.removeChild(this)}function Jy(){return this.each(Qy)}function Ky(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tm(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function em(t){return this.select(t?tm:Ky)}function nm(t){return arguments.length?this.property("__data__",t):this.node().__data__}zy.prototype={add:function(t){var e;this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var rm={},im=null,om;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(rm={mouseenter:"mouseover",mouseleave:"mouseout"}));function am(t,e,n){return t=lm(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function lm(t,e,n){return function(r){var i=im;im=r;try{t.call(this,this.__data__,e,n)}finally{im=i}}}function sm(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function um(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],t.type&&o.type!==t.type||o.name!==t.name?e[++r]=o:this.removeEventListener(o.type,o.listener,o.capture);++r?e.length=r:delete this.__on}}}function cm(t,e,n){var r=rm.hasOwnProperty(t.type)?am:lm;return function(i,o,a){var l=this.__on,s,u=r(e,o,a);if(l)for(var c=0,f=l.length;c<f;++c)if((s=l[c]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=n),void(s.value=e);this.addEventListener(t.type,u,n),s={type:t.type,name:t.name,value:e,listener:u,capture:n},l?l.push(s):this.__on=[s]}}function fm(t,e,n){var r=sm(t+""),i,o=r.length,a;if(!(arguments.length<2)){for(l=e?cm:um,null==n&&(n=!1),i=0;i<o;++i)this.each(l(r[i],e,n));return this}var l=this.node().__on;if(l)for(var s=0,u=l.length,c;s<u;++s)for(i=0,c=l[s];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}function hm(t,e,n,r){var i=im;t.sourceEvent=im,im=t;try{return e.apply(n,r)}finally{im=i}}function dm(t,e,n){var r=yy(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function pm(t,e){return function(){return dm(this,t,e)}}function _m(t,e){return function(){return dm(this,t,e.apply(this,arguments))}}function gm(t,e){return this.each(("function"==typeof e?_m:pm)(t,e))}var ym=[null];function mm(t,e){this._groups=t,this._parents=e}function vm(){return new mm([[document.documentElement]],ym)}function bm(t){return"string"==typeof t?new mm([[document.querySelector(t)]],[document.documentElement]):new mm([[t]],ym)}function xm(t){return bm(Og(t).call(document.documentElement))}function wm(){for(var t=im,e;e=t.sourceEvent;)t=e;return t}function km(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}function Mm(t){var e=wm();return e.changedTouches&&(e=e.changedTouches[0]),km(t,e)}function Am(t){return"string"==typeof t?new mm([document.querySelectorAll(t)],[document.documentElement]):new mm([null==t?[]:t],ym)}function Sm(t,e,n){arguments.length<3&&(n=e,e=wm().changedTouches);for(var r=0,i=e?e.length:0,o;r<i;++r)if((o=e[r]).identifier===n)return km(t,o);return null}function Cm(){return parseFloat}function Em(){return function(t){return t.toString()}}mm.prototype=vm.prototype={constructor:mm,select:qg,selectAll:Hg,filter:Ug,data:Qg,enter:Wg,exit:Jg,join:Kg,merge:ty,order:ey,sort:ny,call:iy,nodes:oy,node:ay,size:ly,empty:sy,each:uy,attr:gy,style:xy,property:Sy,classed:Oy,text:Ry,html:Uy,raise:Wy,lower:Zy,append:Xy,insert:$y,remove:Jy,clone:em,datum:nm,on:fm,dispatch:gm};var zm=new Date,Tm=new Date;function Nm(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=function(e){return t(e=new Date(+e)),e},i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,o){var a=[],l;if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;do{a.push(l=new Date(+n)),e(n,o),t(n)}while(l<n&&n<r);return a},i.filter=function(n){return Nm((function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)}),(function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}))},n&&(i.count=function(e,r){return zm.setTime(+e),Tm.setTime(+r),t(zm),t(Tm),Math.floor(n(zm,Tm))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}var jm=Nm((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t}));jm.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Nm((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,n){e.setTime(+e+n*t)}),(function(e,n){return(n-e)/t})):jm:null};var Lm=jm;jm.range;var Pm=1e3,Om=6e4,Fm=36e5,Dm=864e5,qm=6048e5,Rm=Nm((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+e*Pm)}),(function(t,e){return(e-t)/Pm}),(function(t){return t.getUTCSeconds()})),Bm=Rm;Rm.range;var Hm=Nm((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pm)}),(function(t,e){t.setTime(+t+e*Om)}),(function(t,e){return(e-t)/Om}),(function(t){return t.getMinutes()})),Im=Hm;Hm.range;var Um=Nm((function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*Pm-t.getMinutes()*Om)}),(function(t,e){t.setTime(+t+e*Fm)}),(function(t,e){return(e-t)/Fm}),(function(t){return t.getHours()})),Ym=Um;Um.range;var Wm=Nm((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Om)/Dm}),(function(t){return t.getDate()-1})),Vm=Wm;function Zm(t){return Nm((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Om)/qm}))}Wm.range;var Xm=Zm(0),Gm=Zm(1),$m=Zm(2),Qm=Zm(3),Jm=Zm(4),Km=Zm(5),tv=Zm(6);Xm.range,Gm.range,$m.range,Qm.range,Jm.range,Km.range,tv.range;var ev=Nm((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()})),nv=ev;ev.range;var rv=Nm((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));rv.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Nm((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,n){e.setFullYear(e.getFullYear()+n*t)})):null};var iv=rv;rv.range;var ov=Nm((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/Dm}),(function(t){return t.getUTCDate()-1})),av=ov;function lv(t){return Nm((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/qm}))}ov.range;var sv=lv(0),uv=lv(1),cv=lv(2),fv=lv(3),hv=lv(4),dv=lv(5),pv=lv(6);sv.range,uv.range,cv.range,fv.range,hv.range,dv.range,pv.range;var _v=Nm((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));_v.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Nm((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})):null};var gv=_v;function yv(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function mv(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function vv(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function bv(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,l=t.months,s=t.shortMonths,u=Tv(i),c=Nv(i),f=Tv(o),h=Nv(o),d=Tv(a),p=Nv(a),_=Tv(l),g=Nv(l),y=Tv(s),m=Nv(s),v={a:L,A:P,b:O,B:F,c:null,d:Jv,e:Jv,f:rb,g:pb,G:gb,H:Kv,I:tb,j:eb,L:nb,m:ib,M:ob,p:D,q:q,Q:Rb,s:Bb,S:ab,u:lb,U:sb,V:cb,w:fb,W:hb,x:null,X:null,y:db,Y:_b,Z:yb,"%":qb},b={a:R,A:B,b:H,B:I,c:null,d:mb,e:mb,f:kb,g:Pb,G:Fb,H:vb,I:bb,j:xb,L:wb,m:Mb,M:Ab,p:U,q:Y,Q:Rb,s:Bb,S:Sb,u:Cb,U:Eb,V:Tb,w:Nb,W:jb,x:null,X:null,y:Lb,Y:Ob,Z:Db,"%":qb},x={a:S,A:C,b:E,B:z,c:T,d:Iv,e:Iv,f:Xv,g:qv,G:Dv,H:Yv,I:Yv,j:Uv,L:Zv,m:Hv,M:Wv,p:A,q:Bv,Q:$v,s:Qv,S:Vv,u:Lv,U:Pv,V:Ov,w:jv,W:Fv,x:N,X:j,y:qv,Y:Dv,Z:Rv,"%":Gv};function w(t,e){return function(n){var r=[],i=-1,o=0,a=t.length,l,s,u;for(n instanceof Date||(n=new Date(+n));++i<a;)37===t.charCodeAt(i)&&(r.push(t.slice(o,i)),null!=(s=xv[l=t.charAt(++i)])?l=t.charAt(++i):s="e"===l?" ":"0",(u=e[l])&&(l=u(n,s)),r.push(l),o=i+1);return r.push(t.slice(o,i)),r.join("")}}function k(t,e){return function(n){var r=vv(1900,void 0,1),i,o,a;if(M(r,t,n+="",0)!=n.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(e&&!("Z"in r)&&(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||r.V>53)return null;"w"in r||(r.w=1),"Z"in r?(a=(o=mv(vv(r.y,0,1))).getUTCDay(),o=a>4||0===a?uv.ceil(o):uv(o),o=av.offset(o,7*(r.V-1)),r.y=o.getUTCFullYear(),r.m=o.getUTCMonth(),r.d=o.getUTCDate()+(r.w+6)%7):(a=(o=yv(vv(r.y,0,1))).getDay(),o=a>4||0===a?Gm.ceil(o):Gm(o),o=Vm.offset(o,7*(r.V-1)),r.y=o.getFullYear(),r.m=o.getMonth(),r.d=o.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),a="Z"in r?mv(vv(r.y,0,1)).getUTCDay():yv(vv(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(a+5)%7:r.w+7*r.U-(a+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,mv(r)):yv(r)}}function M(t,e,n,r){for(var i=0,o=e.length,a=n.length,l,s;i<o;){if(r>=a)return-1;if(37===(l=e.charCodeAt(i++))){if(l=e.charAt(i++),!(s=x[l in xv?e.charAt(i++):l])||(r=s(t,n,r))<0)return-1}else if(l!=n.charCodeAt(r++))return-1}return r}function A(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=c[r[0].toLowerCase()],n+r[0].length):-1}function S(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p[r[0].toLowerCase()],n+r[0].length):-1}function C(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h[r[0].toLowerCase()],n+r[0].length):-1}function E(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=m[r[0].toLowerCase()],n+r[0].length):-1}function z(t,e,n){var r=_.exec(e.slice(n));return r?(t.m=g[r[0].toLowerCase()],n+r[0].length):-1}function T(t,n,r){return M(t,e,n,r)}function N(t,e,r){return M(t,n,e,r)}function j(t,e,n){return M(t,r,e,n)}function L(t){return a[t.getDay()]}function P(t){return o[t.getDay()]}function O(t){return s[t.getMonth()]}function F(t){return l[t.getMonth()]}function D(t){return i[+(t.getHours()>=12)]}function q(t){return 1+~~(t.getMonth()/3)}function R(t){return a[t.getUTCDay()]}function B(t){return o[t.getUTCDay()]}function H(t){return s[t.getUTCMonth()]}function I(t){return l[t.getUTCMonth()]}function U(t){return i[+(t.getUTCHours()>=12)]}function Y(t){return 1+~~(t.getUTCMonth()/3)}return v.x=w(n,v),v.X=w(r,v),v.c=w(e,v),b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),{format:function(t){var e=w(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}_v.range;var xv={"-":"",_:" ",0:"0"},wv=/^\s*\d+/,kv=/^%/,Mv=/[\\^$*+?|[\]().{}]/g,Av,Sv,Cv;function Ev(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function zv(t){return t.replace(Mv,"\\$&")}function Tv(t){return new RegExp("^(?:"+t.map(zv).join("|")+")","i")}function Nv(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function jv(t,e,n){var r=wv.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Lv(t,e,n){var r=wv.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Pv(t,e,n){var r=wv.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Ov(t,e,n){var r=wv.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function Fv(t,e,n){var r=wv.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Dv(t,e,n){var r=wv.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function qv(t,e,n){var r=wv.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Rv(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Bv(t,e,n){var r=wv.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function Hv(t,e,n){var r=wv.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Iv(t,e,n){var r=wv.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Uv(t,e,n){var r=wv.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Yv(t,e,n){var r=wv.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Wv(t,e,n){var r=wv.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Vv(t,e,n){var r=wv.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Zv(t,e,n){var r=wv.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Xv(t,e,n){var r=wv.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Gv(t,e,n){var r=kv.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function $v(t,e,n){var r=wv.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Qv(t,e,n){var r=wv.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Jv(t,e){return Ev(t.getDate(),e,2)}function Kv(t,e){return Ev(t.getHours(),e,2)}function tb(t,e){return Ev(t.getHours()%12||12,e,2)}function eb(t,e){return Ev(1+Vm.count(iv(t),t),e,3)}function nb(t,e){return Ev(t.getMilliseconds(),e,3)}function rb(t,e){return nb(t,e)+"000"}function ib(t,e){return Ev(t.getMonth()+1,e,2)}function ob(t,e){return Ev(t.getMinutes(),e,2)}function ab(t,e){return Ev(t.getSeconds(),e,2)}function lb(t){var e=t.getDay();return 0===e?7:e}function sb(t,e){return Ev(Xm.count(iv(t)-1,t),e,2)}function ub(t){var e=t.getDay();return e>=4||0===e?Jm(t):Jm.ceil(t)}function cb(t,e){return t=ub(t),Ev(Jm.count(iv(t),t)+(4===iv(t).getDay()),e,2)}function fb(t){return t.getDay()}function hb(t,e){return Ev(Gm.count(iv(t)-1,t),e,2)}function db(t,e){return Ev(t.getFullYear()%100,e,2)}function pb(t,e){return Ev((t=ub(t)).getFullYear()%100,e,2)}function _b(t,e){return Ev(t.getFullYear()%1e4,e,4)}function gb(t,e){var n=t.getDay();return Ev((t=n>=4||0===n?Jm(t):Jm.ceil(t)).getFullYear()%1e4,e,4)}function yb(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ev(e/60|0,"0",2)+Ev(e%60,"0",2)}function mb(t,e){return Ev(t.getUTCDate(),e,2)}function vb(t,e){return Ev(t.getUTCHours(),e,2)}function bb(t,e){return Ev(t.getUTCHours()%12||12,e,2)}function xb(t,e){return Ev(1+av.count(gv(t),t),e,3)}function wb(t,e){return Ev(t.getUTCMilliseconds(),e,3)}function kb(t,e){return wb(t,e)+"000"}function Mb(t,e){return Ev(t.getUTCMonth()+1,e,2)}function Ab(t,e){return Ev(t.getUTCMinutes(),e,2)}function Sb(t,e){return Ev(t.getUTCSeconds(),e,2)}function Cb(t){var e=t.getUTCDay();return 0===e?7:e}function Eb(t,e){return Ev(sv.count(gv(t)-1,t),e,2)}function zb(t){var e=t.getUTCDay();return e>=4||0===e?hv(t):hv.ceil(t)}function Tb(t,e){return t=zb(t),Ev(hv.count(gv(t),t)+(4===gv(t).getUTCDay()),e,2)}function Nb(t){return t.getUTCDay()}function jb(t,e){return Ev(uv.count(gv(t)-1,t),e,2)}function Lb(t,e){return Ev(t.getUTCFullYear()%100,e,2)}function Pb(t,e){return Ev((t=zb(t)).getUTCFullYear()%100,e,2)}function Ob(t,e){return Ev(t.getUTCFullYear()%1e4,e,4)}function Fb(t,e){var n=t.getUTCDay();return Ev((t=n>=4||0===n?hv(t):hv.ceil(t)).getUTCFullYear()%1e4,e,4)}function Db(){return"+0000"}function qb(){return"%"}function Rb(t){return+t}function Bb(t){return Math.floor(+t/1e3)}function Hb(t){return Av=bv(t),Sv=Av.format,Cv=Av.parse,Av.utcFormat,Av.utcParse,Av}function Ib(t){return t.toLowerCase()}function Ub(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Yb(t,e,n,r){var i="numeric"===e.sort,o="temporal"===e.sort,a=Ib;i?a=n:o&&(a=Cv(e.sort_temporal_format));var l=t.map((function(t,e){var n=a(t);return{value:t,options_index:e,parsed:n,display:i&&!isNaN(n)?r(n):t}}));return"unsorted"==e.sort?l:l.sort((function(t,e){return Ub(t.parsed,e.parsed)}))}function Wb(){return this.declarations=[],this}function Vb(t){return this.selector=t,this.styles=[],this}function Zb(){var t=new Wb;return t.select(".fl-controls-container").style("display","inline-block").style("line-height","1em"),t.select(".fl-controls-title").style("display","inline-block").style("margin","0px 0.5em 0px 0px"),t.select(".fl-controls-container, .fl-controls-container *").style("box-sizing","border-box"),t.select(".slider-holder").style("margin-bottom","20px"),t.select(".fl-controls-slider, .slider-play").style("pointer-events","all").style("display","inline-block").style("vertical-align","middle"),t.select(".slider-play svg").style("height","100%").style("width","100%").style("cursor"," pointer",""),t.select(".slider-play:hover").style("opacity","0.6"),t.select(".fl-control-slider").style("width","100%").style("bottom","0"),t.select(".fl-control").style("position","relative"),t.select(".fl-control.hidden").style("display","none"),t.select(".fl-control .button").style("display","inline-block").style("background","#eee").style("padding","0.5em").style("margin-right","0.25em").style("margin-bottom","0.25em").style("line-height","1em"),t.select(".fl-control.grouped:not(.hidden)").style("display","inline-table").style("table-layout","fixed").select(".button").style("display","table-cell").style("margin","0").style("text-align","center"),t.select(".fl-control .button.selected").style("background","#ddd"),t.select(".fl-control-dropdown").style("line-height","1em").select(".list").style("display","none").style("position","absolute").style("background-color","white").style("z-index","100").style("border","1px solid #eee").select(".list-item").style("text-align","start").style("cursor","pointer").style("padding","0.5rem"),t.select(".fl-control-dropdown.open .list").style("display","block"),t.select(".fl-control-dropdown .main").style("position","relative").style("text-align","start").style("display","flex").style("justify-content","space-between"),t.select(".fl-control-dropdown .symbol").style("float","right").select("div").style("border-top-color","#333333"),t.print()}Hb({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Wb.prototype.select=function(t){if(!t)return this;var e=new Vb(t);return e.parent=this,this.addDeclaration(e),e},Wb.prototype.addDeclaration=function(t){return this.declarations.push(t),this},Wb.prototype.print=function(){var t="";return this.declarations.forEach((function(e){t+=e.selector+" {\n",e.styles.forEach((function(e){t+="\t"+e[0]+": "+e[1]+";\n"})),t+="}\n\n"})),t},Wb.prototype.clear=function(){return this.declarations=[],this},Vb.prototype.style=function(t,e){var n="function"==typeof value_?e():e;return""!==n&&null!=n&&this.styles.push([t,n]),this},Vb.prototype.select=function(t){return this.parent.select(this.selector+" "+t)};var Xb=!1;function Gb(){if(!Xb&&"undefined"!=typeof document){var t=Zb(),e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",n.className="flourish-controls",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),Xb=!0}}var $b=function(){var t=document.createElement("canvas").getContext("2d");return function(e,n){var r;return t.font=n||"10px sans-serif",t.measureText(e).width}}(),Qb;function Jb(){var t=parseFloat(getComputedStyle(document.documentElement).fontSize)||16;Qb=function(e){return e*t}}var Kb=90;function tx(t,e,n){var r={},i=document.body,o=bm(n).append("div").attr("class","fl-control fl-control-dropdown"),a=o.node(),l=o.append("div").attr("class","main"),s=l.append("span").attr("class","current");l.append("span").attr("class","symbol").style("width","10px").append("div").style("border-left","5px solid transparent").style("border-right","5px solid transparent").style("border-bottom","5px solid transparent").style("border-top-style","solid").style("border-top-width","5px").style("top","50%").style("position","absolute").style("margin-top","-2.5px");var u=o.append("div").attr("class","list"),c=function(){o.classed("open",!0),u.style("top","100%"),u.style("bottom",null),u.style("display",null),u.style("overflow","auto");var t=i.getBoundingClientRect(),e=u.node().getBoundingClientRect(),n;if(e.bottom-t.bottom>0){var r=t.bottom-e.top-30;r>Kb?u.style("max-height",r+"px"):u.style("top","auto").style("bottom","100%")}e.right>window.innerWidth&&u.style("right",0)},f=function(){o.classed("open",!1),u.style("right",null),u.style("max-height",null),u.style("display","none")},h=function(){o.classed("open")?f():c()};l.on("click",(function(){h()}));var d=function(){if(o.classed("open")){for(var t=event.target,e=t.parentElement;e;){if(t===a)return;e=(t=e).parentElement}f()}},p=function(t){var r="100%";"auto"==e.dropdown_width_mode?r=Math.min(t+40,Qb(20))+"px":"fixed"==e.dropdown_width_mode&&(r=Qb(e.dropdown_width_fixed)+"px"),n.style.width="full"==e.dropdown_width_mode?r:"",o.style("width",r).style("display","full"!==e.dropdown_width_mode?"inline-table":null),o.select(".main").style("width",r)},_=function(){f(),o.style("display","none")};return r.appendedToDOM=function(t){return t&&(i=t),document.querySelector("body").addEventListener("click",d,!1),r},r.removedFromDOM=function(){return document.querySelector("body").removeEventListener("click",d),r},r.show=p,r.hide=_,r.update=function(n){u.text("");var i=window.getComputedStyle(o.node()).fontSize;if(!t.n_options||"dropdown"!==e.control_type)return _(),r;var a="";u.text("").selectAll(".list-item").data(n).enter().append("div").attr("class","list-item").text((function(t){return t.display.length>a.length&&(a=t.display),t.display})).on("click",(function(e){f();var n=e.options_index;n!==t.index()&&(t.index(n),s.text(e.display).attr("title",e.display),t.trigger("change"))}));var l=$b(a,i+" sans-serif"),c,h=n[t.getSortedIndex()].display;return s.text(h).attr("title",h),p(l),r},r}function ex(t,e,n){var r={},i=bm(n).append("div").attr("class","fl-control fl-control-buttons"),o=function(){i.classed("hidden",!1)},a=function(){i.classed("hidden",!0)};return r.show=o,r.hide=a,r.update=function(n){if(!t.n_options||"buttons"!==e.control_type)return a(),r;var l=t.index();i.classed("grouped",e.button_group),i.classed("fixed-width","fixed"==e.button_group_width_mode||"full"==e.button_group_width_mode),i.style("width",e.button_group&&"fixed"==e.button_group_width_mode?Qb(e.button_group_width_fixed)+"px":"full"==e.button_group_width_mode?"100%":null);var s=function(e){var n=e.options_index;n!==t.index()&&(t.index(n),t.trigger("change"))},u=i.selectAll(".button").data(n,(function(t){return t.display})),c=u.enter().append("div").attr("class","button").style("cursor","pointer").attr("role","button").attr("tabindex",0).on("click",(function(t){s(t)})).on("keyup",(function(t){"Space"!==im.code&&"Enter"!==im.code||(im.preventDefault(),s(t))}));c.append("span").text((function(t){return t.display})),o(),u.merge(c).classed("selected",(function(t){return t.options_index===l})).attr("aria-pressed",(function(t){return t.options_index===l})),u.exit().remove(),o()},r}var nx=Array.prototype.slice;function rx(t){return t}var ix=1,ox=2,ax=3,lx=4,sx=1e-6;function ux(t){return"translate("+(t+.5)+",0)"}function cx(t){return"translate(0,"+(t+.5)+")"}function fx(t){return function(e){return+t(e)}}function hx(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function dx(){return!this.__axis}function px(t,e){var n=[],r=null,i=null,o=6,a=6,l=3,s=t===ix||t===lx?-1:1,u=t===lx||t===ox?"x":"y",c=t===ix||t===ax?ux:cx;function f(f){var h=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,d=null==i?e.tickFormat?e.tickFormat.apply(e,n):rx:i,p=Math.max(o,0)+l,_=e.range(),g=+_[0]+.5,y=+_[_.length-1]+.5,m=(e.bandwidth?hx:fx)(e.copy()),v=f.selection?f.selection():f,b=v.selectAll(".domain").data([null]),x=v.selectAll(".tick").data(h,e).order(),w=x.exit(),k=x.enter().append("g").attr("class","tick"),M=x.select("line"),A=x.select("text");b=b.merge(b.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(k),M=M.merge(k.append("line").attr("stroke","currentColor").attr(u+"2",s*o)),A=A.merge(k.append("text").attr("fill","currentColor").attr(u,s*p).attr("dy",t===ix?"0em":t===ax?"0.71em":"0.32em")),f!==v&&(b=b.transition(f),x=x.transition(f),M=M.transition(f),A=A.transition(f),w=w.transition(f).attr("opacity",sx).attr("transform",(function(t){return isFinite(t=m(t))?c(t):this.getAttribute("transform")})),k.attr("opacity",sx).attr("transform",(function(t){var e=this.parentNode.__axis;return c(e&&isFinite(e=e(t))?e:m(t))}))),w.remove(),b.attr("d",t===lx||t==ox?a?"M"+s*a+","+g+"H0.5V"+y+"H"+s*a:"M0.5,"+g+"V"+y:a?"M"+g+","+s*a+"V0.5H"+y+"V"+s*a:"M"+g+",0.5H"+y),x.attr("opacity",1).attr("transform",(function(t){return c(m(t))})),M.attr(u+"2",s*o),A.attr(u,s*p).text(d),v.filter(dx).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===ox?"start":t===lx?"end":"middle"),v.each((function(){this.__axis=m}))}return f.scale=function(t){return arguments.length?(e=t,f):e},f.ticks=function(){return n=nx.call(arguments),f},f.tickArguments=function(t){return arguments.length?(n=null==t?[]:nx.call(t),f):n.slice()},f.tickValues=function(t){return arguments.length?(r=null==t?null:nx.call(t),f):r&&r.slice()},f.tickFormat=function(t){return arguments.length?(i=t,f):i},f.tickSize=function(t){return arguments.length?(o=a=+t,f):o},f.tickSizeInner=function(t){return arguments.length?(o=+t,f):o},f.tickSizeOuter=function(t){return arguments.length?(a=+t,f):a},f.tickPadding=function(t){return arguments.length?(l=+t,f):l},f}function _x(t){return px(ax,t)}function gx(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function yx(t){return 1===t.length&&(t=mx(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)<0?r=o+1:i=o}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var o=r+i>>>1;t(e[o],n)>0?i=o:r=o+1}return r}}}function mx(t){return function(e,n){return gx(t(e),n)}}var vx,bx=yx(gx).right;function xx(t){return null===t?NaN:+t}function wx(t,e){var n=t.length,r=0,i=-1,o=0,a,l,s=0;if(null==e)for(;++i<n;)isNaN(a=xx(t[i]))||(s+=(l=a-o)*(a-(o+=l/++r)));else for(;++i<n;)isNaN(a=xx(e(t[i],i,t)))||(s+=(l=a-o)*(a-(o+=l/++r)));if(r>1)return s/(r-1)}function kx(t,e){var n=t.length,r=-1,i,o,a;if(null==e){for(;++r<n;)if(null!=(i=t[r])&&i>=i)for(o=a=i;++r<n;)null!=(i=t[r])&&(o>i&&(o=i),a<i&&(a=i))}else for(;++r<n;)if(null!=(i=e(t[r],r,t))&&i>=i)for(o=a=i;++r<n;)null!=(i=e(t[r],r,t))&&(o>i&&(o=i),a<i&&(a=i));return[o,a]}function Mx(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}var Ax=Math.sqrt(50),Sx=Math.sqrt(10),Cx=Math.sqrt(2);function Ex(t,e,n){var r,i=-1,o,a,l;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(l=zx(t,e,n))||!isFinite(l))return[];if(l>0)for(t=Math.ceil(t/l),e=Math.floor(e/l),a=new Array(o=Math.ceil(e-t+1));++i<o;)a[i]=(t+i)*l;else for(t=Math.floor(t*l),e=Math.ceil(e*l),a=new Array(o=Math.ceil(t-e+1));++i<o;)a[i]=(t-i)/l;return r&&a.reverse(),a}function zx(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Ax?10:o>=Sx?5:o>=Cx?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Ax?10:o>=Sx?5:o>=Cx?2:1)}function Tx(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Ax?i*=10:o>=Sx?i*=5:o>=Cx&&(i*=2),e<t?-i:i}function Nx(t,e,n){if(null==n&&(n=xx),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,o=Math.floor(i),a=+n(t[o],o,t),l;return a+(+n(t[o+1],o+1,t)-a)*(i-o)}}function jx(t,e){var n=t.length,r=-1,i,o;if(null==e){for(;++r<n;)if(null!=(i=t[r])&&i>=i)for(o=i;++r<n;)null!=(i=t[r])&&i>o&&(o=i)}else for(;++r<n;)if(null!=(i=e(t[r],r,t))&&i>=i)for(o=i;++r<n;)null!=(i=e(t[r],r,t))&&i>o&&(o=i);return o}function Lx(t){for(var e=t.length,n,r=-1,i=0,o,a;++r<e;)i+=t[r].length;for(o=new Array(i);--e>=0;)for(n=(a=t[e]).length;--n>=0;)o[--i]=a[n];return o}function Px(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}function Ox(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,l=r<e-1?t[r+2]:2*o-i;return Px((n-r/e)*e,a,i,o,l)}}function Fx(t){return function(){return t}}function Dx(t,e){return function(n){return t+n*e}}function qx(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Rx(t,e){var n=e-t;return n?Dx(t,n>180||n<-180?n-360*Math.round(n/360):n):Fx(isNaN(t)?e:t)}function Bx(t){return 1==(t=+t)?Hx:function(e,n){return n-e?qx(e,n,t):Fx(isNaN(e)?n:e)}}function Hx(t,e){var n=e-t;return n?Dx(t,n):Fx(isNaN(t)?e:t)}var Ix=function t(e){var n=Bx(e);function r(t,e){var r=n((t=qs(t)).r,(e=qs(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=Hx(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function Ux(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),o=new Array(n),a,l;for(a=0;a<n;++a)l=qs(e[a]),r[a]=l.r||0,i[a]=l.g||0,o[a]=l.b||0;return r=t(r),i=t(i),o=t(o),l.opacity=1,function(t){return l.r=r(t),l.g=i(t),l.b=o(t),l+""}}}var Yx=Ux(Ox);function Wx(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function Vx(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Zx(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=nw(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(t){for(a=0;a<r;++a)o[a]=i[a](t);return o}}function Xx(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Gx(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function $x(t,e){var n={},r={},i;for(i in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)i in t?n[i]=nw(t[i],e[i]):r[i]=e[i];return function(t){for(i in n)r[i]=n[i](t);return r}}var Qx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jx=new RegExp(Qx.source,"g");function Kx(t){return function(){return t}}function tw(t){return function(e){return t(e)+""}}function ew(t,e){var n=Qx.lastIndex=Jx.lastIndex=0,r,i,o,a=-1,l=[],s=[];for(t+="",e+="";(r=Qx.exec(t))&&(i=Jx.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:Gx(r,i)})),n=Jx.lastIndex;return n<e.length&&(o=e.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?s[0]?tw(s[0].x):Kx(e):(e=s.length,function(t){for(var n=0,r;n<e;++n)l[(r=s[n]).i]=r.x(t);return l.join("")})}function nw(t,e){var n=typeof e,r;return null==e||"boolean"===n?Fx(e):("number"===n?Gx:"string"===n?(r=Ps(e))?(e=r,Ix):ew:e instanceof Ps?Ix:e instanceof Date?Xx:Vx(e)?Wx:Array.isArray(e)?Zx:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?$x:Gx)(t,e)}function rw(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var iw=180/Math.PI,ow={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},aw,lw,sw,uw;function cw(t,e,n,r,i,o){var a,l,s;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,s/=l),t*r<e*n&&(t=-t,e=-e,s=-s,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*iw,skewX:Math.atan(s)*iw,scaleX:a,scaleY:l}}function fw(t){return"none"===t?ow:(aw||(aw=document.createElement("DIV"),lw=document.documentElement,sw=document.defaultView),aw.style.transform=t,t=sw.getComputedStyle(lw.appendChild(aw),null).getPropertyValue("transform"),lw.removeChild(aw),cw(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function hw(t){return null==t?ow:(uw||(uw=document.createElementNS("http://www.w3.org/2000/svg","g")),uw.setAttribute("transform",t),(t=uw.transform.baseVal.consolidate())?cw((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):ow)}function dw(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function o(t,r,i,o,a,l){if(t!==i||r!==o){var s=a.push("translate(",null,e,null,n);l.push({i:s-4,x:Gx(t,i)},{i:s-2,x:Gx(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}function a(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Gx(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function l(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Gx(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function s(t,e,n,r,o,a){if(t!==n||e!==r){var l=o.push(i(o)+"scale(",null,",",null,")");a.push({i:l-4,x:Gx(t,n)},{i:l-2,x:Gx(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),o(e.translateX,e.translateY,n.translateX,n.translateY,r,i),a(e.rotate,n.rotate,r,i),l(e.skewX,n.skewX,r,i),s(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e=-1,n=i.length,o;++e<n;)r[(o=i[e]).i]=o.x(t);return r.join("")}}}var pw=dw(fw,"px, ","px)","deg)"),_w=dw(hw,", ",")",")"),gw=Math.SQRT2,yw=2,mw=4,vw=1e-12;function bw(t){return((t=Math.exp(t))+1/t)/2}function xw(t){return((t=Math.exp(t))-1/t)/2}function ww(t){return((t=Math.exp(2*t))-1)/(t+1)}function kw(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],l=e[2],s=o-n,u=a-r,c=s*s+u*u,f,h;if(c<vw)h=Math.log(l/i)/gw,f=function(t){return[n+t*s,r+t*u,i*Math.exp(gw*t*h)]};else{var d=Math.sqrt(c),p=(l*l-i*i+mw*c)/(2*i*yw*d),_=(l*l-i*i-mw*c)/(2*l*yw*d),g=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(_*_+1)-_);h=(y-g)/gw,f=function(t){var e=t*h,o=bw(g),a=i/(yw*d)*(o*ww(gw*e+g)-xw(g));return[n+a*s,r+a*u,i*o/bw(gw*e+g)]}}return f.duration=1e3*h,f}function Mw(t){return function(e,n){var r=t((e=Ws(e)).h,(n=Ws(n)).h),i=Hx(e.s,n.s),o=Hx(e.l,n.l),a=Hx(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var Aw=Mw(Rx);function Sw(t,e){var n=Hx((t=ou(t)).l,(e=ou(e)).l),r=Hx(t.a,e.a),i=Hx(t.b,e.b),o=Hx(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=o(e),t+""}}function Cw(t){return function(e,n){var r=t((e=hu(e)).h,(n=hu(n)).h),i=Hx(e.c,n.c),o=Hx(e.l,n.l),a=Hx(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}var Ew=Cw(Rx);function zw(t){return function e(n){function r(e,r){var i=t((e=Pu(e)).h,(r=Pu(r)).h),o=Hx(e.s,r.s),a=Hx(e.l,r.l),l=Hx(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=o(t),e.l=a(Math.pow(t,n)),e.opacity=l(t),e+""}}return n=+n,r.gamma=e,r}(1)}zw(Rx);var Tw=zw(Hx);function Nw(t,e){for(var n=0,r=e.length-1,i=e[0],o=new Array(r<0?0:r);n<r;)o[n]=t(i,i=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[e](t-e)}}var jw=Array.prototype,Lw=jw.map,Pw=jw.slice;function Ow(t){return function(){return t}}function Fw(t){return+t}var Dw=[0,1];function qw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ow(e)}function Rw(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function Bw(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function Hw(t,e,n,r){var i=t[0],o=t[1],a=e[0],l=e[1];return o<i?(i=n(o,i),a=r(l,a)):(i=n(i,o),a=r(a,l)),function(t){return a(i(t))}}function Iw(t,e,n,r){var i=Math.min(t.length,e.length)-1,o=new Array(i),a=new Array(i),l=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++l<i;)o[l]=n(t[l],t[l+1]),a[l]=r(e[l],e[l+1]);return function(e){var n=bx(t,e,1,i)-1;return a[n](o[n](e))}}function Uw(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function Yw(t,e){var n=Dw,r=Dw,i=nw,o=!1,a,l,s;function u(){return a=Math.min(n.length,r.length)>2?Iw:Hw,l=s=null,c}function c(e){return(l||(l=a(n,r,o?Rw(t):t,i)))(+e)}return c.invert=function(t){return(s||(s=a(r,n,qw,o?Bw(e):e)))(+t)},c.domain=function(t){return arguments.length?(n=Lw.call(t,Fw),u()):n.slice()},c.range=function(t){return arguments.length?(r=Pw.call(t),u()):r.slice()},c.rangeRound=function(t){return r=Pw.call(t),i=rw,u()},c.clamp=function(t){return arguments.length?(o=!!t,u()):o},c.interpolate=function(t){return arguments.length?(i=t,u()):i},u()}function Ww(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Vw(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Zw(t){return(t=Vw(Math.abs(t)))?t[1]:NaN}function Xw(t,e){return function(n,r){for(var i=n.length,o=[],a=0,l=t[0],s=0;i>0&&l>0&&(s+l+1>r&&(l=Math.max(1,r-s)),o.push(n.substring(i-=l,i+l)),!((s+=l+1)>r));)l=t[a=(a+1)%t.length];return o.reverse().join(e)}}function Gw(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}var $w=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i,Qw;function Jw(t){if(!(e=$w.exec(t)))throw new Error("invalid format: "+t);var e;return new Kw({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Kw(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function tk(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":0===r&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(i+1):t}function ek(t,e){var n=Vw(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Qw=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Vw(t,Math.max(0,e+o-1))[0]}function nk(t,e){var n=Vw(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Jw.prototype=Kw.prototype,Kw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var rk={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:Ww,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return nk(100*t,e)},r:nk,s:ek,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function ik(t){return t}var ok=Array.prototype.map,ak=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],lk,sk,uk;function ck(t){var e=void 0===t.grouping||void 0===t.thousands?ik:Xw(ok.call(t.grouping,Number),t.thousands+""),n=void 0===t.currency?"":t.currency[0]+"",r=void 0===t.currency?"":t.currency[1]+"",i=void 0===t.decimal?".":t.decimal+"",o=void 0===t.numerals?ik:Gw(ok.call(t.numerals,String)),a=void 0===t.percent?"%":t.percent+"",l=void 0===t.minus?"-":t.minus+"",s=void 0===t.nan?"NaN":t.nan+"";function u(t){var u=(t=Jw(t)).fill,c=t.align,f=t.sign,h=t.symbol,d=t.zero,p=t.width,_=t.comma,g=t.precision,y=t.trim,m=t.type;"n"===m?(_=!0,m="g"):rk[m]||(void 0===g&&(g=12),y=!0,m="g"),(d||"0"===u&&"="===c)&&(d=!0,u="0",c="=");var v="$"===h?n:"#"===h&&/[boxX]/.test(m)?"0"+m.toLowerCase():"",b="$"===h?r:/[%p]/.test(m)?a:"",x=rk[m],w=/[defgprs%]/.test(m);function k(t){var n=v,r=b,a,h,k;if("c"===m)r=x(t)+r,t="";else{var M=(t=+t)<0||1/t<0;if(t=isNaN(t)?s:x(Math.abs(t),g),y&&(t=tk(t)),M&&0==+t&&"+"!==f&&(M=!1),n=(M?"("===f?f:l:"-"===f||"("===f?"":f)+n,r=("s"===m?ak[8+Qw/3]:"")+r+(M&&"("===f?")":""),w)for(a=-1,h=t.length;++a<h;)if(48>(k=t.charCodeAt(a))||k>57){r=(46===k?i+t.slice(a+1):t.slice(a))+r,t=t.slice(0,a);break}}_&&!d&&(t=e(t,1/0));var A=n.length+t.length+r.length,S=A<p?new Array(p-A+1).join(u):"";switch(_&&d&&(t=e(S+t,S.length?p-r.length:1/0),S=""),c){case"<":t=n+t+r+S;break;case"=":t=n+S+t+r;break;case"^":t=S.slice(0,A=S.length>>1)+n+t+r+S.slice(A);break;default:t=S+n+t+r}return o(t)}return g=void 0===g?6:/[gprs]/.test(m)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return t+""},k}function c(t,e){var n=u(((t=Jw(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Zw(e)/3))),i=Math.pow(10,-r),o=ak[8+r/3];return function(t){return n(i*t)+o}}return{format:u,formatPrefix:c}}function fk(t){return lk=ck(t),sk=lk.format,uk=lk.formatPrefix,lk}function hk(t){return Math.max(0,-Zw(Math.abs(t)))}function dk(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Zw(e)/3)))-Zw(Math.abs(t)))}function pk(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Zw(e)-Zw(t))+1}function _k(t,e,n){var r=t[0],i=t[t.length-1],o=Tx(r,i,null==e?10:e),a;switch((n=Jw(null==n?",f":n)).type){case"s":var l=Math.max(Math.abs(r),Math.abs(i));return null!=n.precision||isNaN(a=dk(o,l))||(n.precision=a),uk(n,l);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=pk(o,Math.max(Math.abs(r),Math.abs(i))))||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=hk(o))||(n.precision=a-2*("%"===n.type))}return sk(n)}function gk(t){var e=t.domain;return t.ticks=function(t){var n=e();return Ex(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return _k(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],l=r[o],s;return l<a&&(s=a,a=l,l=s,s=i,i=o,o=s),(s=zx(a,l,n))>0?s=zx(a=Math.floor(a/s)*s,l=Math.ceil(l/s)*s,n):s<0&&(s=zx(a=Math.ceil(a*s)/s,l=Math.floor(l*s)/s,n)),s>0?(r[i]=Math.floor(a/s)*s,r[o]=Math.ceil(l/s)*s,e(r)):s<0&&(r[i]=Math.ceil(a*s)/s,r[o]=Math.floor(l*s)/s,e(r)),t},t}function yk(){var t=Yw(qw,Gx);return t.copy=function(){return Uw(t,yk())},gk(t)}fk({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var mk="1.4.2";function vk(t){this.container=bm(t),this._width=null,this._height=null,this._handleRadius=15,this._channelHeight=5,this._channelRadius=null,this._handleFill="black",this._channelFill="#eee",this._margin={top:null,left:null,right:null},this._domain=[0,1],this._value=null,this._snap=!1,this._scale=null,this._axis=!1,this._ticks=null,this._tickFormat=null,this._tickSize=null,this._label=null,this._labelSize=18,this._startLabel=null,this._startLabelBelow=!1,this._endLabel=null,this._endLabelBelow=!1,this._startEndLabelSize=16,this.handlers={change:[]}}function bk(t){t.length>0&&"_"==t.charAt(0)&&(vk.prototype[t.substr(1)]=function(e){return void 0===e?this[t]:(this[t]=e,this)})}var xk=new vk;for(var wk in xk)bk(wk);function kk(t,e,n,r){if(void 0===n&&(n=0),void 0===r&&(r=t.length),r-n==0)return e;if(r-n==1)return t[n];var i,o;if(r-n==2)return Math.abs(t[n]-e)<=Math.abs(t[n+1]-e)?t[n]:t[n+1];var a=n+Math.floor((r-n)/2),l=t[a],s,u=t[a-1];return u<=e&&e<=l?Math.abs(u-e)<=Math.abs(l-e)?u:l:l<=e?kk(t,e,a,r):kk(t,e,n,a)}function Mk(t,e){return"boolean"==typeof t?t?Math.round(e):e:kk(t,e)}function Ak(t){return new vk(t)}function Sk(t){var e,n;return'<svg width="25px" height="30px" viewBox="0 0 25 30"> <polygon fill="'+t+'" stroke="none" points="25 15 0 30 0 0"></polygon> </svg>'}function Ck(t){var e,n;return'<svg width="26px" height="30px" viewBox="0 0 26 30"> <g stroke="none" stroke-width="1" fill="'+t+'"><rect x="2" y="2" width="9" height="26"></rect> <rect x="15" y="2" width="9" height="26"></rect> </g> </svg>'}function Ek(t,e,n){var r={},i=bm(n).append("div").attr("class","fl-control fl-control-slider animatable"),o=i.append("div").attr("class","slider-play"),a=i.append("div").attr("class","fl-controls-slider"),l,s,u,c,f,h,d,p=null,_=function(){clearTimeout(p),p=null},g=function(e){var n=c[e];n.options_index!==t.index()&&(t.index(n.options_index),t.trigger("change"))},y=Ak(a.node()).snap(!0).on("change",(function(t){var e=null!==p;e&&_(),g(t),e&&v()})),m=function(){_(),i.classed("playing",!1),o.html(l),t._isPlaying_(!1),d=!1},v=function(){var n=t.getSortedIndex(),r=f[n],i=t.n_options-1,o=n<i?n+1:0;p=setTimeout((function(){g(o),e.slider_loop||o<i?v():m()}),r)},b=function(){i.classed("playing",!0),o.html(s),v(),t._isPlaying_(!0),d=!0};o.on("click",(function(){null===p?b():m()}));var x=function(){var t=Math.round(Qb(e.slider_handle_height)/2);i.style("width",Math.round(Qb(e.slider_width))+"px"),o.style("height",2*t+"px").style("width",2*t+"px").style("display",e.slider_play_button?null:"none");var n=i.node().getBoundingClientRect().width,r=o.node().getBoundingClientRect().width;a.style("width",Math.max(n-r,1)+"px").style("height",2*t+"px"),y.handleRadius(t).margin({left:t+5,right:t+Qb(e.slider_margin),top:t})},w=function(){e.slider_play_button?i.classed("animatable",!0):(m(),i.classed("animatable",!1)),u!==e.slider_handle_color&&(y.update(),u=e.slider_handle_color||"currentColor",i.select(".slider-handle").style("fill",u),l=Sk(u),s=Ck(u),o.html(p?s:l))},k=function(){return i.style("display","inline-block"),x(),w(),r},M=function(){return m(),i.style("display","none"),r};return r.show=k,r.hide=M,r.update=function(n){if(c=n,!t.n_options||"slider"!==e.control_type)return M(),r;k();var i=t.n_options,o=e.slider_loop;f=c.map((function(t,n){var r;return 1e3*(e.slider_step_time+(o&&n===i-1?e.slider_restart_pause:0))}));var l=t.getSortedIndex(),s=c[l];return y.domain([0,i-1]).value(l).endLabel(s.display).channelHeight(Math.round(Qb(e.slider_track_height))).channelFill(e.slider_background_color).update(),y.container.select("svg").attr("fill","currentColor"),(h=h||a.select("text.slider-end-labels")).style("fill",e.slider_font_color).attr("y","0").attr("dy","0.25em"),t._isPlaying_()&&!d?b():!t._isPlaying_()&&d&&m(),r},r}vk.prototype.margin=function t(e){if(!e)return this._margin;for(wk in e){if(!(wk in this._margin))throw"Slider.margin: unrecognised option "+wk;this._margin[wk]=e[wk]}return this},vk.prototype.on=function t(e,n){if(!(e in this.handlers))throw"Slider.on: No such event: "+e;return this.handlers[e].push(n),this},vk.prototype.fire=function t(e,n){if(!(e in this.handlers))throw"Slider.fire: No such event: "+e;for(var r=this.handlers[e],i=0;i<r.length;i++)r[i].call(this,n);return this},vk.prototype.draw=function t(){var e=this,n=this._width,r=this._height,i=this.container.node();if(!n){var o=i.getBoundingClientRect();if(!o||0==o.width)return this;n=o.width,r=o.height}var a=null==this._channelRadius?this._channelHeight/2:this._channelRadius,l=null==this._margin.left?Math.max(this._handleRadius,a):this._margin.left,s=null==this._margin.right?Math.max(this._handleRadius,a):this._margin.right,u=null==this._margin.top?Math.max(this._handleRadius,this._channelHeight/2):this._margin.top,c=n-l-s,f=c+2*a,h=1.5*this._labelSize,d;null!=this._label&&null==this._margin.top&&(u+=h),"http://www.w3.org/2000/svg"==i.namespaceURI?d=this.container:((d=this.container.selectAll("svg").data([{width:n,height:r}])).exit().remove(),(d=d.enter().append("svg").merge(d)).attr("width",(function(t){return t.width})).attr("height",(function(t){return t.height})));var p=d.selectAll("g.slider-container").data([{left:l,top:u,id:this._id}]);p.exit().remove(),(p=p.enter().append("g").attr("class","slider-container").merge(p)).attr("transform",(function(t){return"translate("+t.left+","+t.top+")"})).attr("id",(function(t){return t.id})),this.scale=(this._scale?this._scale():yk()).domain(this._domain).range([0,c]),null==this._value||this._value<this._domain[0]?this._value=this._domain[0]:this._value>this._domain[1]&&(this._value=this._domain[1]),this._snap&&(this._value=Mk(this._snap,this._value));var _=[],g;this._axis&&(g="boolean"!=typeof this._axis?this._axis(this.scale):_x().scale(this.scale).tickPadding(6),this._ticks&&g.ticks(this._ticks),this._tickFormat&&g.tickFormat(this._tickFormat),this._tickSize?g.tickSize(this._tickSize):g.tickSize(Math.max(5,this._handleRadius-this._channelHeight-2)),_.push(g));var y,m=p.selectAll(".slider-axis").data(_).enter(),v,b,x,w;function k(t){document.addEventListener("mouseup",M,!1),document.addEventListener("mousemove",A,!1),x=t.clientX,w=e.scale(e._value)}function M(){document.removeEventListener("mouseup",M,!1),document.removeEventListener("mousemove",A,!1)}function A(t){z(t.clientX-x)}function S(t){1==t.touches.length&&(document.addEventListener("touchend",C,!1),document.addEventListener("touchmove",E,!1),x=t.touches[0].clientX,w=e.scale(e._value))}function C(){document.removeEventListener("touchend",C,!1),document.removeEventListener("touchmove",E,!1)}function E(t){1==t.touches.length&&z(t.touches[0].clientX-x)}function z(t){var n=w+t,r=Math.max(0,Math.min(c,n)),i=e.scale.invert(r);e._snap&&(i=Mk(e._snap,i)),b.attr("cx",e.scale(i)),i!=e._value&&(e._value=i,e.fire("change",e._value))}m.append("g").attr("class","slider-axis").attr("transform","translate(0,"+this._channelHeight/2+")").each((function(t){t(bm(this))})),m.select(".domain").attr("fill","none"),m.selectAll(".tick line").attr("stroke","black"),m.exit().remove(),(v=p.selectAll(".slider-channel").data([{width:f,height:this._channelHeight,channel_r:a}])).exit().remove(),(v=v.enter().append("rect").attr("class","slider-channel").attr("cursor","pointer").on("click",(function(){var t=Math.max(0,Math.min(c,Mm(this)[0]));e._value=e.scale.invert(t),e._snap&&(e._value=Mk(e._snap,e._value)),b.attr("cx",e.scale(e._value)),e.fire("change",e._value)})).merge(v)).attr("width",(function(t){return t.width})).attr("fill",this._channelFill).attr("height",(function(t){return t.height})).attr("y",(function(t){return-t.height/2})).attr("x",(function(t){return-t.channel_r})).attr("rx",(function(t){return t.channel_r})),(b=(b=p.selectAll(".slider-handle").data([{v:this._value,x:this.scale(this._value)}])).enter().append("circle").attr("class","slider-handle").attr("cursor","col-resize").merge(b)).attr("cx",(function(t){return t.x})).attr("r",this._handleRadius).attr("fill",this._handleFill).on("mousedown",(function(){im.preventDefault(),k(im)})).on("touchstart",(function(){im.preventDefault(),S(im)}));var T=[];this._label&&T.push({label:this._label,x:c/2,y:-h,font_size:this._labelSize});var N=p.selectAll(".slider-label").data(T);N.exit().remove(),(N=N.enter().append("text").attr("class","slider-label").attr("text-anchor","middle").attr("cursor","default").merge(N)).text((function(t){return t.label})).attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("font-size",this._labelSize);var j=[];this._startLabel&&j.push({label:this._startLabel,x:this._startLabelBelow?0:-(a+5+Math.max(0,this._handleRadius-a)),y:this._startLabelBelow?a+15:this._startEndLabelSize/1.75-a/2,anchor:this._startLabelBelow?"middle":"end",font_size:this._startEndLabelSize}),this._endLabel&&j.push({label:this._endLabel,x:this._endLabelBelow?c:c+(a+Math.max(0,this._handleRadius-a)+5),y:this._startLabelBelow?a+15:this._startEndLabelSize/1.75-a/2,anchor:this._endLabelBelow?"middle":"start",font_size:this._startEndLabelSize});var L=p.selectAll(".slider-end-labels").data(j);return L.exit().remove(),(L=L.enter().append("text").attr("class","slider-end-labels").attr("pointer-events","none").merge(L)).text((function(t){return t.label})).attr("font-size",(function(t){return t.font_size})).attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("text-anchor",(function(t){return t.anchor})),this},vk.prototype.update=vk.prototype.draw,Ak.version=mk;var zk=Object.freeze({control_type:"dropdown",control_title:"",dropdown_width_mode:"auto",dropdown_width_fixed:20,button_group:!0,button_group_width_mode:"fixed",button_group_width_fixed:20,slider_width:15,slider_handle_color:null,slider_font_color:null,slider_background_color:"#dddddd",slider_handle_height:1,slider_track_height:.2,slider_margin:4.5,slider_play_button:!0,slider_step_time:2,slider_loop:!0,slider_restart_pause:0,sort:"unsorted",sort_temporal_format:"%Y",_index_:null,_is_playing_:!1});function Tk(t,e,n){var r={};e=e||Cm,n=n||Em;var i=[],o=[],a=[],l=document.createElement("div");l.setAttribute("class","fl-controls-container");var s=bm(l).append("div").attr("class","fl-controls-title"),u=tx(r,t,l),c=ex(r,t,l),f=Ek(r,t,l);for(var h in zk)void 0===t[h]&&(t[h]=zk[h]);var d=t._index_,p=function(t){return i.length&&t>=0&&t<i.length},_=function(e){l.style.display=e.length>1?null:"none",l.style.width="",s.node().innerHTML=t.control_title,s.node().style.display=""===t.control_title?"none":"inline-block",f.update(e),u.update(e),c.update(e)};r.appendTo=function(t,e){return Gb(),bm(t).node().appendChild(l),u.appendedToDOM(e),r};var g=function(){var t=y(),e=i[t];return a.forEach((function(n){n(e,t)})),r};r.remove=function(){return l.parentElement&&l.parentElement.removeChild(l),u.removedFromDOM(),r},r.options=function(t){if(void 0===t)return i.slice();if(!Array.isArray(t))return r;var e=(i=t.slice()).length,n=y();return e?(null===n||n>=e)&&y(0):y(null),r},Object.defineProperty(r,"n_options",{get:function(){return i.length}});var y=function(e){return void 0===e?(t._is_playing_||(d=t._index_),d):(null===e||p(e)?(d=e,t._is_playing_||(t._index_=d)):console.warn("Invalid index, ignoring update call"),r)};r.index=y,r.getSortedIndex=function(){var e=y(),n;return"unsorted"==t.sort?e:(o.some((function(t,r){if(t.options_index===e)return n=r,!0})),n)},r.value=function(t){if(void 0===t)return i[y()];var e=i.indexOf(t);return-1!==e&&y(e),r},r.on=function(t,e){return"change"===t&&a.push(e.bind(r)),r},r.update=function(){return Jb(),o=Yb(i,t,e(),n()),_(o),r},r.trigger=function(t){return"change"===t&&g(),r},r.getNode=function(){return l};var m=function(e){if(void 0===e)return t._is_playing_;t._is_playing_=!!e,e||y(d)};return r._isPlaying_=m,r}function Nk(){return this.declarations=[],this}function jk(t){return this.selector=t,this.styles=[],this}Nk.prototype.select=function(t){if(!t)return this;var e=new jk(t);return e.parent=this,this.addDeclaration(e),e},Nk.prototype.addDeclaration=function(t){return this.declarations.push(t),this},Nk.prototype.print=function(){var t="";return this.declarations.forEach((function(e){t+=e.selector+" {\n",e.styles.forEach((function(e){t+="\t"+e[0]+": "+e[1]+";\n"})),t+="}\n\n"})),t},Nk.prototype.clear=function(){return this.declarations=[],this},jk.prototype.style=function(t,e){var n="function"==typeof value_?e():e;return""!==n&&null!=n&&this.styles.push([t,n]),this},jk.prototype.select=function(t){return this.parent.select(this.selector+" "+t)};var Lk=Object.freeze({font_size:1,font_weight:"bold",padding:.4});function Pk(t,e,n){for(var r in this._state=t,Lk)void 0===this._state[r]&&(this._state[r]=Lk[r]);return this._layout=n||{},this._styles=new Nk,this._selector=e,this._createStylesheet(),this}Pk.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-controls",document.head.appendChild(this._stylesheet)},Pk.prototype.update=function(){this._styles.clear(),this._styles.select(this._selector+".hidden").style("display","none"),this._styles.select(this._selector).style("vertical-align","middle").style("position","relative").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight),this._styles.select(".fl-controls-title").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight).style("vertical-align","middle"),this._styles.select(this._selector+".fl-control .button").style("padding",this._state.padding+"rem "+2*this._state.padding+"rem"),this._styles.select(this._selector+" .list-item").style("padding",Math.max(this._state.padding,.5)+"rem"),this._styles.select(this._selector+"-dropdown .main").style("padding",this._state.padding+"rem "+1.5*this._state.padding+"rem"),this._styles.select(this._selector+"-slider .slider-end-labels").style("font-size",this._state.font_size+"rem").style("font-weight",this._state.font_weight),this._styles.select(this._selector+"-slider").style("padding",this._state.padding+"rem 0"),this._stylesheet.innerHTML=this._styles.print()};var Ok=Object.freeze({background:null,font_color:null,background_selected:"#2886b2",font_color_selected:"#ffffff",background_hover:null,font_color_hover:null,border_width:1,border_transparency:.25,border_color:null,border_radius:3});function Fk(t,e,n){for(var r in this._state=t,Ok)void 0===this._state[r]&&(this._state[r]=Ok[r]);return this._layout=n||{},this._styles=new Nk,this._selector=e,this._createStylesheet(),this}Fk.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-button",document.head.appendChild(this._stylesheet)},Fk.prototype.update=function(){this._styles.clear();var t=this._state.background||this._layout.background_color||"#ffffff",e=this._state.font_color||this._layout.font_color||"#333333",n=qu(this._state.border_color||e,this._state.border_transparency);this._styles.select(this._selector+".fl-control.hidden").style("display","none"),this._styles.select(this._selector+".fl-control .button").style("overflow","hidden").style("white-space","nowrap").style("box-sizing","content-box").style("margin","0 2px 0 0 !important").style("background-color",t).style("color",e).style("border",this._state.border_width+"px solid "+n).style("border-radius",this._state.border_radius+"px"),this._styles.select(this._selector+".fl-control .button:hover").style("background-color",this._state.background_hover||t).style("color",this._state.font_color_hover||e),this._styles.select(this._selector+".fl-control .button.selected").style("background-color",this._state.background_selected).style("color",this._state.font_color_selected),this._styles.select(this._selector+".grouped.fl-control .button").style("border-right","none").style("border-radius","0").style("margin","0"),this._styles.select(this._selector+".grouped.fl-control .button:first-child").style("border-radius",this._state.border_radius+"px 0 0 "+this._state.border_radius+"px"),this._styles.select(this._selector+".grouped.fl-control .button:last-child").style("border-radius","0 "+this._state.border_radius+"px "+this._state.border_radius+"px 0").style("border-right",this._state.border_width+"px solid "+n),this._styles.select(this._selector+".grouped.fl-control.fixed-width:not(.hidden)").style("width",this._state.grouped_width+"%"),this._stylesheet.innerHTML=this._styles.print()};var Dk=Object.freeze({background:null,font_color:null,border_style:"bottom",border_width:1,border_color:null,border_transparency:.25,border_radius:3});function qk(t,e,n){for(var r in this._state=t,Dk)void 0===this._state[r]&&(this._state[r]=Dk[r]);return this._layout=n||{},this._styles=new Nk,this._selector=e,this._createStylesheet(),this}function Rk(t,e,n){return new Pk(t,e,n)}function Bk(t,e,n){return new Fk(t,e,n)}function Hk(t,e,n){return new qk(t,e,n)}qk.prototype._createStylesheet=function(){this._stylesheet=document.createElement("style"),this._stylesheet.className="fl-ui-styles-dropdown",document.head.appendChild(this._stylesheet)},qk.prototype.update=function(){this._styles.clear();var t=this._state.background||this._layout.background_color||"#ffffff",e=this._state.font_color||this._layout.font_color||"#333333",n=qu(this._state.border_color||e,this._state.border_transparency);this._styles.select(this._selector+" .heading").style("margin-bottom","0.4em"),this._styles.select(this._selector).style("pointer-events","all"),this._styles.select(this._selector+" .main").style("display","inline-block").style("cursor","pointer").style("overflow","hidden").style("white-space","nowrap").style("position","relative").style("background-color",t).style("color",e).style("border","bottom"==this._state.border_style?this._state.border_width+"px solid transparent":this._state.border_width+"px solid "+n).style("border-bottom","bottom"==this._state.border_style?this._state.border_width+"px solid "+n:null).style("border-radius","bottom"==this._state.border_style?null:this._state.border_radius+"px"),this._styles.select(this._selector+" .main .symbol").style("float","right").select("div").style("border-top-color",e+" !important"),this._styles.select(this._selector+" .main .current").style("line-height","1em").style("height","100%").style("max-width","88%").style("display","inline-block").style("overflow","hidden").style("vertical-align","top"),this._styles.select(this._selector+" .list").style("top","2px").style("min-width","100%").style("padding","2px").style("display","none").style("max-height","200px").style("overflow-y","auto").style("box-shadow","0 1px 4px rgba(0, 0, 0, .1)").style("margin-top","2px").select(".list-item").style("line-height","1em").style("cursor","pointer").style("font-weight","normal").style("color",e),this._styles.select(this._selector+".open .list").style("display","block").style("border",this._state.border_width+"px solid "+n).style("background-color",t).style("z-index","1").style("animation","dropdown-out 200ms"),this._styles.select(this._selector+" .list-item:hover").style("opacity","0.6"),this._styles.select(this._selector+" .list-item.selected, "+this._selector+" .list-item.selected:hover").style("opacity","1").style("cursor","default"),"bottom"==this._state.border_style&&this._styles.select(this._selector+" .main").style("padding-left",0).style("padding-right","0.1rem"),this._stylesheet.innerHTML=this._styles.print()};var Ik={},Uk="$";function Yk(){}function Wk(t,e){var n=new Yk;if(t instanceof Yk)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r=-1,i=t.length,o;if(null==e)for(;++r<i;)n.set(r,t[r]);else for(;++r<i;)n.set(e(o=t[r],r,t),o)}else if(t)for(var a in t)n.set(a,t[a]);return n}function Vk(){var t=[],e=[],n,r,i;function o(e,i,a,l){if(i>=t.length)return null!=n&&e.sort(n),null!=r?r(e):e;for(var s=-1,u=e.length,c=t[i++],f,h,d=Wk(),p,_=a();++s<u;)(p=d.get(f=c(h=e[s])+""))?p.push(h):d.set(f,[h]);return d.each((function(t,e){l(_,e,o(t,i,a,l))})),_}function a(n,i){if(++i>t.length)return n;var o,l=e[i-1];return null!=r&&i>=t.length?o=n.entries():(o=[],n.each((function(t,e){o.push({key:e,values:a(t,i)})}))),null!=l?o.sort((function(t,e){return l(t.key,e.key)})):o}return i={object:function(t){return o(t,0,Zk,Xk)},map:function(t){return o(t,0,Gk,$k)},entries:function(t){return a(o(t,0,Gk,$k),0)},key:function(e){return t.push(e),i},sortKeys:function(n){return e[t.length-1]=n,i},sortValues:function(t){return n=t,i},rollup:function(t){return r=t,i}}}function Zk(){return{}}function Xk(t,e,n){t[e]=n}function Gk(){return Wk()}function $k(t,e,n){t.set(e,n)}function Qk(){}Yk.prototype=Wk.prototype={constructor:Yk,has:function(t){return Uk+t in this},get:function(t){return this[Uk+t]},set:function(t,e){return this[Uk+t]=e,this},remove:function(t){var e=Uk+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===Uk&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===Uk&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===Uk&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===Uk&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===Uk&&++t;return t},empty:function(){for(var t in this)if(t[0]===Uk)return!1;return!0},each:function(t){for(var e in this)e[0]===Uk&&t(this[e],e.slice(1),this)}};var Jk=Wk.prototype;function Kk(t,e){var n=new Qk;if(t instanceof Qk)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}function tM(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function eM(t){let e=t,n=t;function r(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;n(t[o],e)<0?r=o+1:i=o}return r}function i(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){const o=r+i>>>1;n(t[o],e)>0?i=o:r=o+1}return r}function o(t,n,i,o){null==i&&(i=0),null==o&&(o=t.length);const a=r(t,n,i,o-1);return a>i&&e(t[a-1],n)>-e(t[a],n)?a-1:a}return 1===t.length&&(e=(e,n)=>t(e)-n,n=nM(t)),{left:r,center:o,right:i}}function nM(t){return(e,n)=>tM(t(e),n)}function rM(t){return null===t?NaN:+t}Qk.prototype=Kk.prototype={constructor:Qk,has:Jk.has,add:function(t){return this[Uk+(t+="")]=t,this},remove:Jk.remove,clear:Jk.clear,values:Jk.keys,size:Jk.size,empty:Jk.empty,each:Jk.each};const iM=undefined,oM=eM(tM).right;eM(rM).center;var aM=oM;function lM(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(void 0===n?o>=o&&(n=r=o):(n>o&&(n=o),r<o&&(r=o)))}return[n,r]}var sM=Math.sqrt(50),uM=Math.sqrt(10),cM=Math.sqrt(2);function fM(t,e,n){var r,i=-1,o,a,l;if(n=+n,(t=+t)===(e=+e)&&n>0)return[t];if((r=e<t)&&(o=t,t=e,e=o),0===(l=hM(t,e,n))||!isFinite(l))return[];if(l>0){let n=Math.round(t/l),r=Math.round(e/l);for(n*l<t&&++n,r*l>e&&--r,a=new Array(o=r-n+1);++i<o;)a[i]=(n+i)*l}else{l=-l;let n=Math.round(t*l),r=Math.round(e*l);for(n/l<t&&++n,r/l>e&&--r,a=new Array(o=r-n+1);++i<o;)a[i]=(n+i)/l}return r&&a.reverse(),a}function hM(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=sM?10:o>=uM?5:o>=cM?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=sM?10:o>=uM?5:o>=cM?2:1)}function dM(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=sM?i*=10:o>=uM?i*=5:o>=cM&&(i*=2),e<t?-i:i}function pM(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function _M(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function gM(t,e){let n=0,r=0;if(void 0===e)for(let e of t)null!=e&&(e=+e)>=e&&(++n,r+=e);else{let i=-1;for(let o of t)null!=(o=e(o,++i,t))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function yM(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}function mM(t,e){let n=0;if(void 0===e)for(let e of t)(e=+e)&&(n+=e);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}function vM(t){return t!=t}function bM(t,e,n){for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function xM(t,e,n){return e==e?bM(t,e,n):dg(t,vM,n)}function wM(t,e){var n;return!!(null==t?0:t.length)&&xM(t,e,0)>-1}function kM(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function MM(){}var AM=1/0,SM=Xp&&1/id(new Xp([,-0]))[1]==AM?function(t){return new Xp(t)}:MM,CM=SM,EM=200;function zM(t,e,n){var r=-1,i=wM,o=t.length,a=!0,l=[],s=l;if(n)a=!1,i=kM;else if(o>=EM){var u=e?null:CM(t);if(u)return id(u);a=!1,i=Qh,s=new Gh}else s=e?[]:l;t:for(;++r<o;){var c=t[r],f=e?e(c):c;if(c=n||0!==c?c:0,a&&f==f){for(var h=s.length;h--;)if(s[h]===f)continue t;e&&s.push(f),l.push(c)}else i(s,f,n)||(s!==l&&s.push(f),l.push(c))}return l}function TM(t){return t&&t.length?zM(t):[]}function NM(){return"Map"===jc.geo_mode}var jM=["mean","sum","min","max"],LM=[],PM=[];function OM(t){LM=t}function FM(t){(LM=t.map((function(t){return t}))).column_names=t.column_names}function DM(t){var e=sJ.getParser();t.forEach((function(t){t.numericColumns=t.numericColumns.map(e)}))}function qM(){var t=Object.hasOwnProperty.call(LM.column_names,"id");LM.forEach((function(e,n){e.__flourish_id=t?e.id:n.toString()}));var e={};LM.forEach((function(t){void 0===e[t.__flourish_id]&&(e[t.__flourish_id]=0),e[t.__flourish_id]++})),Object.keys(e).forEach((function(t){e[t]>1&&wC(t+" appears more than once (the values in the Id binding must be unique)"),LM.forEach((function(t,e){t.__flourish_id=e.toString()}))}))}function RM(t){var e=[];e.push(t.length);var n=0===PM.length,r;return n&&PM.push({type:"count",original_index:null}),LM.column_names.numericColumns.forEach((function(r,i){jM.forEach((function(r){var o;switch(r){case"sum":o=mM(t,(function(t){return+t.numericColumns[i]}));break;case"mean":o=gM(t,(function(t){return+t.numericColumns[i]}));break;case"min":o=_M(t,(function(t){return+t.numericColumns[i]}));break;case"max":o=pM(t,(function(t){return+t.numericColumns[i]}))}e.push(o),n&&PM.push({type:r,original_index:i})}))})),{summary:e,member_ids:t.map((function(t){return t.__flourish_id}))}}function BM(t){var e=Vk();return t.forEach((function(t){e=e.key((function(e){return e.categoryColumns[t.i]}))})),e=e.rollup(RM).entries(LM)}function HM(t,e,n){t.forEach((function(t){var r=e.map((function(t){return t}));r.push(t.key),t.values?HM(t.values,r,n):n.push({keys:r,summary:t.value.summary,member_ids:t.value.member_ids})}))}function IM(){var t=[];if(!NM()&&"none"!==jc.aggregate_by.type&&(PM=[],t.push(TC(jc.aggregate_by)),EC(jc.position_by_1)&&t.push(TC(jc.position_by_1)),EC(jc.position_by_2)&&t.push(TC(jc.position_by_2)),0!==(t=TM(t)).length)){var e,n=[];HM(BM(t=t.map((function(t){return{name:LM.column_names.categoryColumns[t],i:t}}))),[],n);var r=t.map((function(t){return t.name})),i=n.map((function(t){return{categoryColumns:t.keys,numericColumns:t.summary,member_ids:t.member_ids,is_aggregated:!0,column_names:r,label:t.keys[0],__flourish_id:t.keys.join("-")}})),o=[];o.push("Count"),LM.column_names.numericColumns.forEach((function(t){jM.forEach((function(){o.push(t)}))})),i.column_names={categoryColumns:r,numericColumns:o,label:t[0].name},i.aggregation_meta=PM,i.is_aggregated=!0,i.nest_columns=t,LM=i}}var UM=Object.freeze({categorical_type:"palette",categorical_palette:["#4328E7","#9654E5","#FF6283","#FF8800","#FFC502","#007D8E","#1AA7EE","#29DAE4","#88E99A","#019C00","#C11F1F","#730000"],categorical_extend:!0,categorical_custom_palette:"",numeric_type:"sequential",sequential_palette:"Blues",sequential_custom_min:"#F7F7F7",sequential_custom_max:"#FF6283",sequential_color_space:"rgb",sequential_reverse:!1,sequential_custom_domain:!1,sequential_domain_min:0,sequential_domain_max:1,diverging_palette:"RdBu",diverging_custom_min:"#1AA7EE",diverging_custom_mid:"#F7F7F7",diverging_custom_max:"#FF6283",diverging_color_space:"rgb",diverging_reverse:!1,diverging_custom_domain:!1,diverging_domain_min:0,diverging_domain_mid:.5,diverging_domain_max:1,binning:!1,bin_count:4,bin_mode:"fixed",bin_thresholds:""}),YM=null,WM,VM=360/((1+Math.sqrt(5))/2),ZM="#FF0000";function XM(t,e,n){return function(r,i){Array.isArray(r)||(r=r?[r]:[ZM]),i=void 0!==i?i:VM;var o=r.map((function(e){return t(e)})).filter((function(t){return!isNaN(t[e])&&!isNaN(t[n])}));o.length||(o=[t(ZM)]);var a=o.length,l=o.reduce((function(t,n){return t+n[e]}),0)/a,s=o.reduce((function(t,e){return t+e[n]}),0)/a,u=a,c;do{c=o[--u].h}while(isNaN(c)&&u>0);var f=0;return function e(){var n=++f*i,r;return Ps(t((c+n)%360,l,s)).hex()}}}var GM,$M,QM={hcl:XM(hu,"c","l"),hsl:XM(Ws,"s","l")};function JM(t,e){var n={},r=Kk(e).values(),i=t.categorical_palette,o=i.length;if(t.categorical_extend){var a=UM.rotation_angle,l,s=QM["hcl"](i,a);r.forEach((function(t,e){n[t]=e<o?i[e]:s()}))}else r.forEach((function(t,e){n[t]=i[e%o]}));t.categorical_custom_palette.split("\n").filter((function(t){return t})).forEach((function(t){var e=t.lastIndexOf(":");if(-1!==e){var r=t.slice(0,e).trim(),i=t.slice(e+1).trim();r&&i&&(n[r]=i)}}));var u=function(t){return n[t]};return u.domain=r.slice(),u.colors=r.map((function(t){return n[t]})),u.items=r.map((function(t){return{label:t,color:n[t]}})),u}function KM(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function tA(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var eA=Array.prototype,nA=eA.map,rA=eA.slice;function iA(t){return function(){return t}}function oA(t){return+t}var aA=[0,1];function lA(t){return t}function sA(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:iA(isNaN(e)?NaN:.5)}function uA(t){var e=t[0],n=t[t.length-1],r;return e>n&&(r=e,e=n,n=r),function(t){return Math.max(e,Math.min(n,t))}}function cA(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=sA(i,r),o=n(a,o)):(r=sA(r,i),o=n(o,a)),function(t){return o(r(t))}}function fA(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=sA(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=bx(t,e,1,r)-1;return o[n](i[n](e))}}function hA(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function dA(){var t=aA,e=aA,n=nw,r,i,o,a=lA,l,s,u;function c(){return l=Math.min(t.length,e.length)>2?fA:cA,s=u=null,f}function f(i){return isNaN(i=+i)?o:(s||(s=l(t.map(r),e,n)))(r(a(i)))}return f.invert=function(n){return a(i((u||(u=l(e,t.map(r),Gx)))(n)))},f.domain=function(e){return arguments.length?(t=nA.call(e,oA),a===lA||(a=uA(t)),c()):t.slice()},f.range=function(t){return arguments.length?(e=rA.call(t),c()):e.slice()},f.rangeRound=function(t){return e=rA.call(t),n=rw,c()},f.clamp=function(e){return arguments.length?(a=e?uA(t):lA,f):a!==lA},f.interpolate=function(t){return arguments.length?(n=t,c()):n},f.unknown=function(t){return arguments.length?(o=t,f):o},function(t,e){return r=t,i=e,c()}}function pA(t,e){return dA()(t,e)}function _A(t,e,n,r){var i=Tx(t,e,n),o;switch((r=Jw(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=dk(i,a))||(r.precision=o),uk(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=pk(i,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=hk(i))||(r.precision=o-2*("%"===r.type))}return sk(r)}function gA(t){var e=t.domain;return t.ticks=function(t){var n=e();return Ex(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return _A(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],l=r[o],s;return l<a&&(s=a,a=l,l=s,s=i,i=o,o=s),(s=zx(a,l,n))>0?s=zx(a=Math.floor(a/s)*s,l=Math.ceil(l/s)*s,n):s<0&&(s=zx(a=Math.ceil(a*s)/s,l=Math.floor(l*s)/s,n)),s>0?(r[i]=Math.floor(a/s)*s,r[o]=Math.ceil(l/s)*s,e(r)):s<0&&(r[i]=Math.ceil(a*s)/s,r[o]=Math.floor(l*s)/s,e(r)),t},t}function yA(){var t=pA(lA,lA);return t.copy=function(){return hA(t,yA())},KM.apply(t,arguments),gA(t)}function mA(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function vA(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function bA(t){return t<0?-t*t:t*t}function xA(t){var e=t(lA,lA),n=1;function r(){return 1===n?t(lA,lA):.5===n?t(vA,bA):t(mA(n),mA(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},gA(e)}function wA(){var t=xA(dA());return t.copy=function(){return hA(t,wA()).exponent(t.exponent())},KM.apply(t,arguments),t}function kA(){return wA.apply(null,arguments).exponent(.5)}function MA(){var t=[],e=[],n=[],r;function i(){var r=0,i=Math.max(1,e.length);for(n=new Array(i-1);++r<i;)n[r-1]=Nx(t,r/i);return o}function o(t){return isNaN(t=+t)?r:e[bx(n,t)]}return o.invertExtent=function(r){var i=e.indexOf(r);return i<0?[NaN,NaN]:[i>0?n[i-1]:t[0],i<n.length?n[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n=0,r=e.length,o;n<r;++n)null==(o=e[n])||isNaN(o=+o)||t.push(o);return t.sort(gx),i()},o.range=function(t){return arguments.length?(e=rA.call(t),i()):e.slice()},o.unknown=function(t){return arguments.length?(r=t,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return MA().domain(t).range(e).unknown(r)},KM.apply(o,arguments)}function AA(){var t=0,e=1,n=1,r=[.5],i=[0,1],o;function a(t){return t<=t?i[bx(r,t,0,n)]:o}function l(){var i=-1;for(r=new Array(n);++i<n;)r[i]=((i+1)*e-(i-n)*t)/(n+1);return a}return a.domain=function(n){return arguments.length?(t=+n[0],e=+n[1],l()):[t,e]},a.range=function(t){return arguments.length?(n=(i=rA.call(t)).length-1,l()):i.slice()},a.invertExtent=function(o){var a=i.indexOf(o);return a<0?[NaN,NaN]:a<1?[t,r[0]]:a>=n?[r[n-1],e]:[r[a-1],r[a]]},a.unknown=function(t){return arguments.length?(o=t,a):a},a.thresholds=function(){return r.slice()},a.copy=function(){return AA().domain([t,e]).range(i).unknown(o)},KM.apply(gA(a),arguments)}function SA(){var t=[.5],e=[0,1],n,r=1;function i(i){return i<=i?e[bx(t,i,0,r)]:n}return i.domain=function(n){return arguments.length?(t=rA.call(n),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(n){return arguments.length?(e=rA.call(n),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(n){var r=e.indexOf(n);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(n=t,i):n},i.copy=function(){return SA().domain(t).range(e).unknown(n)},KM.apply(i,arguments)}function CA(){var t=0,e=1,n,r,i,o,a=lA,l=!1,s;function u(t){return isNaN(t=+t)?s:a(0===i?.5:(t=(o(t)-n)*i,l?Math.max(0,Math.min(1,t)):t))}return u.domain=function(a){return arguments.length?(n=o(t=+a[0]),r=o(e=+a[1]),i=n===r?0:1/(r-n),u):[t,e]},u.clamp=function(t){return arguments.length?(l=!!t,u):l},u.interpolator=function(t){return arguments.length?(a=t,u):a},u.unknown=function(t){return arguments.length?(s=t,u):s},function(a){return o=a,n=a(t),r=a(e),i=n===r?0:1/(r-n),u}}function EA(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function zA(){var t=gA(CA()(lA));return t.copy=function(){return EA(t,zA())},tA.apply(t,arguments)}function TA(){var t=0,e=.5,n=1,r,i,o,a,l,s=lA,u,c=!1,f;function h(t){return isNaN(t=+t)?f:(t=.5+((t=+u(t))-i)*(t<i?a:l),s(c?Math.max(0,Math.min(1,t)):t))}return h.domain=function(s){return arguments.length?(r=u(t=+s[0]),i=u(e=+s[1]),o=u(n=+s[2]),a=r===i?0:.5/(i-r),l=i===o?0:.5/(o-i),h):[t,e,n]},h.clamp=function(t){return arguments.length?(c=!!t,h):c},h.interpolator=function(t){return arguments.length?(s=t,h):s},h.unknown=function(t){return arguments.length?(f=t,h):f},function(s){return u=s,r=s(t),i=s(e),o=s(n),a=r===i?0:.5/(i-r),l=i===o?0:.5/(o-i),h}}function NA(){var t=gA(TA()(lA));return t.copy=function(){return EA(t,NA())},tA.apply(t,arguments)}function jA(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function LA(t){return Yx(t[t.length-1])}var PA,OA=LA(new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(jA)),FA,DA=LA(new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(jA)),qA,RA=LA(new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(jA)),BA,HA=LA(new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(jA)),IA,UA=LA(new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(jA)),YA,WA=LA(new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(jA)),VA,ZA=LA(new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(jA)),XA,GA=LA(new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(jA)),$A,QA=LA(new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(jA)),JA,KA=LA(new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(jA)),tS,eS=LA(new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(jA)),nS,rS=LA(new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(jA)),iS,oS=LA(new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(jA)),aS,lS=LA(new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(jA)),sS,uS=LA(new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(jA)),cS,fS=LA(new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(jA)),hS,dS=LA(new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(jA)),pS,_S=LA(new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(jA)),gS,yS=LA(new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(jA)),mS,vS=LA(new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(jA)),bS,xS=LA(new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(jA)),wS,kS=LA(new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(jA)),MS,AS=LA(new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(jA)),SS,CS=LA(new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(jA)),ES,zS=LA(new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(jA)),TS,NS=LA(new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(jA)),jS,LS=LA(new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(jA)),PS=Tw(Pu(300,.5,0),Pu(-240,.5,1)),OS=Tw(Pu(-100,.75,.35),Pu(80,1.5,.8)),FS=Tw(Pu(260,.75,.35),Pu(80,1.5,.8));function DS(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}Pu();var qS=DS(jA("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),RS=DS(jA("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),BS=DS(jA("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),HS=DS(jA("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function IS(t,e){return t-e}function US(t,e){var n=e[0],r=e[e.length-1],i=AA().domain([n,r]),o=Math.floor(t.bin_count),a;return i.range(Mx(o)),i.thresholds()}function YS(t,e,n){var r=MA().domain(n),i=Math.floor(t.bin_count),o;return r.range(Mx(i)),r.quantiles()}function WS(t){var e;return t.bin_thresholds.split(";").map(parseFloat).filter((function(t){return!isNaN(t)&&null!==t})).sort(IS)}function VS(t,e,n){var r;return r="fixed"==t.bin_mode?US(t,e):"quantile"==t.bin_mode?YS(t,e,n):WS(t)}function ZS(t,e,n){var r=[];if(0===e.length)return[.5*(t+n)];r.push(.5*(t+e[0]));for(var i=0;i<e.length-1;i++)r.push(.5*(e[i]+e[i+1]));return r.push(.5*(n+e[e.length-1])),r}function XS(t,e){var n,r=.001;return t.forEach((function(t,i){Math.abs(t-e)<r&&(n=i)})),n}function GS(t,e){var n=0;return t.forEach((function(t){t<e&&n++})),n}function $S(t,e,n,r,i){for(var o=1+e;o<=t+e;o++)i.push(r(n(o)))}function QS(t,e,n){var r=e.length,i=yA(),o=[];if(1===r)o.push(n(.5));else if(2===t.length)i.domain([1,r]).range([0,1]),$S(r,0,i,n,o);else if(2===r)o.push(n(0)),o.push(n(1));else{var a=t[1],l,s,u=XS(e,a);u?(l=u,s=r-u-1,i.domain([1,l+1]).range([0,.5]),$S(l,0,i,n,o),o.push(n(.5)),i.domain([1,s+1]).range([.5,1]),$S(s,1,i,n,o)):(s=r-(l=GS(e,a)),i.domain([1,l+1]).range([0,.5]),$S(l,0,i,n,o),i.domain([1,s+1]).range([.5,1]),$S(s,1,i,n,o))}return o}function JS(t,e,n,r){var i=VS(t,e,n),o,a,l=ZS(e[0],i,e[e.length-1]),s=QS(e,l,r),u;(u="quantile"==t.bin_mode?MA().domain(n):SA().domain(i)).range(s);var c=function(t){return isNaN(t)||null===t?null:u(t)};return c.domain=Object.freeze(e),c.thresholds=Object.freeze(i),c.centers=Object.freeze(l),c}function KS(t){var e;return Array.isArray(t)?kx(t):[0,1]}var tC=Object.freeze(["#efeca4","#e9e28f","#dccf64","#e3b23c","#e49547","#e37746","#dc5b36","#cb4144","#bb2244","#972545","#6a2c4f"]),eC=Object.freeze({Blues:kS,BuGn:KA,BuPu:eS,Carrots:Yx(tC),Cool:FS,CubehelixDefault:PS,GnBu:rS,Greens:AS,Greys:CS,Inferno:BS,Magma:RS,Oranges:LS,OrRd:oS,Plasma:HS,PuBu:uS,PuBuGn:lS,PuRd:fS,Purples:zS,RdPu:dS,Reds:NS,Viridis:qS,Warm:OS,YlGn:yS,YlGnBu:_S,YlOrBr:vS,YlOrRd:xS}),nC={hcl:Ew,hsl:Aw,lab:Sw,rgb:Ix};function rC(t){var e=t.sequential_color_space,n=t.sequential_custom_min,r=t.sequential_custom_max;return nC[e](n,r)}function iC(t,e){var n=t.sequential_custom_domain?[t.sequential_domain_min,t.sequential_domain_max]:KS(e),r=function(e){var n=eC[t.sequential_palette]||rC(t);return t.sequential_reverse?n(1-e):n(e)};if(t.binning)return JS(t,n,e,r);var i=zA(r).domain(n),o=function(t){return isNaN(t)||null===t?null:i(t)};return o.domain=Object.freeze(n),o}var oC=Object.freeze({BrBG:OA,PiYG:RA,PRGn:DA,PuOr:HA,RdBu:UA,RdGy:WA,RdYlBu:ZA,RdYlGn:GA,Spectral:QA}),aC={hcl:Ew,hsl:Aw,lab:Sw,rgb:Ix};function lC(t){var e=t.diverging_color_space,n=t.diverging_custom_min,r=t.diverging_custom_mid,i=t.diverging_custom_max;return Nw(aC[e],[n,r,i])}function sC(t,e){var n=KS(e),r=n[0]<0&&n[1]>0?0:(n[0]+n[1])/2,i=[n[0],r,n[1]];t.diverging_custom_domain&&(i=[t.diverging_domain_min,t.diverging_domain_mid,t.diverging_domain_max]);var o=function(e){var n=oC[t.diverging_palette]||lC(t);return t.diverging_reverse?n(1-e):n(e)};if(t.binning)return JS(t,i,e,o);var a=NA(o).domain(i),l=function(t){return isNaN(t)||null===t?null:a(t)};return l.domain=Object.freeze(i),l.midpoint=t.diverging_custom_domain?t.diverging_domain_mid:r,l}function uC(t){var e=null;for(var n in UM)void 0===t[n]&&(t[n]=UM[n]);var r=YM,i=function(n){return"number"!=typeof n[0]?e=JM(t,n):"sequential"===t.numeric_type?e=iC(t,n):"diverging"===t.numeric_type&&(e=sC(t,n)),a.thresholds=e.thresholds,a.centers=e.centers,a.midpoint=e.midpoint,a.domain=e.domain,a.colors=e.colors,a.items=e.items,this},o=function(t){return void 0===t?r:(r="default"===t?YM:t,this)},a=function(t){return e&&e(t)||r};return{getColor:a,updateColorScale:i,fallback:o}}var cC=uC(jc.color),fC;function hC(){if(CC(jc.shade_by)){var t=zC(jc.shade_by);fC=LM.map((e=>+e.numericColumns[t])).filter((t=>!isNaN(t))),cC.updateColorScale(fC)}}function dC(){if(!CC(jc.shade_by)){var t=zC(jc.shade_by);fC=[],"none"!==jc.shade_by.type&&LM.forEach((function(e){var n=e.categoryColumns[t];""!==n&&fC.push(n)})),(fC=TM(fC)).sort(),cC.fallback(jc.default_color),cC.updateColorScale(fC)}}for(var pC=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹÐ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"OE",letters:"Œ"},{base:"oe",letters:"œ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],_C={},gC=0;gC<pC.length;gC++)for(var yC=pC[gC].letters,mC=0;mC<yC.length;mC++)_C[yC[mC]]=pC[gC].base;function vC(t){return t.replace(/[^\u0020-\u007E]/g,(function(t){return _C[t]||t}))}var bC=/^M0,-(\d+\.?\d*) a\1,\1 0 0 1 0,(\d+\.?\d*) a\1,\1 0 0 1 0,-\2z$/,xC=/^M 0 -(\d+\.?\d*) a \1 \1 0 0 1 0 (\d+\.?\d*) a \1 \1 0 0 1 0 -\2 Z$/;function wC(t){Flourish.warn?Flourish.warn(t):console.warn(t)}function kC(t){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}function MC(t){var e=!0;return""===t&&(e=!1),isNaN(t)&&(e=!1),e}function AC(t,e){return!(!MC(t)||+t<-90||+t>90)&&!(!MC(e)||+e<-180||+e>180)}function SC(t){var e=["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","GeometryCollection"];if(!t)return!1;if(!t.type)return!1;if(-1===e.indexOf(t.type))return!1;if("GeometryCollection"!==t.type){if(!t.coordinates)return!1;if(!Array.isArray(t.coordinates))return!1}return!0}function CC(t){return"numeric"===t.type}function EC(t){return"categorical"===t.type}function zC(t){var e;if("numeric"===t.type&&t.aggregation_type&&"none"!==t.aggregation_type&&LM.is_aggregated)return e=zg(LM.aggregation_meta,(function(e){return e.original_index===t.index&&e.type===t.aggregation_type}));if("categorical"===t.type&&LM.is_aggregated)return e=zg(LM.nest_columns,(function(e){return e.i===t.index}));if("numeric"===t.type){var n=jM.indexOf(t.aggregation_type)>-1;LM.is_aggregated&&!n&&(console.warn("No aggregation type specified in column but data is aggregated"),console.trace(),console.log(t)),NM()||LM.is_aggregated||!n||(console.warn("Aggregation type specified in column but data isn't aggregated"),console.trace(),console.log(t))}return t.index}function TC(t){return t.index}function NC(t){return t.type}function jC(t){var e=zC(t),n;return-1===e?"":("numeric"===t.type?n=LM.column_names.numericColumns[e]:"categorical"===t.type&&(n=LM.column_names.categoryColumns[e]),t.aggregation_type&&"none"!==t.aggregation_type&&"count"!==t.aggregation_type&&(n+=" ("+t.aggregation_type+")"),n)}function LC(t){for(var e=0;e<LM.length;e++)if(LM[e].__flourish_id===t)return LM[e];return null}function PC(t){for(var e="",n=0;n<t.length;n++)t[n].length>e.length&&(e=t[n]);return e}function OC(t){for(var e=[],n={},r=0;r<t.length;r++)Object.hasOwnProperty.call(n,t[r])||(n[t[r]]=!0,e.push(t[r]));return e}function FC(t){return bC.test(t)||xC.test(t)}function DC(t,e){var n=t.match(bC)||t.match(xC);if(!n)return"M0,0 L0,0 z";var r=+n[1],i=2*Math.PI,o=Math.ceil(i*r/e);o=Math.max(20,o);for(var a="",l=0;l<o;l++){var s=l/o*i,u,c;a+=0===l?"M":"L",a+=[r*Math.sin(s),-r*Math.cos(s)]+" "}return a+="z"}function qC(t){var e=CC(jc.shade_by),n=EC(jc.shade_by),r=zC(jc.shade_by),i;return t._data.feature_without_data?jc.geo_region_default_color:e?MC(i=t._data.numericColumns[r])?cC.getColor(i):jc.invalid_color:n?""===(i=t._data.categoryColumns[r])?jc.invalid_color:cC.getColor(i):jc.default_color}function RC(t){return{r:(258048&t)>>10,g:(4032&t)>>4,b:(63&t)<<2}}function BC(t,e,n){let r;return((t=Math.ceil((t-2)/4))<<12)+((e=Math.ceil((e-2)/4))<<6)+(n=Math.ceil((n-2)/4))}function HC(t){var e=Ps(t);return Math.round(299*e.r+587*e.g+114*e.b)/1e3>195}function IC(t){return t?HC(t)?"#333333":"#FFFFFF":"#888888"}function UC(t){return vC(t).toLowerCase().replace(/&/g,"and").replace(/[^\p{Letter}\p{Number}]/gu,"")}function YC(t,e){var n=Ps(t);return n&&Number.isFinite(e)&&(n.opacity=e),n?n.toString():null}function WC(t){var e={};t.forEach((function(t){e[t.id]={x:t.x,y:t.y}})),LM.forEach((function(t){var n=e[t.__flourish_id];n?t.__layout_data=n:console.log("copyLayoutDataToProcessedData: no matching datum in layout_data",t)}))}function VC(){var t;if(void 0!==Ik.data.column_names.filter&&!1===jc.filter_control_include_all&&jc.filter===jc.filter_control_all_text){var e=Ik.data.map((function(t){return t.filter}));jc.controls_dropdown_sort&&e.sort(),jc.filter=e[0]}}function ZC(t){"count"===jc[t].aggregation_type&&(jc[t].type="none"),jc[t].aggregation_type="none"}function XC(t){"numeric"===jc[t].type&&"none"===jc[t].aggregation_type&&(jc[t].aggregation_type="mean")}function GC(){var t=["position_by_1","position_by_2","size_by","shade_by"];"none"===jc.aggregate_by.type?t.forEach(ZC):t.forEach(XC)}function $C(){return 1e3*jc.transition_duration}var QC=JC;function JC(t,e){var n=t&&t.type,r;if("FeatureCollection"===n)for(r=0;r<t.features.length;r++)JC(t.features[r],e);else if("GeometryCollection"===n)for(r=0;r<t.geometries.length;r++)JC(t.geometries[r],e);else if("Feature"===n)JC(t.geometry,e);else if("Polygon"===n)KC(t.coordinates,e);else if("MultiPolygon"===n)for(r=0;r<t.coordinates.length;r++)KC(t.coordinates[r],e);return t}function KC(t,e){if(0!==t.length){tE(t[0],e);for(var n=1;n<t.length;n++)tE(t[n],!e)}}function tE(t,e){for(var n=0,r=0,i=0,o=t.length,a=o-1;i<o;a=i++){var l=(t[i][0]-t[a][0])*(t[a][1]+t[i][1]),s=n+l;r+=Math.abs(n)>=Math.abs(l)?n-s+l:l-s+n,n=s}n+r>=0!=!!e&&t.reverse()}function eE(){return void 0!==Ik.data.column_names.geo_region_key&&void 0!==Ik.geo_regions&&Ik.geo_regions.column_names.shapes.length>0}function nE(){return void 0!==Ik.data.column_names.geo_point_key&&void 0!==Ik.geo_points&&void 0!==Ik.geo_points.column_names.lat&&void 0!==Ik.geo_points.column_names.lon}function rE(){for(var t=0;t<Ik.data.length;t++){var e;if(Ik.data[t].geo_point)return!0}return!1}function iE(){for(var t=0;t<Ik.data.length;t++){var e=Ik.data[t];if(e.geo_region||e.geo_point)return!0}return!1}function oE(t){return"Feature"===t.type?t:{type:"Feature",geometry:t}}function aE(t,e){if(eE()){var n={},r=0,i=0,o;e.forEach((function(t){var e=t.shapes[jc.geo_shapes_index];if(e&&""!==e){try{o=JSON.parse(e)}catch(t){r++,console.error("Invalid JSON in Geo Regions sheet",e)}o&&SC(o)&&(n[t.geo_region_key]=o)}})),r>0&&wC("Invalid JSON in Geo Regions sheet"),t.forEach((function(t){var e=t.geo_region_key;n[e]?t.geo_region=oE(n[e]):(t.geo_region=null,jc.show_all_geojson_regions||(i++,console.warn("No geojson found for "+e)))})),i>0&&wC("No geojson found for "+i+" items")}}function lE(t,e){if(nE()){var n={},r=0;e.forEach((function(t){AC(t.lat,t.lon)&&(n[t.geo_point_key]={lat:+t.lat,lon:+t.lon})})),t.forEach((function(t){var e=t.geo_point_key;n[e]?(t.geo_point=n[e],t.geo_region=null):(t.geo_point=null,t.geo_region=t.geo_region||null,r++,console.warn("No lat/lon found for "+e))})),r>0&&wC("No lat/lon found for "+r+" items")}}function sE(t,e,n){aE(t,e),lE(t,n)}function uE(t){if(jc.show_all_geojson_regions&&NM()&&Ik.geo_regions&&0!==!Ik.geo_regions.column_names.shapes.length&&iE()){var e={};t.forEach((function(t){t.geo_region_key&&(e[t.geo_region_key]=!0)})),Ik.geo_regions.forEach((function(n,r){var i=n.shapes[jc.geo_shapes_index];if(!(""===i||n.geo_region_key&&e[n.geo_region_key])){var o;try{o=JSON.parse(i)}catch(t){console.log("Invalid JSON in Geo Regions sheet")}o&&SC(o)&&t.push({__flourish_id:"unjoined-geo-feature-"+(n.geo_region_key||r),geo_region:oE(o),categoryColumns:[],numericColumns:[],label:"",filter:"",feature_without_data:!0})}}))}}function cE(t){t.forEach((function(t){t.geo_region&&(t.geo_region=QC(t.geo_region,!0))}))}function fE(t,e){return Object.keys(e).forEach((function(n){void 0===t[n]&&(t[n]=e[n])})),t}var hE=Object.freeze({axis_position:"bottom",y_axis_position:"",numeric_scale_type:"linear",nice:!0,flip:!1,zero_axis:"auto",linear_min:null,linear_max:null,log_min:null,log_max:null,datetime_min:"",datetime_max:"",line_visible:!0,line_and_tick_color:"#eeeeee",line_and_tick_width:.1,tick_side:"out",tick_mode:"auto",tick_number:5,tick_custom:"",tick_length:.5,tick_padding:.25,edge_padding:50,tick_label_position:"default",tick_label_size:.9,tick_label_color:"#aaaaaa",tick_label_angle:"45",tick_label_weight:"normal",tick_label_space_mode:"auto",tick_label_space:10,tick_label_max_lines:2,tick_label_line_height:1.1,gridlines_visible:!1,gridline_color:"#eeeeee",gridline_width:.1,gridline_style:"solid",gridline_category_dividers:!1,gridline_category_dividers_extend:!1,title_mode:"auto",title:"",title_color:"#aaaaaa",title_size:1.1,title_weight:"normal",title_padding:.6}),dE=Object.freeze({axis_visible:!0,numeric_scale_type:"linear",nice:!0,flip:!1,zero_axis:"auto",linear_min:null,linear_max:null,log_min:null,log_max:null,datetime_min:"",datetime_max:"",line_visible:!0,line_and_tick_color:"#eeeeee",line_and_tick_width:.1,tick_side:"out",tick_mode:"auto",tick_number:5,tick_custom:"",tick_length:.5,tick_padding:.25,edge_padding:50,tick_label_position:"default",tick_label_size:.9,tick_label_color:"#aaaaaa",tick_label_angle:"0",tick_label_weight:"normal",tick_label_space_mode:"auto",tick_label_space:10,tick_label_max_lines:2,tick_label_line_height:1.1,gridlines_visible:!0,gridline_color:"#eeeeee",gridline_width:.1,gridline_style:"solid",gridline_category_dividers:!1,gridline_category_dividers_extend:!1,title_mode:"auto",title:"",title_position:"side",title_color:"#aaaaaa",title_size:1.1,title_weight:"normal",title_padding:.6}),pE=Object.freeze(fE({axis_visible:!1},dE)),_E=Object.freeze({background_color_enabled:!1,background_color:"#f5f5f5",background_image_enabled:!1,background_image_src:"",background_image_size:"stretch",background_image_position:"xMidYMid"});function gE(t,e,n){t[e]||(t[e]={}),fE(t[e],n)}function yE(t){t=t||{};var e=gE.bind(null,t);return e("x",hE),e("y",dE),e("y2",pE),e("background",_E),t}var mE="http://www.w3.org/1999/xhtml",vE={svg:"http://www.w3.org/2000/svg",xhtml:mE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function bE(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),vE.hasOwnProperty(e)?{space:vE[e],local:t}:t}function xE(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===mE&&e.documentElement.namespaceURI===mE?e.createElement(t):e.createElementNS(n,t)}}function wE(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function kE(t){var e=bE(t);return(e.local?wE:xE)(e)}function ME(){}function AE(t){return null==t?ME:function(){return this.querySelector(t)}}function SE(t){"function"!=typeof t&&(t=AE(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,l=r[i]=new Array(a),s,u,c=0;c<a;++c)(s=o[c])&&(u=t.call(s,s.__data__,c,o))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new dT(r,this._parents)}function CE(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function EE(){return[]}function zE(t){return null==t?EE:function(){return this.querySelectorAll(t)}}function TE(t){return function(){var e=t.apply(this,arguments);return null==e?[]:CE(e)}}function NE(t){t="function"==typeof t?TE(t):zE(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a=e[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(r.push(t.call(s,s.__data__,u,a)),i.push(s));return new dT(r,i)}function jE(t){return function(){return this.matches(t)}}function LE(t){return function(e){return e.matches(t)}}var PE=Array.prototype.find;function OE(t){return function(){return PE.call(this.children,t)}}function FE(){return this.firstElementChild}function DE(t){return this.select(null==t?FE:OE("function"==typeof t?t:LE(t)))}var qE=Array.prototype.filter;function RE(){return this.children}function BE(t){return function(){return qE.call(this.children,t)}}function HE(t){return this.selectAll(null==t?RE:BE("function"==typeof t?t:LE(t)))}function IE(t){"function"!=typeof t&&(t=jE(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new dT(r,this._parents)}function UE(t){return new Array(t.length)}function YE(){return new dT(this._enter||this._groups.map(UE),this._parents)}function WE(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function VE(t){return function(){return t}}function ZE(t,e,n,r,i,o){for(var a=0,l,s=e.length,u=o.length;a<u;++a)(l=e[a])?(l.__data__=o[a],r[a]=l):n[a]=new WE(t,o[a]);for(;a<s;++a)(l=e[a])&&(i[a]=l)}function XE(t,e,n,r,i,o,a){var l,s,u=new Map,c=e.length,f=o.length,h=new Array(c),d;for(l=0;l<c;++l)(s=e[l])&&(h[l]=d=a.call(s,s.__data__,l,e)+"",u.has(d)?i[l]=s:u.set(d,s));for(l=0;l<f;++l)d=a.call(t,o[l],l,o)+"",(s=u.get(d))?(r[l]=s,s.__data__=o[l],u.delete(d)):n[l]=new WE(t,o[l]);for(l=0;l<c;++l)(s=e[l])&&u.get(h[l])===s&&(i[l]=s)}function GE(t){return t.__data__}function $E(t,e){if(!arguments.length)return Array.from(this,GE);var n=e?XE:ZE,r=this._parents,i=this._groups;"function"!=typeof t&&(t=VE(t));for(var o=i.length,a=new Array(o),l=new Array(o),s=new Array(o),u=0;u<o;++u){var c=r[u],f=i[u],h=f.length,d=CE(t.call(c,c&&c.__data__,u,r)),p=d.length,_=l[u]=new Array(p),g=a[u]=new Array(p),y;n(c,f,_,g,s[u]=new Array(h),d,e);for(var m=0,v=0,b,x;m<p;++m)if(b=_[m]){for(m>=v&&(v=m+1);!(x=g[v])&&++v<p;);b._next=x||null}}return(a=new dT(a,r))._enter=l,a._exit=s,a}function QE(){return new dT(this._exit||this._groups.map(UE),this._parents)}function JE(t,e,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i}function KE(t){if(!(t instanceof dT))throw new Error("invalid merge");for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var s=e[l],u=n[l],c=s.length,f=a[l]=new Array(c),h,d=0;d<c;++d)(h=s[d]||u[d])&&(f[d]=h);for(;l<r;++l)a[l]=e[l];return new dT(a,this._parents)}function tz(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,o=r[i],a;--i>=0;)(a=r[i])&&(o&&4^a.compareDocumentPosition(o)&&o.parentNode.insertBefore(a,o),o=a);return this}function ez(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=nz);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a=n[o],l=a.length,s=i[o]=new Array(l),u,c=0;c<l;++c)(u=a[c])&&(s[c]=u);s.sort(e)}return new dT(i,this._parents).order()}function nz(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function rz(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function iz(){return Array.from(this)}function oz(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null}function az(){let t=0;for(const e of this)++t;return t}function lz(){return!this.node()}function sz(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],o=0,a=i.length,l;o<a;++o)(l=i[o])&&t.call(l,l.__data__,o,i);return this}function uz(t){return function(){this.removeAttribute(t)}}function cz(t){return function(){this.removeAttributeNS(t.space,t.local)}}function fz(t,e){return function(){this.setAttribute(t,e)}}function hz(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function dz(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function pz(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function _z(t,e){var n=bE(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?cz:uz:"function"==typeof e?n.local?pz:dz:n.local?hz:fz)(n,e))}function gz(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function yz(t){return function(){this.style.removeProperty(t)}}function mz(t,e,n){return function(){this.style.setProperty(t,e,n)}}function vz(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function bz(t,e,n){return arguments.length>1?this.each((null==e?yz:"function"==typeof e?vz:mz)(t,e,null==n?"":n)):xz(this.node(),t)}function xz(t,e){return t.style.getPropertyValue(e)||gz(t).getComputedStyle(t,null).getPropertyValue(e)}function wz(t){return function(){delete this[t]}}function kz(t,e){return function(){this[t]=e}}function Mz(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function Az(t,e){return arguments.length>1?this.each((null==e?wz:"function"==typeof e?Mz:kz)(t,e)):this.node()[t]}function Sz(t){return t.trim().split(/^|\s+/)}function Cz(t){return t.classList||new Ez(t)}function Ez(t){this._node=t,this._names=Sz(t.getAttribute("class")||"")}function zz(t,e){for(var n=Cz(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Tz(t,e){for(var n=Cz(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Nz(t){return function(){zz(this,t)}}function jz(t){return function(){Tz(this,t)}}function Lz(t,e){return function(){(e.apply(this,arguments)?zz:Tz)(this,t)}}function Pz(t,e){var n=Sz(t+"");if(arguments.length<2){for(var r=Cz(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?Lz:e?Nz:jz)(n,e))}function Oz(){this.textContent=""}function Fz(t){return function(){this.textContent=t}}function Dz(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function qz(t){return arguments.length?this.each(null==t?Oz:("function"==typeof t?Dz:Fz)(t)):this.node().textContent}function Rz(){this.innerHTML=""}function Bz(t){return function(){this.innerHTML=t}}function Hz(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function Iz(t){return arguments.length?this.each(null==t?Rz:("function"==typeof t?Hz:Bz)(t)):this.node().innerHTML}function Uz(){this.nextSibling&&this.parentNode.appendChild(this)}function Yz(){return this.each(Uz)}function Wz(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Vz(){return this.each(Wz)}function Zz(t){var e="function"==typeof t?t:kE(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))}function Xz(){return null}function Gz(t,e){var n="function"==typeof t?t:kE(t),r=null==e?Xz:"function"==typeof e?e:AE(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))}function $z(){var t=this.parentNode;t&&t.removeChild(this)}function Qz(){return this.each($z)}function Jz(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Kz(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function tT(t){return this.select(t?Kz:Jz)}function eT(t){return arguments.length?this.property("__data__",t):this.node().__data__}function nT(t){return function(e){t.call(this,e,this.__data__)}}function rT(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function iT(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,o;n<i;++n)o=e[n],t.type&&o.type!==t.type||o.name!==t.name?e[++r]=o:this.removeEventListener(o.type,o.listener,o.options);++r?e.length=r:delete this.__on}}}function oT(t,e,n){return function(){var r=this.__on,i,o=nT(e);if(r)for(var a=0,l=r.length;a<l;++a)if((i=r[a]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=o,i.options=n),void(i.value=e);this.addEventListener(t.type,o,n),i={type:t.type,name:t.name,value:e,listener:o,options:n},r?r.push(i):this.__on=[i]}}function aT(t,e,n){var r=rT(t+""),i,o=r.length,a;if(!(arguments.length<2)){for(l=e?oT:iT,i=0;i<o;++i)this.each(l(r[i],e,n));return this}var l=this.node().__on;if(l)for(var s=0,u=l.length,c;s<u;++s)for(i=0,c=l[s];i<o;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}function lT(t,e,n){var r=gz(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function sT(t,e){return function(){return lT(this,t,e)}}function uT(t,e){return function(){return lT(this,t,e.apply(this,arguments))}}function cT(t,e){return this.each(("function"==typeof e?uT:sT)(t,e))}function*fT(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length,a;i<o;++i)(a=r[i])&&(yield a)}WE.prototype={constructor:WE,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}},Ez.prototype={add:function(t){var e;this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var hT=[null];function dT(t,e){this._groups=t,this._parents=e}function pT(){return new dT([[document.documentElement]],hT)}function _T(){return this}function gT(t){return"string"==typeof t?new dT([[document.querySelector(t)]],[document.documentElement]):new dT([[t]],hT)}function yT(t){return"svg"===t.tagName.toLowerCase()}function mT(t){var e,n=(e=t&&t.select&&t.selectAll?gT(t.node()):gT(t)).node();if(!n)throw new Error("Chart layout instance must have a target");var r=yT(n),i;return{container:e,getSvg:function(){if(r)return e;for(var t=n.parentNode;t&&!yT(t);)t=t.parentNode;if(!yT(t))throw new Error("target must be an SVG or a descendant of an SVG");return gT(t)}}}function vT(t){t.append("rect").attr("class","fl-chart-debug-rectangle").attr("x",0).attr("y",0).style("stroke-width","1px").style("fill","none").style("display","none")}function bT(t){var e=t.append("g").attr("class","fl-chart-background");e.append("rect").attr("class","fl-chart-fill"),e.append("image").attr("class","fl-chart-image"),e.append("rect").attr("class","fl-chart-interaction").style("opacity",0)}function xT(t){var e=t.append("g").attr("class","fl-gridlines").style("pointer-events","none");e.append("g").attr("class","fl-gridlines-vertical"),e.append("g").attr("class","fl-gridlines-horizontal")}function wT(t){var e=t.append("g").attr("class","fl-axes"),n=e.append("g").attr("class","fl-x-axes"),r=e.append("g").attr("class","fl-y-axes"),i=n.append("g").attr("class","fl-axis fl-x-axis fl-bottom-axis");i.append("g").attr("class","fl-axis-line"),i.append("g").attr("class","fl-axis-ticks"),i.append("g").attr("class","fl-axis-title");var o=n.append("g").attr("class","fl-axis fl-x-axis fl-top-axis");o.append("g").attr("class","fl-axis-line"),o.append("g").attr("class","fl-axis-ticks"),o.append("g").attr("class","fl-axis-title");var a=r.append("g").attr("class","fl-axis fl-y-axis fl-left-axis");a.append("g").attr("class","fl-axis-line"),a.append("g").attr("class","fl-axis-ticks"),a.append("g").attr("class","fl-axis-title");var l=r.append("g").attr("class","fl-axis fl-y-axis fl-right-axis");l.append("g").attr("class","fl-axis-line"),l.append("g").attr("class","fl-axis-ticks"),l.append("g").attr("class","fl-axis-title")}function kT(t){var e=t.container.append("g").attr("class","fl-chart");return vT(e),e.append("clipPath").attr("class","fl-data-clip-path").append("rect"),e.append("clipPath").attr("class","fl-grid-clip-path").append("rect"),bT(e),e.append("g").attr("class","fl-data-background"),xT(e),wT(e),e.append("g").attr("class","fl-data-foreground"),e}dT.prototype=pT.prototype={constructor:dT,select:SE,selectAll:NE,selectChild:DE,selectChildren:HE,filter:IE,data:$E,enter:YE,exit:QE,join:JE,merge:KE,selection:_T,order:tz,sort:ez,call:rz,nodes:iz,node:oz,size:az,empty:lz,each:sz,attr:_z,style:bz,property:Az,classed:Pz,text:qz,html:Iz,raise:Yz,lower:Vz,append:Zz,insert:Gz,remove:Qz,clone:tT,datum:eT,on:aT,dispatch:cT,[Symbol.iterator]:fT};var MT=0;function AT(t){var e="fl-chart-layout-"+MT++;return function(n){return void 0===n?e:(e=n,t)}}function ST(t){let e=!1;return function(n){return void 0===n?e:(e=!!n,t)}}function CT(t){let e="red";return function(n){return void 0===n?e:(e=n,t)}}var ET=Object.freeze({left:!0,top:!0,right:!0,bottom:!0}),zT=Object.freeze({left:!1,top:!1,right:!1,bottom:!1});function TT(t){var e=ET;return function(n){return void 0===n?e:(e=n?"object"!=typeof n?ET:Object.freeze({left:!!n.left,top:!!n.top,right:!!n.right,bottom:!!n.bottom}):zT,t)}}var NT={value:()=>{}};function jT(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new LT(n)}function LT(t){this._=t}function PT(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function OT(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function FT(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=NT,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}LT.prototype=jT.prototype={constructor:LT,on:function(t,e){var n=this._,r=PT(t+"",n),i,o=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=FT(n[i],t.name,e);else if(null==e)for(i in n)n[i]=FT(n[i],t.name,null);return this}for(;++o<a;)if((i=(t=r[o]).type)&&(i=OT(n[i],t.name)))return i},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new LT(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,i=(o=this._[t]).length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var DT=0,qT=0,RT=0,BT=1e3,HT,IT,UT=0,YT=0,WT=0,VT="object"==typeof performance&&performance.now?performance:Date,ZT="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function XT(){return YT||(ZT(GT),YT=VT.now()+WT)}function GT(){YT=0}function $T(){this._call=this._time=this._next=null}function QT(t,e,n){var r=new $T;return r.restart(t,e,n),r}function JT(){XT(),++DT;for(var t=HT,e;t;)(e=YT-t._time)>=0&&t._call.call(null,e),t=t._next;--DT}function KT(){YT=(UT=VT.now())+WT,DT=qT=0;try{JT()}finally{DT=0,eN(),YT=0}}function tN(){var t=VT.now(),e=t-UT;e>BT&&(WT-=e,UT=t)}function eN(){for(var t,e=HT,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:HT=n);IT=t,nN(r)}function nN(t){var e;DT||(qT&&(qT=clearTimeout(qT)),t-YT>24?(t<1/0&&(qT=setTimeout(KT,t-VT.now()-WT)),RT&&(RT=clearInterval(RT))):(RT||(UT=VT.now(),RT=setInterval(tN,BT)),DT=1,ZT(KT)))}function rN(t,e,n){var r=new $T;return e=null==e?0:+e,r.restart((function(n){r.stop(),t(n+e)}),e,n),r}$T.prototype=QT.prototype={constructor:$T,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?XT():+n)+(null==e?0:+e),this._next||IT===this||(IT?IT._next=this:HT=this,IT=this),this._call=t,this._time=n,nN()},stop:function(){this._call&&(this._call=null,this._time=1/0,nN())}};var iN=jT("start","end","cancel","interrupt"),oN=[],aN=0,lN=1,sN=2,uN=3,cN=4,fN=5,hN=6;function dN(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};yN(t,n,{name:e,index:r,group:i,on:iN,tween:oN,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:aN})}function pN(t,e){var n=gN(t,e);if(n.state>aN)throw new Error("too late; already scheduled");return n}function _N(t,e){var n=gN(t,e);if(n.state>uN)throw new Error("too late; already running");return n}function gN(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function yN(t,e,n){var r=t.__transition,i;function o(t){n.state=lN,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var u,c,f,h;if(n.state!==lN)return s();for(u in r)if((h=r[u]).name===n.name){if(h.state===uN)return rN(a);h.state===cN?(h.state=hN,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete r[u]):+u<e&&(h.state=hN,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete r[u])}if(rN((function(){n.state===uN&&(n.state=cN,n.timer.restart(l,n.delay,n.time),l(o))})),n.state=sN,n.on.call("start",t,t.__data__,n.index,n.group),n.state===sN){for(n.state=uN,i=new Array(f=n.tween.length),u=0,c=-1;u<f;++u)(h=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=h);i.length=c+1}}function l(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=fN,1),o=-1,a=i.length;++o<a;)i[o].call(t,r);n.state===fN&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var i in n.state=hN,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=QT(o,0,n.time)}function mN(t,e){var n=t.__transition,r,i,o=!0,a;if(n){for(a in e=null==e?null:e+"",n)(r=n[a]).name===e?(i=r.state>sN&&r.state<fN,r.state=hN,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]):o=!1;o&&delete t.__transition}}function vN(t){return this.each((function(){mN(this,t)}))}function bN(t,e){var n,r;return function(){var i=_N(this,t),o=i.tween;if(o!==n)for(var a=0,l=(r=n=o).length;a<l;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function xN(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=_N(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var l={name:e,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===e){i[s]=l;break}s===u&&i.push(l)}o.tween=i}}function wN(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=gN(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((null==e?bN:xN)(n,t,e))}function kN(t,e,n){var r=t._id;return t.each((function(){var t=_N(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return gN(t,r).value[e]}}function MN(t,e){var n;return("number"==typeof e?Gx:e instanceof Ps?Ix:(n=Ps(e))?(e=n,Ix):ew)(t,e)}function AN(t){return function(){this.removeAttribute(t)}}function SN(t){return function(){this.removeAttributeNS(t.space,t.local)}}function CN(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function EN(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function zN(t,e,n){var r,i,o;return function(){var a,l=n(this),s;if(null!=l)return(a=this.getAttribute(t))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l));this.removeAttribute(t)}}function TN(t,e,n){var r,i,o;return function(){var a,l=n(this),s;if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l));this.removeAttributeNS(t.space,t.local)}}function NN(t,e){var n=bE(t),r="transform"===n?_w:MN;return this.attrTween(t,"function"==typeof e?(n.local?TN:zN)(n,r,kN(this,"attr."+t,e)):null==e?(n.local?SN:AN)(n):(n.local?EN:CN)(n,r,e))}function jN(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function LN(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function PN(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&LN(t,i)),n}return i._value=e,i}function ON(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&jN(t,i)),n}return i._value=e,i}function FN(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=bE(t);return this.tween(n,(r.local?PN:ON)(r,e))}function DN(t,e){return function(){pN(this,t).delay=+e.apply(this,arguments)}}function qN(t,e){return e=+e,function(){pN(this,t).delay=e}}function RN(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?DN:qN)(e,t)):gN(this.node(),e).delay}function BN(t,e){return function(){_N(this,t).duration=+e.apply(this,arguments)}}function HN(t,e){return e=+e,function(){_N(this,t).duration=e}}function IN(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?BN:HN)(e,t)):gN(this.node(),e).duration}function UN(t,e){if("function"!=typeof e)throw new Error;return function(){_N(this,t).ease=e}}function YN(t){var e=this._id;return arguments.length?this.each(UN(e,t)):gN(this.node(),e).ease}function WN(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;_N(this,t).ease=n}}function VN(t){if("function"!=typeof t)throw new Error;return this.each(WN(this._id,t))}function ZN(t){"function"!=typeof t&&(t=jE(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new wj(r,this._parents,this._name,this._id)}function XN(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var s=e[l],u=n[l],c=s.length,f=a[l]=new Array(c),h,d=0;d<c;++d)(h=s[d]||u[d])&&(f[d]=h);for(;l<r;++l)a[l]=e[l];return new wj(a,this._parents,this._name,this._id)}function GN(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}function $N(t,e,n){var r,i,o=GN(e)?pN:_N;return function(){var a=o(this,t),l=a.on;l!==r&&(i=(r=l).copy()).on(e,n),a.on=i}}function QN(t,e){var n=this._id;return arguments.length<2?gN(this.node(),n).on.on(t):this.each($N(n,t,e))}function JN(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function KN(){return this.on("end.remove",JN(this._id))}function tj(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=AE(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var l=r[a],s=l.length,u=o[a]=new Array(s),c,f,h=0;h<s;++h)(c=l[h])&&(f=t.call(c,c.__data__,h,l))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,dN(u[h],e,n,h,u,gN(c,n)));return new wj(o,this._parents,e,n)}function ej(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=zE(t));for(var r=this._groups,i=r.length,o=[],a=[],l=0;l<i;++l)for(var s=r[l],u=s.length,c,f=0;f<u;++f)if(c=s[f]){for(var h=t.call(c,c.__data__,f,s),d,p=gN(c,n),_=0,g=h.length;_<g;++_)(d=h[_])&&dN(d,e,n,_,h,p);o.push(h),a.push(c)}return new wj(o,a,e,n)}var nj=pT.prototype.constructor;function rj(){return new nj(this._groups,this._parents)}function ij(t,e){var n,r,i;return function(){var o=xz(this,t),a=(this.style.removeProperty(t),xz(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function oj(t){return function(){this.style.removeProperty(t)}}function aj(t,e,n){var r,i=n+"",o;return function(){var a=xz(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function lj(t,e,n){var r,i,o;return function(){var a=xz(this,t),l=n(this),s=l+"";return null==l&&(this.style.removeProperty(t),s=l=xz(this,t)),a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,l))}}function sj(t,e){var n,r,i,o="style."+e,a="end."+o,l;return function(){var s=_N(this,t),u=s.on,c=null==s.value[o]?l||(l=oj(e)):void 0;u===n&&i===c||(r=(n=u).copy()).on(a,i=c),s.on=r}}function uj(t,e,n){var r="transform"==(t+="")?pw:MN;return null==e?this.styleTween(t,ij(t,r)).on("end.style."+t,oj(t)):"function"==typeof e?this.styleTween(t,lj(t,r,kN(this,"style."+t,e))).each(sj(this._id,t)):this.styleTween(t,aj(t,r,e),n).on("end.style."+t,null)}function cj(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function fj(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&cj(t,o,n)),r}return o._value=e,o}function hj(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,fj(t,e,null==n?"":n))}function dj(t){return function(){this.textContent=t}}function pj(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function _j(t){return this.tween("text","function"==typeof t?pj(kN(this,"text",t)):dj(null==t?"":t+""))}function gj(t){return function(e){this.textContent=t.call(this,e)}}function yj(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&gj(r)),e}return r._value=t,r}function mj(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,yj(t))}function vj(){for(var t=this._name,e=this._id,n=kj(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var c=gN(s,e);dN(s,t,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new wj(r,this._parents,t,n)}function bj(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var l={value:a},s={value:function(){0==--i&&o()}};n.each((function(){var n=_N(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(l),e._.interrupt.push(l),e._.end.push(s)),n.on=e})),0===i&&o()}))}var xj=0;function wj(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function kj(){return++xj}var Mj=pT.prototype;function Aj(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}wj.prototype={constructor:wj,select:tj,selectAll:ej,filter:ZN,merge:XN,selection:rj,transition:vj,call:Mj.call,nodes:Mj.nodes,node:Mj.node,size:Mj.size,empty:Mj.empty,each:Mj.each,on:QN,attr:NN,attrTween:FN,style:uj,styleTween:hj,text:_j,textTween:mj,remove:KN,tween:wN,delay:RN,duration:IN,ease:YN,easeVarying:VN,end:bj,[Symbol.iterator]:Mj[Symbol.iterator]};var Sj={time:null,delay:0,duration:250,ease:Aj};function Cj(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error("transition ".concat(e," not found"));return n}function Ej(t){var e,n;t instanceof wj?(e=t._id,t=t._name):(e=kj(),(n=Sj).time=XT(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&dN(s,t,e,u,a,n||Cj(s,e));return new wj(r,this._parents,t,e)}function zj(t){var e=0;return function(n){return void 0===n?e:(e=n,t)}}function Tj(t){return""+t}function Nj(t){var e=Tj;return function(n){return void 0===n?e||Tj:(e=n,t)}}function jj(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Lj(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Pj(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function Oj(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,l=t.months,s=t.shortMonths,u=Yj(i),c=Wj(i),f=Yj(o),h=Wj(o),d=Yj(a),p=Wj(a),_=Yj(l),g=Wj(l),y=Yj(s),m=Wj(s),v={a:L,A:P,b:O,B:F,c:null,d:hL,e:hL,f:yL,g:EL,G:TL,H:dL,I:pL,j:_L,L:gL,m:mL,M:vL,p:D,q:q,Q:KL,s:tP,S:bL,u:xL,U:wL,V:ML,w:AL,W:SL,x:null,X:null,y:CL,Y:zL,Z:NL,"%":JL},b={a:R,A:B,b:H,B:I,c:null,d:jL,e:jL,f:DL,g:XL,G:$L,H:LL,I:PL,j:OL,L:FL,m:qL,M:RL,p:U,q:Y,Q:KL,s:tP,S:BL,u:HL,U:IL,V:YL,w:WL,W:VL,x:null,X:null,y:ZL,Y:GL,Z:QL,"%":JL},x={a:S,A:C,b:E,B:z,c:T,d:nL,e:nL,f:sL,g:Jj,G:Qj,H:iL,I:iL,j:rL,L:lL,m:eL,M:oL,p:A,q:tL,Q:cL,s:fL,S:aL,u:Zj,U:Xj,V:Gj,w:Vj,W:$j,x:N,X:j,y:Jj,Y:Qj,Z:Kj,"%":uL};function w(t,e){return function(n){var r=[],i=-1,o=0,a=t.length,l,s,u;for(n instanceof Date||(n=new Date(+n));++i<a;)37===t.charCodeAt(i)&&(r.push(t.slice(o,i)),null!=(s=Fj[l=t.charAt(++i)])?l=t.charAt(++i):s="e"===l?" ":"0",(u=e[l])&&(l=u(n,s)),r.push(l),o=i+1);return r.push(t.slice(o,i)),r.join("")}}function k(t,e){return function(n){var r=Pj(1900,void 0,1),i,o,a;if(M(r,t,n+="",0)!=n.length)return null;if("Q"in r)return new Date(r.Q);if("s"in r)return new Date(1e3*r.s+("L"in r?r.L:0));if(e&&!("Z"in r)&&(r.Z=0),"p"in r&&(r.H=r.H%12+12*r.p),void 0===r.m&&(r.m="q"in r?r.q:0),"V"in r){if(r.V<1||r.V>53)return null;"w"in r||(r.w=1),"Z"in r?(a=(o=Lj(Pj(r.y,0,1))).getUTCDay(),o=a>4||0===a?uv.ceil(o):uv(o),o=av.offset(o,7*(r.V-1)),r.y=o.getUTCFullYear(),r.m=o.getUTCMonth(),r.d=o.getUTCDate()+(r.w+6)%7):(a=(o=jj(Pj(r.y,0,1))).getDay(),o=a>4||0===a?Gm.ceil(o):Gm(o),o=Vm.offset(o,7*(r.V-1)),r.y=o.getFullYear(),r.m=o.getMonth(),r.d=o.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),a="Z"in r?Lj(Pj(r.y,0,1)).getUTCDay():jj(Pj(r.y,0,1)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(a+5)%7:r.w+7*r.U-(a+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,Lj(r)):jj(r)}}function M(t,e,n,r){for(var i=0,o=e.length,a=n.length,l,s;i<o;){if(r>=a)return-1;if(37===(l=e.charCodeAt(i++))){if(l=e.charAt(i++),!(s=x[l in Fj?e.charAt(i++):l])||(r=s(t,n,r))<0)return-1}else if(l!=n.charCodeAt(r++))return-1}return r}function A(t,e,n){var r=u.exec(e.slice(n));return r?(t.p=c.get(r[0].toLowerCase()),n+r[0].length):-1}function S(t,e,n){var r=d.exec(e.slice(n));return r?(t.w=p.get(r[0].toLowerCase()),n+r[0].length):-1}function C(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=h.get(r[0].toLowerCase()),n+r[0].length):-1}function E(t,e,n){var r=y.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1}function z(t,e,n){var r=_.exec(e.slice(n));return r?(t.m=g.get(r[0].toLowerCase()),n+r[0].length):-1}function T(t,n,r){return M(t,e,n,r)}function N(t,e,r){return M(t,n,e,r)}function j(t,e,n){return M(t,r,e,n)}function L(t){return a[t.getDay()]}function P(t){return o[t.getDay()]}function O(t){return s[t.getMonth()]}function F(t){return l[t.getMonth()]}function D(t){return i[+(t.getHours()>=12)]}function q(t){return 1+~~(t.getMonth()/3)}function R(t){return a[t.getUTCDay()]}function B(t){return o[t.getUTCDay()]}function H(t){return s[t.getUTCMonth()]}function I(t){return l[t.getUTCMonth()]}function U(t){return i[+(t.getUTCHours()>=12)]}function Y(t){return 1+~~(t.getUTCMonth()/3)}return v.x=w(n,v),v.X=w(r,v),v.c=w(e,v),b.x=w(n,b),b.X=w(r,b),b.c=w(e,b),{format:function(t){var e=w(t+="",v);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=w(t+="",b);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}pT.prototype.interrupt=vN,pT.prototype.transition=Ej;var Fj={"-":"",_:" ",0:"0"},Dj=/^\s*\d+/,qj=/^%/,Rj=/[\\^$*+?|[\]().{}]/g,Bj,Hj;function Ij(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function Uj(t){return t.replace(Rj,"\\$&")}function Yj(t){return new RegExp("^(?:"+t.map(Uj).join("|")+")","i")}function Wj(t){return new Map(t.map(((t,e)=>[t.toLowerCase(),e])))}function Vj(t,e,n){var r=Dj.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function Zj(t,e,n){var r=Dj.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function Xj(t,e,n){var r=Dj.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function Gj(t,e,n){var r=Dj.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function $j(t,e,n){var r=Dj.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Qj(t,e,n){var r=Dj.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Jj(t,e,n){var r=Dj.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Kj(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function tL(t,e,n){var r=Dj.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function eL(t,e,n){var r=Dj.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function nL(t,e,n){var r=Dj.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function rL(t,e,n){var r=Dj.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function iL(t,e,n){var r=Dj.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function oL(t,e,n){var r=Dj.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function aL(t,e,n){var r=Dj.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function lL(t,e,n){var r=Dj.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function sL(t,e,n){var r=Dj.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function uL(t,e,n){var r=qj.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function cL(t,e,n){var r=Dj.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function fL(t,e,n){var r=Dj.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function hL(t,e){return Ij(t.getDate(),e,2)}function dL(t,e){return Ij(t.getHours(),e,2)}function pL(t,e){return Ij(t.getHours()%12||12,e,2)}function _L(t,e){return Ij(1+Vm.count(iv(t),t),e,3)}function gL(t,e){return Ij(t.getMilliseconds(),e,3)}function yL(t,e){return gL(t,e)+"000"}function mL(t,e){return Ij(t.getMonth()+1,e,2)}function vL(t,e){return Ij(t.getMinutes(),e,2)}function bL(t,e){return Ij(t.getSeconds(),e,2)}function xL(t){var e=t.getDay();return 0===e?7:e}function wL(t,e){return Ij(Xm.count(iv(t)-1,t),e,2)}function kL(t){var e=t.getDay();return e>=4||0===e?Jm(t):Jm.ceil(t)}function ML(t,e){return t=kL(t),Ij(Jm.count(iv(t),t)+(4===iv(t).getDay()),e,2)}function AL(t){return t.getDay()}function SL(t,e){return Ij(Gm.count(iv(t)-1,t),e,2)}function CL(t,e){return Ij(t.getFullYear()%100,e,2)}function EL(t,e){return Ij((t=kL(t)).getFullYear()%100,e,2)}function zL(t,e){return Ij(t.getFullYear()%1e4,e,4)}function TL(t,e){var n=t.getDay();return Ij((t=n>=4||0===n?Jm(t):Jm.ceil(t)).getFullYear()%1e4,e,4)}function NL(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Ij(e/60|0,"0",2)+Ij(e%60,"0",2)}function jL(t,e){return Ij(t.getUTCDate(),e,2)}function LL(t,e){return Ij(t.getUTCHours(),e,2)}function PL(t,e){return Ij(t.getUTCHours()%12||12,e,2)}function OL(t,e){return Ij(1+av.count(gv(t),t),e,3)}function FL(t,e){return Ij(t.getUTCMilliseconds(),e,3)}function DL(t,e){return FL(t,e)+"000"}function qL(t,e){return Ij(t.getUTCMonth()+1,e,2)}function RL(t,e){return Ij(t.getUTCMinutes(),e,2)}function BL(t,e){return Ij(t.getUTCSeconds(),e,2)}function HL(t){var e=t.getUTCDay();return 0===e?7:e}function IL(t,e){return Ij(sv.count(gv(t)-1,t),e,2)}function UL(t){var e=t.getUTCDay();return e>=4||0===e?hv(t):hv.ceil(t)}function YL(t,e){return t=UL(t),Ij(hv.count(gv(t),t)+(4===gv(t).getUTCDay()),e,2)}function WL(t){return t.getUTCDay()}function VL(t,e){return Ij(uv.count(gv(t)-1,t),e,2)}function ZL(t,e){return Ij(t.getUTCFullYear()%100,e,2)}function XL(t,e){return Ij((t=UL(t)).getUTCFullYear()%100,e,2)}function GL(t,e){return Ij(t.getUTCFullYear()%1e4,e,4)}function $L(t,e){var n=t.getUTCDay();return Ij((t=n>=4||0===n?hv(t):hv.ceil(t)).getUTCFullYear()%1e4,e,4)}function QL(){return"+0000"}function JL(){return"%"}function KL(t){return+t}function tP(t){return Math.floor(+t/1e3)}function eP(t){return(Bj=Oj(t)).format,Hj=Bj.parse,Bj.utcFormat,Bj.utcParse,Bj}eP({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var nP=parseFloat,rP=Hj("%Y-%m-%d");function iP(t){var e=nP;return function(n){return void 0===n?e||nP:(e=n,t)}}function oP(t){var e=rP;return function(n){return void 0===n?e||rP:(e=n,t)}}function aP(t){var e={},n=null,r=null,i=null;return e.width=function(e){return void 0===e?null!==n?n:t.svg.node().getBoundingClientRect().width:(n=e,t)},e.height=function(n){return void 0===n?null!==r?r:null!==i?e.plotHeight()+t.margins.top+t.margins.bottom:t.svg.node().getBoundingClientRect().height:(r=n,i=null,t)},e.plotAspect=function(n){return void 0===n?null!==i?i:e.plotWidth()/e.plotHeight():(r=null,i=n,t)},e.plotWidth=function(){return t.width()-(t.margins.right+t.margins.left)},e.plotHeight=function(){return null===i?e.height()-(t.margins.top+t.margins.bottom):e.plotWidth()/i},e.xLeft=function(){return t.margins.left},e.xRight=function(){return t.width()-t.margins.right},e.yBottom=function(){return t.height()-t.margins.bottom},e.yTop=function(){return t.margins.top},e}function lP(t){var e=0;return function(n){return void 0===n?e:(e=n,t)}}function sP(t){var e=0;return function(n){return void 0===n?e:(e=n,t)}}function uP(t){var e=[],n={};return t.forEach((function(t){n[t]||(e.push(t),n[t]=!0)})),e}var cP=Array.isArray;function fP(t){return t}function hP(t){var e=function(e,n){Object.defineProperty(t,e,{value:n,enumerable:!0})},n,r;return{prop:e,getter:function(e,n){Object.defineProperty(t,e,{get:n,enumerable:!0})},method:function(e,n){Object.defineProperty(t,e,{value:n})}}}function dP(t,e){var n,r=1;return t[e?"reduce":"reduceRight"]((function(t,e){return t[e]||(t[e]=r),r+=1,t}),{})}function pP(t,e){var n,r=1;return t[e?"reduce":"reduceRight"]((function(t,e){return t[e]=r++,t}),{})}function _P(t,e){var n,r=1;return t[e?"reduce":"reduceRight"]((function(t,e){return t[e]||(t[e]=r++),t}),{})}function gP(t,e){var n=dP(t,e),r=pP(t,e);return Object.keys(n).reduce((function(t,e){return t[e]=(n[e]+r[e])/2,t}),{})}function yP(t,e,n,r){var i;i="dense"===r?_P(e,n):"fractional"===r?gP(e,n):"worst"===r?pP(e,n):dP(e,n);var o=function(t){return i[t]};return"ordinal"===r&&(o=function(t){return i[t]++}),t.map(o)}function mP(t){return t=t||Math.random,function(e,n){var r=n-e+1;return Math.floor(t()*r)+e}}function vP(t,e){var n;return t[mP(e)(0,t.length-1)]}function bP(t,e,n,r){var i=t.length,o;if(n=void 0!==e&&n,e=void 0!==e?Math.floor(e):i,!i||e<1)return[];var a=mP(r);if(n||1===e){o=[];for(var l=0;l<e;l++)o.push(t[a(0,i-1)]);return o}o=t.slice();for(var s=Math.min(i,e),l=0;l<s;l++){var u=a(l,i-1);if(u!==l){var c=o[u],f=o[l];o[l]=c,o[u]=f}}return o.length=s,o}function xP(t,e,n){if(!e.length)return t.slice();for(var r=0,i=t.reduce((function(t,i){for(;t.length===e[r];)t.push(n),r++;return t.push(i),t}),[]);e[r++];)i.push(n);return i}function wP(t){t.method("unsorted",(function(){return this.values.slice()})),t.method("ascending",(function(){return this.sorted_values.slice()})),t.method("descending",(function(){return this.sorted_values.slice().reverse()})),t.method("unique",(function(){return uP(this.values)})),t.method("uniqueAscending",(function(){return uP(this.sorted_values)})),t.method("uniqueDescending",(function(){return uP(this.sorted_values).reverse()}))}function kP(t,e){return cP(e)?e.map((function(e){return Nx(t,e)})):Nx(t,e)}function MP(t){var e=function(){return wx(this.values)},n=function(){return Math.sqrt(this.variance)},r=function(){return kP(this.sorted_values,[.25,.5,.75])},i=function(){return kP(this.sorted_values,.5)},o=function(){var t=kP(this.sorted_values,[.25,.75]);return t[1]-t[0]};t.getter("variance",e),t.getter("sd",n),t.getter("median",i),t.getter("iqr",o),t.method("quantiles",(function(t){return kP(this.sorted_values,t)})),t.method("quartiles",r)}function AP(t){t.method("random",(function(t){return vP(this.values,t)})),t.method("sample",(function(t,e,n){return bP(this.values,t,e,n)}))}function SP(t){t.method("rank",(function(t,e){return yP(this.values,this.sorted_values,t,e)}))}function CP(t){t.method("unclean",(function(t){if(t&&t.length<this.values.length)throw new RangeError("dataset is too short");if(t&&t.length>this.values.length)throw new RangeError("dataset is too long");return xP(t=t||this.values,this.dropped_indexes,NaN)}))}function EP(t){return t>=-90&&t<=90}function zP(t){return t>=-180&&t<=180}function TP(t,e,n){return t.length?n?e(t.min)&&e(t.max)?1:0:t.values.reduce((function(t,n){return t+e(n)}),0)/t.length:null}function NP(t){t.method("latitudeScore",(function(t){return TP(this,EP,t)})),t.method("longitudeScore",(function(t){return TP(this,zP,t)}))}function jP(){var t={},e=hP(t);return wP(e),MP(e),AP(e),SP(e),CP(e),NP(e),t}function LP(t){var e=-1/0;return t.every((function(t){if(t>=e)return e=t,!0}))}function PP(t){var e=1/0;return t.every((function(t){if(t<=e)return e=t,!0}))}function OP(t,e,n){n=n||fP;var r=1/0,i=-1/0,o=null,a=0,l=[],s=Object.freeze(e.reduce((function(t,e,o){var s=n(e);return"number"!=typeof s||isNaN(s)?l.push(o):(t.push(s),r=Math.min(r,s),i=Math.max(i,s),a+=s),t}),[])),u=hP(t);return u.prop("enhanced_array",!0),u.prop("numeric_array",!0),u.prop("values",s),u.prop("min",s.length?r:null),u.prop("max",s.length?i:null),u.prop("sum",a),u.prop("mean",s.length?a/s.length:null),u.prop("range",s.length?i-r:null),u.prop("length",s.length),u.prop("dropped_indexes",Object.freeze(l)),u.method("extent",(function(){return[this.min,this.max]})),u.getter("sorted_values",(function(){return o||(LP(s)&&(o=s),o=PP(s)?Object.freeze(s.slice().reverse()):Object.freeze(s.slice().sort(gx))),o})),t}var FP=jP();function DP(t,e){var n=Object.create(FP);return OP(n,t,e),n}var qP=Object.freeze(["min","max","mean"]),RP=Object.freeze(["extent","random","sample","unsorted","ascending","descending","unique","uniqueAscending","uniqueDescending","quartiles","quantiles","unclean"]);function BP(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())}function HP(t){return"number"!=typeof t?null:new Date(t)}function IP(t,e){return function(){var n=t[e].apply(t,arguments);return Array.isArray(n)?n.map(HP):HP(n)}}function UP(t,e,n){n=n||fP;var r=DP(e.map((function(t){var e=n(t);return BP(e)?e.getTime():null}))),i=hP(t);i.prop("enhanced_array",!0),i.prop("datetime_array",!0),i.getter("values",(function(){return Object.freeze(r.values.map(HP))})),i.getter("sorted_values",(function(){return Object.freeze(r.sorted_values.map(HP))})),i.getter("median",(function(){return HP(r.median)})),i.prop("length",r.values.length),i.prop("dropped_indexes",r.dropped_indexes),i.method("rank",(function(){return r.rank(arguments)}));var o=IP.bind(null,r);return qP.forEach((function(t){i.prop(t,HP(r[t]))})),RP.forEach((function(t){i.method(t,o(t))})),t}function YP(t,e){var n={};return UP(n,t,e),n}function WP(t){t.method("unsorted",(function(){return this.values.slice()})),t.method("ascending",(function(){return this.sorted_values.slice()})),t.method("descending",(function(){return this.sorted_values.slice().reverse()})),t.method("unique",(function(){return uP(this.values)})),t.method("uniqueAscending",(function(){return uP(this.sorted_values)})),t.method("uniqueDescending",(function(){return uP(this.sorted_values).reverse()}))}function VP(t){t.method("random",(function(t){return vP(this.values,t)})),t.method("sample",(function(t,e,n){return bP(this.values,t,e,n)}))}function ZP(t){t.method("rank",(function(t,e){return yP(this.values,this.sorted_values,t,e)}))}function XP(t){t.method("unclean",(function(t){if(t&&t.length<this.values.length)throw new RangeError("dataset is too short");if(t&&t.length>this.values.length)throw new RangeError("dataset is too long");return xP(t=t||this.values,this.dropped_indexes)}))}function GP(){var t={},e=hP(t);return WP(e),VP(e),ZP(e),XP(e),t}function $P(t){if(t.length<2)return!0;var e=t[0];return t.every((function(t){if(t>=e)return e=t,!0}))}function QP(t){if(t.length<2)return!0;var e=t[0];return t.every((function(t){if(t<=e)return e=t,!0}))}function JP(t,e,n){n=n||fP;for(var r=null,i=[],o=0,a=null,l=0;null===a&&l<e.length;){var s=n(e[l++]);"string"==typeof s&&(a=s)}var u=a,c=Object.freeze(e.reduce((function(t,e,r){var l=n(e);return"string"==typeof l?(t.push(l),a=l<a?l:a,u=l>u?l:u,l||o++):i.push(r),t}),[])),f=hP(t);return f.prop("enhanced_array",!0),f.prop("string_array",!0),f.prop("values",c),f.prop("min",a),f.prop("max",u),f.prop("length",c.length),f.prop("dropped_indexes",Object.freeze(i)),f.prop("n_empty",o),f.method("extent",(function(){return[this.min,this.max]})),f.getter("sorted_values",(function(){return r||($P(c)&&(r=c),r=QP(c)?Object.freeze(c.slice().reverse()):Object.freeze(c.slice().sort())),r})),t}var KP=GP(),tO;function eO(t,e){var n=Object.create(KP);return JP(n,t,e),n}function nO(){var t=parseFloat(getComputedStyle(document.documentElement).fontSize),e=window.devicePixelRatio;tO=function(n,r){return n?r?Math.max(Math.round(n*t*e),1)/e:n*t:0}}function rO(t,e,n){var r=getComputedStyle(t.node()).fontFamily,i,o,a;return(n?n+" ":"")+(tO(e)+"px ")+r}function iO(t,e){return"translate("+t+","+e+")"}function oO(t,e,n){return"rotate("+t+","+(e=e||0)+","+(n=n||0)+")"}var aO=Math.log10||function(t){return Math.log(t)*Math.LOG10E};function lO(t){return Math.floor(aO(Math.abs(t)))}function sO(t){if(0===t)return 0;for(var e=Math.abs(String(t).replace(".",""));0!==e&&e%10==0;)e/=10;return lO(e)+1}function uO(t,e){var n=t[0][0],r=t[1][0],i=e[0][0],o=e[1][0],a=t[0][1],l=t[1][1],s=e[0][1],u=e[1][1],c=(n-r)*(s-u)-(i-o)*(a-l);if(!c)return!(n<i&&n<o&&r<i&&r<o||n>i&&n>o&&r>i&&r>o||a<s&&a<u&&l<s&&l<u||a>s&&a>u&&l>s&&l>u);var f=((n-i)*(s-u)-(a-s)*(i-o))/c;if(f<0||f>1)return!1;var h=-((n-r)*(a-s)-(a-l)*(n-i))/c;return!(h<0||h>1)}function cO(t){return t&&"number"==typeof t?t>0?1:-1:0}function fO(t){var e=t.type;(t=t.copy()).type=e;var n=-1e6,r,i=function(r){var i=t(r);if(isNaN(i)||Math.abs(i)===1/0){var o,a=t.range();if("numeric"!==e)o=a[0]>a[1];else{var l=t.domain();o=cO(l[1]-l[0])!==cO(a[1]-a[0])}i=n*(o?-1:1)}return i};return["domain","range"].forEach((function(e){i[e]=function(){var n=t[e].apply(t,arguments);return n===t?i:n}})),i.copy=function(){return fO(t)},i.type=t.type,i.step=t.step,i}function hO(t){return"[object Date]"===Object.prototype.toString.call(t)}function dO(t){return hO(t)&&!isNaN(t.getTime())}function pO(t){return t.split("\n").filter((function(t){return t})).map((function(t){return t.trim()}))}var _O="Input data must be an array or Flourish array";function gO(t,e){if(!t)throw new TypeError(_O);if(t.enhanced_array)return t;if(!Array.isArray(t))throw new TypeError(_O);for(var n=e||function(t){return t},r=0;r<t.length;r++){var i=n(t[r]),o=typeof i;if("number"===o)return DP(t,e);if("string"===o)return eO(t,e);if(hO(i))return YP(t,e)}return DP(t,e)}function yO(t){var e=gO([]);return function(n,r){return void 0===n?e:(e=gO(n,r),t)}}var mO="Testing";function vO(t){return t*(Math.PI/180)}function bO(t,e){var n;return t.filter((function(t){var r=e(t);if(r!==n)return n=r,!0}))}function xO(t){var e=void 0!==t.max_space?t.max_space:100,n=void 0!==t.text_height?t.text_height:tO(1),r=t.max_lines,i=t.angle||0,o,a=document.createElement("canvas").getContext("2d");a.font=t.font;var l=e,s=vO(i);return l=(e-n*Math.sin(s))/Math.cos(s),function(t){"number"==typeof t&&(t=t.toString()),t||(t="");var e=[],n=0,i=a.measureText(t).width;if(i<=l)e.push(t),n=i;else{for(var o=t.trim().split(/\s+/g),s="",u=0;u<o.length;u++){var c=o[u],f=s+(s?" ":"")+c,h=a.measureText(f).width;if(!(h<=l)){var d,p;if(!(e.length+1==r)&&s)if(e.push(s),a.measureText(c).width<=l){s=c;continue}var _=1,g=f;do{g=f.substring(0,f.length-_)+"…",h=a.measureText(g).width}while(h>l&&++_<f.length);n=Math.max(n,h),s=g;break}s=f,n=Math.max(n,h)}e.push(s)}return{lines:e,text_width:n}}}function wO(t,e,n){var r=["px","rem","fraction"];e=e||"width",n="number"==typeof n?n:50;var i=.33,o="fraction",a=function(){var r=t[e](),a;return"px"===o?a=i:"rem"===o?a=tO(i):"fraction"===o&&(a=Math.max(n,i*r)),{px:a,rem:"rem"===o?i:a/tO(1),fraction:"fraction"===o?i:a/r,unit:o}};return function(e,n){return void 0===e?a():(i=Math.max(e,0),o=-1!==r.indexOf(n)?n:"px",t)}}function kO(t,e){var n=e.x,r=Object.freeze([]),i=t.chart.select(".fl-x-axes"),o=function(e){var o=t.xData().string_array?"string":"numeric",a=rO(gT(".fl-x-axes"),n.tick_label_size,n.tick_label_weight),l="default"===n.tick_label_position?+n.tick_label_angle:90,s=0,u=t.xFormat(),c,f=tO(n.tick_label_size);i.append("text").style("opacity",0).style("font",a).each((function(){var t=gT(this).text(mO).node().getBoundingClientRect();c=t.height})).remove(),"object"==typeof e[0]&&(e=bO(e,u));var h=tO(n.tick_label_space);"auto"===n.tick_label_space_mode&&(h=t.xTicks.autoLabelSpace().px);var d,p=xO({text_height:c,max_space:h,font:a,angle:90-l,max_lines:n.tick_label_max_lines});return r=e.map((function(t,e){var r=p(u(t)),i=r.lines,a=r.text_width,h,d,_,g,y,m,v=0,b=c*i.length+(i.length-1)*n.tick_label_line_height;if(0===l||90===l)_=g=(h=0===l?a+tO(.5):b)/2,y=d=0===l?b:a,m=d,90===l&&(v=i.length<2?0:(i.length-1)/2*(f*n.tick_label_line_height));else{var x=vO(l),w=Math.sin(x),k=Math.cos(x);h=(_=a*k)+(g=b*w),d=(y=a*w)+(m=b*k)}if("top"===n.axis_position||"float-above"===n.axis_position){var M=_;_=g,g=M,M=y,y=m,m=M,0!==l&&90!==l&&(v=i.length<2?0:(i.length-1)*(f*n.tick_label_line_height))}s=Math.max(s,d);var A="numeric"===o?sO(t):null,S="numeric"===o?lO(t):null;return Object.freeze({index:e,value:t,lines:i,significant_digits:A,exponent:S,text_width:a,text_height:c,box_width:h,box_height:d,box_width_left:_,box_width_right:g,box_height_left:y,box_height_right:m,multiline_offset:v})})),r.type=o,r.max_box_height="fixed"===n.tick_label_space_mode?tO(n.tick_label_space):s,Object.freeze(r),t},a=function(){return r};return a._update=o,a.autoLabelSpace=wO(t,"height",120),a}function MO(t,e,n){var r=e[n],i=n+"Data",o=n+"Format",a=n+"Ticks",l=Object.freeze([]),s=t.chart.select(".fl-y-axes"),u=function(e){var n=t[i]().string_array?"string":"numeric",u=rO(gT(".fl-y-axes"),r.tick_label_size,r.tick_label_weight),c="default"===r.tick_label_position?+r.tick_label_angle:0,f=0,h=t[o](),d;s.append("text").style("opacity",0).style("font",u).each((function(){var t=gT(this).text(mO).node().getBoundingClientRect();d=t.height})).remove(),"object"==typeof e[0]&&(e=bO(e,h));var p=tO(r.tick_label_space);"auto"===r.tick_label_space_mode&&(p=t[a].autoLabelSpace().px);var _,g=xO({text_height:d,max_space:p,font:u,angle:c,max_lines:c?1:r.tick_label_max_lines});return l=e.map((function(t,e){var i=g(h(t)),o=i.lines,a=i.text_width,l,s,u,p,_,y,m=0,v=d*o.length+(o.length-1)*r.tick_label_line_height;if(0===c||90===c)u=l=c?v:a,p=l,_=y=(s=c?a+tO(.5):v)/2,0===c&&(m=o.length<2?0:(o.length-1)/2*(d*r.tick_label_line_height));else{var b=vO(c),x=Math.sin(b),w=Math.cos(b);l=(u=v*x)+(p=a*w),s=(_=v*w)+(y=a*x)}f=Math.max(f,l);var k="numeric"===n?sO(t):null,M="numeric"===n?lO(t):null;return Object.freeze({index:e,value:t,lines:o,type:n,significant_digits:k,exponent:M,text_width:a,text_height:d,box_width:l,box_height:s,box_width_above:u,box_width_below:p,box_height_above:_,box_height_below:y,multiline_offset:m})})),l.type=n,l.max_box_width="fixed"===r.tick_label_space_mode?tO(r.tick_label_space):f,Object.freeze(l),t},c=function(){return l};return c._update=u,c.autoLabelSpace=wO(t),c}function AO(t,e){return MO(t,e,"y")}function SO(t,e){return MO(t,e,"y2")}function CO(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=()=>t[e+"Scale"]({domain_only:!0}).ticks();let r=n;return function(e){return void 0===e?r:(r=null===e?n:e,t)}}function EO(t){const e=CO(t,"x");return t=>e(t)}function zO(t){const e=CO(t,"y");return t=>e(t)}function TO(t){const e=CO(t,"y2");return t=>e(t)}function NO(t){var e="";return function(n){return void 0===n?e:(e=n,t)}}function jO(t,e){return t.xAutoTitle=NO(t),t.xAutoTitle("X"),function(){var n;return("auto"===e.x.title_mode?t.xAutoTitle():e.x.title).trim()}}function LO(t,e){return t.yAutoTitle=NO(t),t.yAutoTitle("Y"),function(){var n;return("auto"===e.y.title_mode?t.yAutoTitle():e.y.title).trim()}}function PO(t,e){return t.y2AutoTitle=NO(t),t.y2AutoTitle("Y2"),function(){var n;return("auto"===e.y2.title_mode?t.y2AutoTitle():e.y2.title).trim()}}function OO(t,e){var n=e.x,r=t.xTitle();if("off"===n.axis_visible||!r)return 0;var i=t.chart.select(".fl-x-axis .fl-axis-title"),o=rO(i,n.title_size,n.title_weight),a=i.append("text").text(r).style("opacity",0).style("font",o),l=a.node().getBoundingClientRect().height;return a.remove(),l+2*tO(n.title_padding)}function FO(t,e){var n=e.y,r=t.yTitle();if(!n.axis_visible||!r)return 0;var i=t.chart.select(".fl-left-axis .fl-axis-title"),o=rO(i,n.title_size,n.title_weight),a=i.append("text").text(r).style("opacity",0).style("font",o),l=a.node().getBoundingClientRect().height;return a.remove(),l+2*tO(n.title_padding)}function DO(t,e){var n=e.y2,r=t.y2Title();if(!n.axis_visible||!r)return 0;var i=t.chart.select(".fl-right-axis .fl-axis-title"),o=rO(i,n.title_size,n.title_weight),a=i.append("text").text(r).style("opacity",0).style("font",o),l=a.node().getBoundingClientRect().height;return a.remove(),l+2*tO(n.title_padding)}function qO(t,e){var n=e.x,r=n.axis_position;if("off"===r)return 0;var i=0,o=0,a=0,l;if("top"===r||"bottom"==r){var s=t.xTicks();i=s.length&&"out"===n.tick_side&&"default"===n.tick_label_position?tO(n.tick_length):0,a=s.max_box_height||0,o=s.length?tO(n.tick_padding):0}return i+o+a+OO(t,e)}function RO(t,e){var n=e.x,r=0,i=["top","float-above"].includes(n.axis_position);!t.xHide()&&i&&(r=qO(t,e));var o=0,a=0,l=t.yHide()?[]:t.yTicks();if(l.length){var s=l[l.length-1];"default"==e.y.tick_label_position?o=.9*s.box_height_above:"above"==e.y.tick_label_position&&(o+=s.box_height)}"end"!==e.y.title_position||i||(o+=FO(t,e));var u=t.y2Hide()?[]:t.y2Ticks();if(u.length){var c=u[u.length-1];"default"==e.y2.tick_label_position?a=.9*c.box_height_above:"above"==e.y2.tick_label_position&&(a+=c.box_height)}"end"!==e.y2.title_position||i||(a+=DO(t,e));var f=Math.max(tO(.25),o,a);return Math.max(r,f)}function BO(t,e){var n=e.x,r=0,i=["bottom","float-below"].includes(n.axis_position);!t.xHide()&&i&&(r=qO(t,e));var o=0,a=0,l=t.yHide()?[]:t.yTicks();if(l.length){var s=l[0];"default"==e.y.tick_label_position?o=.9*s.box_height_below:"below"==e.y.tick_label_position&&(o+=s.box_height)}"end"!==e.y.title_position||i||"off"===n.axis_position||(o+=FO(t,e));var u=t.y2Hide()?[]:t.y2Ticks();if(u.length){var c=u[0];"default"==e.y2.tick_label_position?a=.9*c.box_height_below:"below"==e.y2.tick_label_position&&(a+=c.box_height)}"end"!==e.y2.title_position||i||"off"===n.axis_position||(a+=DO(t,e));var f=Math.max(tO(.25),o,a);return Math.max(r,f)}function HO(t,e){var n=e.y,r=0;if(n.axis_visible){var i=t.yHide()?[]:t.yTicks(),o,a,l,s,u;r=(i.length&&"out"===n.tick_side&&"default"===n.tick_label_position?tO(n.tick_length):0)+(i.length?tO(n.tick_padding):0)+(i.max_box_width||0)+(!t.yHide()&&"side"===n.title_position?FO(t,e):0)}var c=tO(.25),f=0,h=t.xHide()?[]:t.xTicks();if(h.length){var d=h[0];"default"==e.x.tick_label_position?f=.9*d.box_width_left:"left"==e.x.tick_label_position&&(f=d.box_width),c=Math.max(c,f)}return Math.max(r,c)}function IO(t,e){var n=e.y2,r=0;if(n.axis_visible){var i=t.y2Hide()?[]:t.y2Ticks(),o,a,l,s,u;r=(i.length&&"out"===n.tick_side&&"default"===n.tick_label_position?tO(n.tick_length):0)+(i.length?tO(n.tick_padding):0)+(i.max_box_width||0)+(!t.y2Hide()&&"side"===n.title_position?DO(t,e):0)}var c=tO(.25),f=0,h=t.xHide()?[]:t.xTicks();if(h.length){var d=h[h.length-1];"default"==e.x.tick_label_position?f=.9*d.box_width_right:"right"==e.x.tick_label_position&&(f=d.box_width),c=Math.max(c,f)}return Math.max(r,c)}function UO(t,e){var n,r,i,o,a,l,s,u;a=l=s=u=0;var c=function(c){c=c||{},n=RO(t,e),r=IO(t,e),i=BO(t,e),o=HO(t,e),a=f(c.top,n),l=f(c.right,r),s=f(c.bottom,i),u=f(c.left,o)},f=function(t,e){return"function"==typeof t&&(t=t(e)),void 0===t?e:t},h=function(){return{top:a,right:l,bottom:s,left:u}};return h._calculated=function(){return{top:n,right:r,bottom:i,left:o}},h._update=c,Object.defineProperty(h,"top",{get:function(){return a}}),Object.defineProperty(h,"right",{get:function(){return l}}),Object.defineProperty(h,"bottom",{get:function(){return s}}),Object.defineProperty(h,"left",{get:function(){return u}}),h}function YO(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}const WO=Symbol("implicit");function VO(){var t=new Map,e=[],n=[],r=WO;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==WO)return r;t.set(o,a=e.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new Map;for(const r of n){const n=r+"";t.has(n)||t.set(n,e.push(r))}return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return VO(e,n).unknown(r)},YO.apply(i,arguments),i}function ZO(){var t=VO().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,o,a,l=!1,s=0,u=0,c=.5;function f(){var t=e().length,f=i<r,h=f?i:r,d=f?r:i;o=(d-h)/Math.max(1,t-s+2*u),l&&(o=Math.floor(o)),h+=(d-h-o*(t-s))*c,a=o*(1-s),l&&(h=Math.round(h),a=Math.round(a));var p=yM(t).map((function(t){return h+o*t}));return n(f?p.reverse():p)}return delete t.unknown,t.domain=function(t){return arguments.length?(e(t),f()):e()},t.range=function(t){return arguments.length?([r,i]=t,r=+r,i=+i,f()):[r,i]},t.rangeRound=function(t){return[r,i]=t,r=+r,i=+i,l=!0,f()},t.bandwidth=function(){return a},t.step=function(){return o},t.round=function(t){return arguments.length?(l=!!t,f()):l},t.padding=function(t){return arguments.length?(s=Math.min(1,u=+t),f()):s},t.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),f()):s},t.paddingOuter=function(t){return arguments.length?(u=+t,f()):u},t.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),f()):c},t.copy=function(){return ZO(e(),[r,i]).round(l).paddingInner(s).paddingOuter(u).align(c)},YO.apply(f(),arguments)}function XO(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return XO(e())},t}function GO(){return XO(ZO.apply(null,arguments).paddingInner(1))}function $O(t){return function(){return t}}function QO(t){return+t}var JO=[0,1];function KO(t){return t}function tF(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:$O(isNaN(e)?NaN:.5)}function eF(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}function nF(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=tF(i,r),o=n(a,o)):(r=tF(r,i),o=n(o,a)),function(t){return o(r(t))}}function rF(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=tF(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=aM(t,e,1,r)-1;return o[n](i[n](e))}}function iF(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function oF(){var t=JO,e=JO,n=nw,r,i,o,a=KO,l,s,u;function c(){var n=Math.min(t.length,e.length);return a!==KO&&(a=eF(t[0],t[n-1])),l=n>2?rF:nF,s=u=null,f}function f(i){return isNaN(i=+i)?o:(s||(s=l(t.map(r),e,n)))(r(a(i)))}return f.invert=function(n){return a(i((u||(u=l(e,t.map(r),Gx)))(n)))},f.domain=function(e){return arguments.length?(t=Array.from(e,QO),c()):t.slice()},f.range=function(t){return arguments.length?(e=Array.from(t),c()):e.slice()},f.rangeRound=function(t){return e=Array.from(t),n=rw,c()},f.clamp=function(t){return arguments.length?(a=!!t||KO,c()):a!==KO},f.interpolate=function(t){return arguments.length?(n=t,c()):n},f.unknown=function(t){return arguments.length?(o=t,f):o},function(t,e){return r=t,i=e,c()}}function aF(){return oF()(KO,KO)}function lF(t,e,n,r){var i=dM(t,e,n),o;switch((r=Jw(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=dk(i,a))||(r.precision=o),uk(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=pk(i,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=hk(i))||(r.precision=o-2*("%"===r.type))}return sk(r)}function sF(t){var e=t.domain;return t.ticks=function(t){var n=e();return fM(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return lF(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],l=r[o],s,u,c=10;for(l<a&&(u=a,a=l,l=u,u=i,i=o,o=u);c-- >0;){if((u=hM(a,l,n))===s)return r[i]=a,r[o]=l,e(r);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else{if(!(u<0))break;a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u}s=u}return t},t}function uF(){var t=aF();return t.copy=function(){return iF(t,uF())},YO.apply(t,arguments),sF(t)}function cF(t,e){var n=0,r=(t=t.slice()).length-1,i=t[n],o=t[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),t[n]=e.floor(i),t[r]=e.ceil(o),t}function fF(t){return Math.log(t)}function hF(t){return Math.exp(t)}function dF(t){return-Math.log(-t)}function pF(t){return-Math.exp(-t)}function _F(t){return isFinite(t)?+("1e"+t):t<0?0:t}function gF(t){return 10===t?_F:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function yF(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function mF(t){return function(e){return-t(-e)}}function vF(t){var e=t(fF,hF),n=e.domain,r=10,i,o;function a(){return i=yF(r),o=gF(r),n()[0]<0?(i=mF(i),o=mF(o),t(dF,pF)):t(fF,hF),e}return e.base=function(t){return arguments.length?(r=+t,a()):r},e.domain=function(t){return arguments.length?(n(t),a()):n()},e.ticks=function(t){var e=n(),a=e[0],l=e[e.length-1],s;(s=l<a)&&(u=a,a=l,l=u);var u=i(a),c=i(l),f,h,d,p=null==t?10:+t,_=[];if(!(r%1)&&c-u<p){if(u=Math.floor(u),c=Math.ceil(c),a>0){for(;u<=c;++u)for(h=1,f=o(u);h<r;++h)if(!((d=f*h)<a)){if(d>l)break;_.push(d)}}else for(;u<=c;++u)for(h=r-1,f=o(u);h>=1;--h)if(!((d=f*h)<a)){if(d>l)break;_.push(d)}2*_.length<p&&(_=fM(a,l,p))}else _=fM(u,c,Math.min(c-u,p)).map(o);return s?_.reverse():_},e.tickFormat=function(t,n){if(null==n&&(n=10===r?".0e":","),"function"!=typeof n&&(n=sk(n)),t===1/0)return n;null==t&&(t=10);var a=Math.max(1,r*t/e.ticks().length);return function(t){var e=t/o(Math.round(i(t)));return e*r<r-.5&&(e*=r),e<=a?n(t):""}},e.nice=function(){return n(cF(n(),{floor:function(t){return o(Math.floor(i(t)))},ceil:function(t){return o(Math.ceil(i(t)))}}))},e}function bF(){var t=vF(oF()).domain([1,10]);return t.copy=function(){return iF(t,bF()).base(t.base())},YO.apply(t,arguments),t}var xF=1e3,wF=60*xF,kF=60*wF,MF=24*kF,AF=7*MF,SF=30*MF,CF=365*MF;function EF(t){return new Date(t)}function zF(t){return t instanceof Date?+t:+new Date(+t)}function TF(t,e,n,r,i,o,a,l,s){var u=aF(),c=u.invert,f=u.domain,h=s(".%L"),d=s(":%S"),p=s("%I:%M"),_=s("%I %p"),g=s("%a %d"),y=s("%b %d"),m=s("%B"),v=s("%Y"),b=[[a,1,xF],[a,5,5*xF],[a,15,15*xF],[a,30,30*xF],[o,1,wF],[o,5,5*wF],[o,15,15*wF],[o,30,30*wF],[i,1,kF],[i,3,3*kF],[i,6,6*kF],[i,12,12*kF],[r,1,MF],[r,2,2*MF],[n,1,AF],[e,1,SF],[e,3,3*SF],[t,1,CF]];function x(l){return(a(l)<l?h:o(l)<l?d:i(l)<l?p:r(l)<l?_:e(l)<l?n(l)<l?g:y:t(l)<l?m:v)(l)}function w(e,n,r){if(null==e&&(e=10),"number"==typeof e){var i=Math.abs(r-n)/e,o=eM((function(t){return t[2]})).right(b,i),a;return o===b.length?(a=dM(n/CF,r/CF,e),e=t):o?(a=(o=b[i/b[o-1][2]<b[o][2]/i?o-1:o])[1],e=o[0]):(a=Math.max(dM(n,r,e),1),e=l),e.every(a)}return e}return u.invert=function(t){return new Date(c(t))},u.domain=function(t){return arguments.length?f(Array.from(t,zF)):f().map(EF)},u.ticks=function(t){var e=f(),n=e[0],r=e[e.length-1],i=r<n,o;return i&&(o=n,n=r,r=o),o=(o=w(t,n,r))?o.range(n,r+1):[],i?o.reverse():o},u.tickFormat=function(t,e){return null==e?x:s(e)},u.nice=function(t){var e=f();return(t=w(t,e[0],e[e.length-1]))?f(cF(e,t)):u},u.copy=function(){return iF(u,TF(t,e,n,r,i,o,a,l,s))},u}function NF(){return YO.apply(TF(iv,nv,Xm,Vm,Ym,Im,Bm,Lm,Sv).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}var jF=1e3;function LF(t,e){let{edge_padding:n,flip:r}=e;var i=r?t.unique().reverse():t.unique(),o=GO().domain(i).padding(n/100);return o.type="ordinal",o}function PF(t,e){let{min:n,max:r,include_zero:i,nice:o,flip:a}=e;const l=100;if(n===r&&(n=r=null),null!==n&&null!==r)return a?[r,n]:[n,r];let s;if(t.range)s=t.extent(),o&&(s=uF().domain(s).nice().domain()),i&&(s[0]>=0?s[0]=0:s[1]<0&&(s[1]=0),s=uF().domain(s).nice().domain());else if(t.length){var u=t.min;s=u>0?[0,2*u]:u<0?[2*u,0]:[-50,50]}else s=[0,l];return null!==n?(s[0]=n,s[0]===s[1]&&(s[1]=n+(t.range||l))):null!==r&&(s[1]=r,s[0]===s[1]&&(s[0]=r-(t.range||l))),a?s.reverse():s}function OF(t,e){var n=PF(t,e),r=uF().domain(n);return r.type="numeric",r}function FF(t,e){let{min:n,max:r,nice:i,flip:o}=e;const a=t.extent();a[0]<=0&&(a[1]>0?a[0]=Math.min(1,a[1]/jF):a[0]=1),a[1]<=a[0]&&(a[1]=jF*a[0]);const l=bF().domain(a);i&&l.nice();const s=l.domain();return n===r&&(n=r=null),n>0&&(s[0]=n),r>0&&(s[1]=r),l.domain(o?s.reverse():s),l.type="numeric",l}function DF(t,e){let{min:n,max:r,format:i,nice:o,flip:a}=e;const l=t.extent(),s=NF().domain(l);o&&s.nice(),i&&s.tickFormat(null,i);const u=s.domain();return n===r&&(n=r=null),n&&(u[0]=i(n)),r&&(u[1]=i(r)),s.domain(a?u.reverse():u),s.type="datetime",s}function qF(t,e){if(e.step)return e.step();const n=t.uniqueAscending().map((t=>e(t))),r=n.length;if(r<2)return 0;let i=1/0;for(let t=1;t<r;t++){const e=Math.abs(n[t]-n[t-1]);i=Math.min(i,e)}return i}function RF(t){const e=["px","steps"];let n=0,r=0,i="px";return function(o){if(void 0===o)return{left:n,right:r,unit:i};const a=o.unit;if(a&&!e.includes(a))throw new Error('Unit "'.concat(a,'" not recognised'));return({left:n=n,right:r=r,unit:i=i}=o),t}}function BF(t,e,n){const r={left:0,right:0},i=t.xData();if(i.string_array)return r;const{left:o,right:a,unit:l}=t.xPadding();if(i.numeric_array&&"linear"!==e.numeric_scale_type&&"px"!==l)return r;if("px"===l||!o&&!a)return{left:o,right:a};const s=i.uniqueAscending(),u=s.length;if(u<2)return r;let c=1/0;for(let t=1;t<u;t++){const e=Math.abs(s[t]-s[t-1]);c=Math.min(c,e)}const f=undefined,h=undefined,d=(Math.max(...n)-Math.min(...n)+(o+a)*c)/c,p=t.plot_width/d;return{left:o*p,right:a*p}}function HF(t,e){const n=e.x;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=t.xData(),i={nice:n.nice,flip:t.xFlipAxis()!==n.flip};let o;r.string_array?(o=LF,i.edge_padding=n.edge_padding):r.datetime_array?(o=DF,i.min=n.datetime_min,i.max=n.datetime_max,i.format=t.xDatetimeParse()):"log"===n.numeric_scale_type?(o=FF,i.min=n.log_min,i.max=n.log_max):(o=OF,i.min=n.linear_min,i.max=n.linear_max,i.include_zero="off"!==n.zero_axis&&("on"===n.zero_axis||t.xZeroAxis()));const a=o(r,i);if(e.domain_only)return a;const l=t.plot_width,s=t.margins.left,{left:u,right:c}=BF(t,n,a.domain()),f=undefined,h=s+u;let d=[h,h+(l-(u+c))];const p=e.global&&t.offsetLeft();return p&&(d=d.map((function(t){return t+p}))),a.range(d)}}function IF(t){return function(){return qF(t.xData(),t.xScale())}}function UF(t){const e=["px","steps"];let n=0,r=0,i="px";return function(o){if(void 0===o)return{bottom:n,top:r,unit:i};const a=o.unit;if(a&&!e.includes(a))throw new Error('Unit "'.concat(a,'" not recognised'));return({bottom:n=n,top:r=r,unit:i=i}=o),t}}function YF(t,e,n){const r={bottom:0,top:0},i=t.yData();if(i.string_array)return r;const{bottom:o,top:a,unit:l}=t.yPadding();if(i.numeric_array&&"linear"!==e.numeric_scale_type&&"px"!==l)return r;if("px"===l||!o&&!a)return{bottom:o,top:a};const s=i.uniqueAscending(),u=s.length;if(u<2)return r;let c=1/0;for(let t=1;t<u;t++){const e=Math.abs(s[t]-s[t-1]);c=Math.min(c,e)}const f=undefined,h=undefined,d=(Math.max(...n)-Math.min(...n)+(o+a)*c)/c,p=t.plot_height/d;return{bottom:o*p,top:a*p}}function WF(t,e){const n=e.y;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=t.yData();const i={nice:n.nice,flip:t.yFlipAxis()!==n.flip};let o;r.string_array?(o=LF,i.edge_padding=n.edge_padding):r.datetime_array?(o=DF,i.min=n.datetime_min,i.max=n.datetime_max,i.format=t.yDatetimeParse()):"log"===n.numeric_scale_type?(o=FF,i.min=n.log_min,i.max=n.log_max):(o=OF,i.min=n.linear_min,i.max=n.linear_max,i.include_zero="off"!==n.zero_axis&&("on"===n.zero_axis||t.yZeroAxis()));const a=o(r,i);if(e.domain_only)return a;const l=t.plot_height,s=t.margins.top,{bottom:u,top:c}=YF(t,n,a.domain()),f=l-(u+c),h=e.global&&t.offsetTop(),d=s+c;let p=[d+f,d];return h&&(p=p.map((function(t){return t+h}))),a.range(p)}}function VF(t){return function(){return qF(t.yData(),t.yScale())}}function ZF(t){const e=["px","steps"];let n=0,r=0,i="px";return function(o){if(void 0===o)return{bottom:n,top:r,unit:i};const a=o.unit;if(a&&!e.includes(a))throw new Error('Unit "'.concat(a,'" not recognised'));return({bottom:n=n,top:r=r,unit:i=i}=o),t}}function XF(t,e,n){const r={bottom:0,top:0},i=t.y2Data();if(i.string_array)return r;const{bottom:o,top:a,unit:l}=t.y2Padding();if(i.numeric_array&&"linear"!==e.numeric_scale_type&&"px"!==l)return r;if("px"===l||!o&&!a)return{bottom:o,top:a};const s=i.uniqueAscending(),u=s.length;if(u<2)return r;let c=1/0;for(let t=1;t<u;t++){const e=Math.abs(s[t]-s[t-1]);c=Math.min(c,e)}const f=undefined,h=undefined,d=(Math.max(...n)-Math.min(...n)+(o+a)*c)/c,p=t.plot_width/d;return{bottom:o*p,top:a*p}}function GF(t,e){const n=e.y2;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var r=t.y2Data();const i={nice:n.nice,flip:t.y2FlipAxis()!==n.flip};let o;r.string_array?(o=LF,i.edge_padding=n.edge_padding):r.datetime_array?(o=DF,i.min=n.datetime_min,i.max=n.datetime_max,i.format=t.y2DatetimeParse()):"log"===n.numeric_scale_type?(o=FF,i.min=n.log_min,i.max=n.log_max):(o=OF,i.min=n.linear_min,i.max=n.linear_max,i.include_zero="off"!==n.zero_axis&&("on"===n.zero_axis||t.y2ZeroAxis()));const a=o(r,i);if(e.domain_only)return a;const l=t.plot_height,s=t.margins.top,{bottom:u,top:c}=XF(t,n,a.domain()),f=l-(u+c),h=e.global&&t.offsetTop(),d=s+c;let p=[d+f,d];return h&&(p=p.map((function(t){return t+h}))),a.range(p)}}function $F(t){return function(){return qF(t.y2Data(),t.y2Scale())}}function QF(t){var e=!1;return function(n){return void 0===n?e:(e=!!n,t)}}function JF(t){let e=!1;return function(n){return void 0===n?e:(e=!!n,t)}}function KF(t){var e=!1,n=!1;return function(r){return void 0===r?!!e&&{keep_gridlines:n}:(e=!!r,n=!(!r||"object"!=typeof r||!r.keep_gridlines),t)}}function tD(t){let e=t.chart.select("rect.fl-chart-debug-rectangle");return function(){e.attr("width",t.width()).attr("height",t.height()).style("stroke",t.debugColor()).style("display",t.debug()?null:"none")}}function eD(t){return t.length?hO(t[0])?Array.from(new Set(t.map((t=>t.getTime())))).map((t=>new Date(t))):Array.from(new Set(t)):t.slice()}function nD(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=e[n],i=t[n+"Scale"]({domain_only:!0}),o=t[n+"Data"]();let a;const l=undefined;if("x"===n?"off"===r.axis_position:!r.axis_visible)a=[];else if(o.string_array)a=i.domain();else if("number"===r.tick_mode)a=i.ticks(r.tick_number);else{let e;const l=o.datetime_array;if("custom"===r.tick_mode){const i=undefined,o=t[n+(l?"Datetime":"Number")+"Parse"]();e=pO(r.tick_custom).map((t=>o(t)))}else{const r=t[n+"AutoTicks"]();e=Array.isArray(r)?r:r()}e=eD(e);const s=i.domain(),u=Math.min(...s),c=Math.max(...s);a=l?e.filter((t=>dO(t)&&t>=u&&t<=c)):e.filter((t=>!isNaN(t)&&t>=u&&t<=c))}return a}function rD(t,e){var n=function(){t.xTicks._update(nD(t,e,"x"))},r=function(){t.yTicks._update(nD(t,e,"y"))},i=function(){t.y2Ticks._update(nD(t,e,"y2"))};return function(){n(),r(),i()}}function iD(t,e){var n=t.chart.select("clipPath.fl-data-clip-path"),r=n.select("rect"),i=t.chart.select("clipPath.fl-grid-clip-path"),o=i.select("rect"),a=t.chart.select(".fl-data-background"),l=t.chart.select(".fl-data-foreground"),s=t.chart.select(".fl-gridlines");return function(){var u=t.identifier()+"-clip-path",c="url(#"+u+")";n.attr("id",u);var f=t.identifier()+"-grid-clip-path",h="url(#"+f+")";i.attr("id",f),a.attr("clip-path",c),l.attr("clip-path",c),s.attr("clip-path",h);var d=t.x_left,p=t.x_right,_=t.y_top,g=t.y_bottom,y=t.clip(),m=y.left?d:0,v=y.top?_:0,b=Math.max((y.right?p:t.width())-m,1),x=Math.max((y.bottom?g:t.height())-v,1);r.attr("x",m).attr("y",v).attr("width",b).attr("height",x);var w=tO(e.x.gridline_width,!0),k=tO(e.y.gridline_width,!0);o.transition().duration(t.animationDuration()).attr("x",d-w).attr("y",_-k).attr("width",p-d+2*w).attr("height",g-_+2*k)}}function oD(t,e){var n=e.background,r=t.chart.select("rect.fl-chart-fill"),i=t.chart.select("image.fl-chart-image"),o=t.chart.select("rect.fl-chart-interaction");return function(){var e=t.x_left,a=t.y_top,l=Math.max(t.plot_width,1),s=Math.max(t.plot_height,1);r.attr("x",e).attr("y",a).attr("width",l).attr("height",s).attr("fill",n.background_color_enabled?n.background_color:"none"),i.attr("x",e).attr("y",a).attr("width",l).attr("height",s).attr("xlink:href",n.background_image_enabled?n.background_image_src:null).attr("preserveAspectRatio",(function(){return"stretch"==n.background_image_size?"none":n.background_image_position+" "+n.background_image_size})),o.attr("x",e).attr("y",a).attr("width",l).attr("height",s)}}function aD(t,e){var n=t.significant_digits-e.significant_digits;return n||((n=e.exponent-t.exponent)||(n=Math.abs(e.value)-Math.abs(t.value))?n:n=e.value-t.value)}function lD(t){t.style("user-select","none").style("-moz-user-select","none").style("-webkit-user-select","none").style("-ms-user-select","none").style("cursor","default")}function sD(){return document.body.getAttribute("dir")}function uD(t,e){var n=e.x,r,i,o,a,l,s,u,c,f,h,d,p,_,g,y,m,v,b,x,w;function k(){r=fO(t.xScale()),i=fO(t.yScale()),o=v?t.animationDuration():0,p=t.x_left,g=t.x_right,_=(p+g)/2,void 0===y&&(y=p),v||(v=r),b=v.type===r.type&&"ordinal"!==r.type?v:r,x=v.type===r.type&&"ordinal"!==v.type?r:v,a=n.line_and_tick_color,l=tO(n.line_and_tick_width,!0),s=n.tick_label_color;var e="default"===n.tick_label_position,m=t.xTicks(),w=m.max_box_height,k=m.length?tO(n.tick_padding):0;"top"!=n.axis_position&&"bottom"!=n.axis_position||(w+=k);var M="out"===n.tick_side;u=e?tO(n.tick_length)*(M?1:-1):w,c=tO(n.tick_label_size),f=(M&&e?u:0)+k,h=tO(n.title_size),d=t.xTitle()}var M=function(){var v=t.chart.select("g.fl-bottom-axis"),k=v.select("g.fl-axis-line"),M=v.select("g.fl-axis-ticks"),A=v.select("g.fl-axis-title"),S;return function(){var v=n.axis_position,C={pos:v},E=!t.xHide()&&-1!==["bottom","float-below"].indexOf(v),z=E?t.xTicks():[],T=t.y_bottom;void 0===S&&(S=T);var N=T+tO(n.title_padding);function j(t,e){return void 0===t||isNaN(t)?e:t}"bottom"===v&&(N+=f+z.max_box_height,C.extended_gridline=T+f+z.max_box_height);var L=S,P=T;"float-below"===v&&(L=j((w||i)(n.y_axis_position),S),P=j(i(n.y_axis_position),T));var O=k.selectAll("line").data(E&&n.line_visible?[r.domain()]:[]);O.exit().style("stroke",a).style("stroke-width",l).transition().duration(o).attr("x1",p).attr("x2",g).attr("y1",P).attr("y2",P).style("opacity",0).remove();var F=O.enter().append("line").style("shape-rendering","crispEdges").style("stroke-linecap","square").style("stroke-width",l).attr("x1",y).attr("x2",m).attr("y1",L).attr("y2",L).style("opacity",0);O.merge(F).style("stroke",a).style("stroke-width",l).transition().duration(o).attr("x1",p).attr("x2",g).attr("y1",P).attr("y2",P).style("opacity",1);var D=E?z:[];"numeric"===z.type&&"custom"!==n.tick_mode&&(D=z.slice().sort(aD));var q=function(t){var e="default"==n.tick_label_position?-n.tick_label_angle:-90,r=oO(e,0,0);if("default"!==n.tick_label_position){var i="left"===n.tick_label_position?-.3:1;return iO(0,f)+" "+r+" "+iO(0,c*i)}return 0===e?iO(t.text_width/2,f+.66*c):-90===e?iO(0,f)+" "+r+" "+iO(0,.33*c-t.multiline_offset):iO(0,f)+" "+r+" "+iO(0,.66*c)},R=M.selectAll("g").data(D,(function(t){return t.type+"-"+t.value})),B=R.exit();B.transition().duration(o).attr("transform",(function(t){return iO(x(t.value),P)})).style("opacity",0).remove(),B.each((function(){var t=gT(this);t.select("line").style("stroke",a).style("stroke-width",l).transition().duration(o).attr("y2",u),t.select("text").style("fill",s).style("font-size",c+"px").style("font-weight",n.tick_label_weight).attr("transform",q).transition().duration(o)}));var H=R.enter().append("g").style("opacity",0);H.attr("transform",(function(t){return iO(b(t.value),L)})),H.each((function(){var t=gT(this);t.append("line").attr("y2",u),t.append("text").attr("text-anchor","middle").attr("transform",q).call(lD)}));var I=R.merge(H);I.transition().duration(o).style("opacity",1).attr("transform",(function(t){return iO(r(t.value),P)}));var U=(Y=[],W=P+f,function(t){var n=r(t.value);if("float-below"===v){var i=r.range(),o,a;if(e.y.axis_visible&&n-t.box_width_left<i[0])return 0;if(e.y2.axis_visible&&n+t.box_width_right>i[1])return 0}for(var l=[n,W],s,u,c=[l,[n+t.box_width_right,W+t.box_height_right]],f=[l,[n-t.box_width_left,W+t.box_height_left]],h=0;h<Y.length;h++){var d=Y[h];if(n<=d.x_anchor){if(uO(c,d.q))return 0}else if(uO(d.p,f))return 0}return Y.push({x_anchor:n,p:c,q:f}),1}),Y,W;const V=sD();I.each((function(){var t=gT(this);t.select("line").style("stroke",a).style("stroke-width",l).transition().duration(o).attr("y2",u),t.select("text").each((function(){var t=gT(this).selectAll("tspan").data((function(t){return t.lines}));t.merge(t.enter().append("tspan")).attr("x",0).attr("dy",(function(t,e){return e?n.tick_label_line_height+"em":0})).text((function(t){return"number"==typeof t&&isNaN(t)?"":t})),t.exit().remove()})).attr("text-anchor","rtl"===V?"start":"end").style("fill",s).style("font-size",c+"px").style("font-weight",n.tick_label_weight).transition().duration(o).style("opacity",U).attr("transform",q)}));var Z=A.selectAll("text").data(E&&d?[d]:[]);return Z.exit().remove(),Z.enter().append("text").attr("text-anchor","middle").style("font-size",h+"px").style("fill",n.title_color).style("font-weight",n.title_weight).call(lD).transition().duration(0).delay(o).text((function(t){return t})).attr("x",_).attr("y",N).attr("dy",h),Z.text((function(t){return t})).style("fill",n.title_color).style("font-size",h+"px").style("font-weight",n.title_weight).transition().duration(o).attr("x",_).attr("y",N).attr("dy",h),S=T,"bottom"==v?C:null}}(),A=function(){var m=t.chart.select("g.fl-top-axis"),v=m.select("g.fl-axis-line"),k=m.select("g.fl-axis-ticks"),M=m.select("g.fl-axis-title"),A;return function(){var m=n.axis_position,S={pos:m},C=!t.xHide()&&-1!==["top","float-above"].indexOf(m),E=C?t.xTicks():[],z=t.y_top;void 0===A&&(A=z);var T=z-tO(n.title_padding);"top"===m&&(T-=f+E.max_box_height,S.extended_gridline=z-(f+E.max_box_height));var N="float-above"===m?(w||i)(n.y_axis_position):A,j="float-above"===m?i(n.y_axis_position):z,L=v.selectAll("line").data(C&&n.line_visible?[r.domain()]:[]);L.exit().style("stroke",a).style("stroke-width",l).transition().duration(o).attr("x1",p).attr("x2",g).attr("y1",j).attr("y2",j).style("opacity",0).remove();var P=L.enter().append("line").style("shape-rendering","crispEdges").style("stroke-linecap","square").style("stroke-width",l).attr("x1",y).attr("x2",y).attr("y1",N).attr("y2",N).style("opacity",0);L.merge(P).style("stroke",a).style("stroke-width",l).transition().duration(o).attr("x1",p).attr("x2",g).attr("y1",j).attr("y2",j).style("opacity",1);var O=[];C&&(O="numeric"===E.type?E.slice().sort(aD):E);var F=function(t){var e="default"==n.tick_label_position?-n.tick_label_angle:-90,r=oO(e,0,0);if("default"!==n.tick_label_position){var i="left"===n.tick_label_position?-.3:1;return iO(0,-f)+" "+r+" "+iO(0,c*i)}return 0===e?iO(-t.text_width/2,-(f+.33*c)):-90===e?iO(0,-f)+" "+r+" "+iO(0,.33*c-t.multiline_offset):iO(0,-f)+" "+r+iO(0,-t.multiline_offset)},D=k.selectAll("g").data(O,(function(t){return t.type+"-"+t.value})),q=D.exit();q.transition().duration(o).attr("transform",(function(t){return iO(x(t.value),j)})).style("opacity",0).remove(),q.each((function(){var t=gT(this);t.select("line").style("stroke",a).style("stroke-width",l).transition().duration(o).attr("y2",-u),t.select("text").style("fill",s).style("font-size",c+"px").style("font-weight",n.tick_label_weight).attr("transform",F).transition().duration(o)}));var R=D.enter().append("g").style("opacity",0);R.attr("transform",(function(t){return iO(b(t.value),N)})),R.each((function(){var t=gT(this);t.append("line").attr("y2",-u),t.append("text").attr("text-anchor","middle").attr("transform",F).call(lD)}));var B=D.merge(R);B.transition().duration(o).style("opacity",1).attr("transform",(function(t){return iO(r(t.value),j)}));var H=(I=[],U=j+f,function(t){var n=r(t.value);if("float-above"===m){var i=r.range(),o,a;if(e.y.axis_visible&&n-t.box_width_left<i[0])return 0;if(e.y2.axis_visible&&n+t.box_width_right>i[1])return 0}for(var l=[n,U],s,u,c=[l,[n-t.box_width_left,U-t.box_height_left]],f=[l,[n+t.box_width_right,U-t.box_height_right]],h=0;h<I.length;h++){var d=I[h];if(n<=d.x_anchor){if(uO(f,d.p))return 0}else if(uO(c,d.q))return 0}return I.push({x_anchor:n,p:c,q:f}),1}),I,U;const Y=sD();B.each((function(){var t=gT(this);t.select("line").style("stroke",a).style("stroke-width",l).transition().duration(o).attr("y2",-u),t.select("text").each((function(){var t=gT(this).selectAll("tspan").data((function(t){return t.lines}));t.merge(t.enter().append("tspan")).attr("x",0).attr("dy",(function(t,e){return e?n.tick_label_line_height+"em":0})).text((function(t){return"number"==typeof t&&isNaN(t)?"":t})),t.exit().remove()})).attr("text-anchor","rtl"===Y?"end":"start").style("fill",s).style("font-size",c+"px").style("font-weight",n.tick_label_weight).transition().duration(o).style("opacity",H).attr("transform",F)}));var W=M.selectAll("text").data(C&&d?[d]:[]);return W.exit().remove(),W.enter().append("text").attr("text-anchor","middle").style("font-size",h+"px").style("fill",n.title_color).style("font-weight",n.title_weight).call(lD).transition().duration(0).delay(o).text((function(t){return t})).attr("x",_).attr("y",T).attr("dy",-.33*h),W.text((function(t){return t})).style("fill",n.title_color).style("font-size",h+"px").style("font-weight",n.title_weight).transition().duration(o).attr("x",_).attr("y",T).attr("dy",-.33*h),A=z,"top"==m?S:null}}();return function(){k();var t=M(),e=A();return v=r,w=i,y=p,m=g,t||e}}function cD(t,e){var n=t.chart.select("g.fl-left-axis"),r=n.select("g.fl-axis-line"),i=n.select("g.fl-axis-ticks"),o=n.select("g.fl-axis-title"),a=e.y,l,s,u,c,f;return function(){var n={},h=a.axis_visible&&!t.yHide(),d=fO(t.xScale()),p=fO(t.yScale()),_=h?t.yTicks():[],g=l?t.animationDuration():0;l||(l=d),s||(s=p);var y=s.type===p.type&&"ordinal"!==p.type?s:p,m=s.type===p.type&&"ordinal"!==s.type?p:s,v=t.y_bottom,b=t.y_top;void 0===u&&(u=v),void 0===c&&(c=b);var x=t.x_left;void 0===f&&(f=x);var w=a.line_and_tick_color,k=tO(a.line_and_tick_width,!0),M=a.tick_label_color,A="default"===a.tick_label_position,S="out"===a.tick_side,C=tO(a.tick_padding),E=t.yTicks().max_box_width+C,z=A?tO(a.tick_length)*(S?1:-1):E,T=tO(a.tick_label_size),N=(S&&A?z:0)+C,j=t.yTitle(),L=tO(a.title_size),P=N+_.max_box_width+tO(a.title_padding)+.33*L;n.extended_gridline=x-(N+_.max_box_width);var O=(b+v)/2,F=r.selectAll("line").data(h&&a.line_visible?[p.domain()]:[]);F.exit().style("stroke",w).style("stroke-width",k).transition().duration(g).attr("x1",x).attr("x2",x).attr("y1",v).attr("y2",b).style("opacity",0).remove();var D=F.enter().append("line").style("shape-rendering","crispEdges").style("stroke-linecap","square").style("stroke-width",k).attr("x1",f).attr("x2",f).attr("y1",u).attr("y2",c).style("opacity",0);F.merge(D).style("stroke",w).style("stroke-width",k).transition().duration(g).attr("x1",x).attr("x2",x).attr("y1",v).attr("y2",b).style("opacity",1);var q=h?_:[];function R(t){var e,n;if("default"!==a.tick_label_position)return iO(-N-(_.max_box_width-t.box_width),("above"===a.tick_label_position?-.3:1)*T);var r=-a.tick_label_angle;if(0===r)return iO(-N,.33*T-t.multiline_offset);var i=iO(-N,0)+" "+oO(r);return-90===r&&(i+=" "+iO(t.text_width/2,0)),i}"numeric"===_.type&&"custom"!==a.tick_mode&&(q=_.slice().sort(aD));var B=i.selectAll("g").data(q,(function(t){return t.type+"-"+t.value})),H=B.exit();H.transition().duration(g).attr("transform",(function(t){return iO(x,m(t.value))})).style("opacity",0).remove(),H.each((function(){var t=gT(this);t.select("line").style("stroke",w).style("stroke-width",k).transition().duration(g).attr("x2",-z),t.select("text").style("fill",M).style("font-size",T+"px").style("font-weight",a.tick_label_weight).attr("transform",R).transition().duration(g)}));var I=B.enter().append("g").style("opacity",0);I.attr("transform",(function(t){return iO(f,y(t.value))}));const U=undefined,Y="rtl"===sD()?"start":"end";I.each((function(){var t=gT(this);t.append("line").attr("x2",-z),t.append("text").attr("text-anchor",Y).attr("transform",R).call(lD)}));var W=B.merge(I);W.transition().duration(g).style("opacity",1).attr("transform",(function(t){return iO(x,p(t.value))}));var V=(Z=[],X=x-N,function(t){for(var e=p(t.value),n=[X,e],r,i,o=[n,[X-t.box_width_above,e-t.box_height_above]],a=[n,[X-t.box_width_below,e+t.box_height_below]],l=0;l<Z.length;l++){var s=Z[l];if(e>=s.y_anchor){if(uO(o,s.q))return 0}else if(uO(s.p,a))return 0}return Z.push({y_anchor:e,p:o,q:a}),1}),Z,X;W.each((function(){var t=gT(this);t.select("line").style("stroke",w).style("stroke-width",k).transition().duration(g).attr("x2",-z),t.select("text").each((function(){var t=gT(this).selectAll("tspan").data((function(t){return t.lines}));t.merge(t.enter().append("tspan")).attr("x",0).attr("dy",(function(t,e){return e?a.tick_label_line_height+"em":0})).text((function(t){return"number"==typeof t&&isNaN(t)?"":t})),t.exit().remove()})).style("fill",M).style("font-size",T+"px").style("font-weight",a.tick_label_weight).attr("text-anchor",Y).transition().duration(g).style("opacity",V).attr("transform",R)}));var G=o.selectAll("text").data(h&&j?[j]:[]);G.exit().remove();var $=function(){if("side"===a.title_position)return iO(x,O)+" "+oO(-90)+" "+iO(0,-P);const n=x-t.margins._calculated().left,r=undefined,i=["top","float-above"].includes(e.x.axis_position),o=tO(a.title_padding);let l;if(i){const t=_[0].box_height_below,e=tO(.66*a.title_size),n=undefined;l=v+(t+o+e)}else{const t=_[_.length-1].box_height_above,e=undefined;l=b-(t+o)}return iO(n,l)};return G.enter().append("text").attr("text-anchor","side"===a.title_position?"middle":"start").style("font-size",L+"px").style("fill",a.title_color).style("font-weight",a.title_weight).call(lD).transition().duration(0).delay(g).text((function(t){return t})).attr("transform",$),G.text((function(t){return t})).attr("text-anchor","side"===a.title_position?"middle":"start").style("fill",a.title_color).style("font-size",L+"px").style("font-weight",a.title_weight).transition().duration(g).attr("transform",$),l=d,s=p,u=v,c=b,f=x,n}}function fD(t,e){var n=t.chart.select("g.fl-right-axis"),r=n.select("g.fl-axis-line"),i=n.select("g.fl-axis-ticks"),o=n.select("g.fl-axis-title"),a=e.y2,l,s,u,c,f;return function(){var n={},h=a.axis_visible&&!t.y2Hide(),d=fO(t.xScale()),p=fO(t.y2Scale()),_=h?t.y2Ticks():[],g=l?t.animationDuration():0;l||(l=d),s||(s=p);var y=s.type===p.type&&"ordinal"!==p.type?s:p,m=s.type===p.type&&"ordinal"!==s.type?p:s,v=t.y_bottom,b=t.y_top;void 0===u&&(u=v),void 0===c&&(c=b);var x=t.x_right;void 0===f&&(f=x);var w=a.line_and_tick_color,k=tO(a.line_and_tick_width,!0),M=a.tick_label_color,A="default"===a.tick_label_position,S="out"===a.tick_side,C=tO(a.tick_padding),E=t.y2Ticks().max_box_width+C,z=A?tO(a.tick_length)*(S?1:-1):E,T=tO(a.tick_label_size),N=(S&&A?z:0)+C,j=t.y2Title(),L=tO(a.title_size),P=N+_.max_box_width+tO(a.title_padding)+.85*L;n.extended_gridline=x+N+_.max_box_width;var O=(v+b)/2,F=r.selectAll("line").data(h&&a.line_visible?[p.domain()]:[]);F.exit().style("stroke",w).style("stroke-width",k).transition().duration(g).attr("x1",x).attr("x2",x).attr("y1",v).attr("y2",b).style("opacity",0).remove();var D=F.enter().append("line").style("shape-rendering","crispEdges").style("stroke-linecap","square").style("stroke-width",k).attr("x1",f).attr("x2",f).attr("y1",u).attr("y2",c).style("opacity",0);F.merge(D).style("stroke",w).style("stroke-width",k).transition().duration(g).attr("x1",x).attr("x2",x).attr("y1",v).attr("y2",b).style("opacity",1);var q="numeric"===_.type?_.slice().sort(aD):_;function R(t){var e,n;if("default"!==a.tick_label_position)return iO(N+(_.max_box_width-t.box_width),("above"===a.tick_label_position?-.3:1)*T);var r=-a.tick_label_angle;if(0===r)return iO(N,.33*T-t.multiline_offset);var i=iO(N,0)+" "+oO(r);return-90===r&&(i+=" "+iO(t.text_width/2,0)),i}var B=i.selectAll("g").data(q,(function(t){return t.type+"-"+t.value})),H=B.exit();H.transition().duration(g).attr("transform",(function(t){return iO(x,m(t.value))})).style("opacity",0).remove(),H.each((function(){var t=gT(this);t.select("line").style("stroke",w).style("stroke-width",k).transition().duration(g).attr("x2",-z),t.select("text").style("fill",M).style("font-size",T+"px").style("font-weight",a.tick_label_weight).attr("transform",R).transition().duration(g)}));var I=B.enter().append("g").style("opacity",0);I.attr("transform",(function(t){return iO(f,y(t.value))}));const U=sD();I.each((function(){var t=gT(this);t.append("line").attr("x2",z),t.append("text").attr("transform",R).call(lD)}));var Y=B.merge(I);Y.transition().duration(g).style("opacity",1).attr("transform",(function(t){return iO(x,p(t.value))})).attr("text-anchor","rtl"===U?"end":"start");var W=(V=[],Z=x+N,function(t){for(var e=p(t.value),n=[Z,e],r,i,o=[n,[Z-t.box_width_above,e-t.box_height_above]],a=[n,[Z-t.box_width_below,e+t.box_height_below]],l=0;l<V.length;l++){var s=V[l];if(e>=s.y_anchor){if(uO(o,s.q))return 0}else if(uO(s.p,a))return 0}return V.push({y_anchor:e,p:o,q:a}),1}),V,Z;Y.each((function(){var t=gT(this);t.select("line").style("stroke",w).style("stroke-width",k).transition().duration(g).attr("x2",z),t.select("text").each((function(){var t=gT(this).selectAll("tspan").data((function(t){return t.lines}));t.merge(t.enter().append("tspan")).attr("x",0).attr("dy",(function(t,e){return e?a.tick_label_line_height+"em":0})).text((function(t){return"number"==typeof t&&isNaN(t)?"":t})),t.exit().remove()})).style("fill",M).style("font-size",T+"px").style("font-weight",a.tick_label_weight).transition().duration(g).style("opacity",W).attr("transform",R)}));var X=o.selectAll("text").data(h&&j?[j]:[]);X.exit().remove();var G=function(){if("side"===a.title_position)return iO(x,O)+" "+oO(-90)+" "+iO(0,P);const n=x+t.margins._calculated().right,r=undefined,i=["top","float-above"].includes(e.x.axis_position),o=tO(a.title_padding);let l;if(i){const t=_[0].box_height_below,e=tO(.66*a.title_size),n=undefined;l=v+(t+o+e)}else{const t=_[_.length-1].box_height_above,e=undefined;l=b-(t+o)}return iO(n,l)};return X.enter().append("text").attr("text-anchor","side"===a.title_position?"middle":"end").style("font-size",L+"px").style("fill",a.title_color).style("font-weight",a.title_weight).call(lD).transition().duration(0).delay(g).text((function(t){return t})).attr("transform",G),X.text((function(t){return t})).attr("text-anchor","side"===a.title_position?"middle":"end").style("fill",a.title_color).style("font-size",L+"px").style("font-weight",a.title_weight).transition().duration(g).attr("transform",G),l=d,s=p,u=v,c=b,f=x,n}}function hD(t,e){var n=uD(t,e),r=cD(t,e),i=fD(t,e);return function(){var t,e,o;return{x:n(),y:r(),y2:i()}}}var dD={solid:null,dash:[4,1],dot:[1,1],dot_dash:[4,1,1,1]},pD,_D,gD;function yD(t){if("solid"===t)return null;var e=tO(1)/4;return dD[t].map((function(t){return t*e})).join(" ")}function mD(t,e){var n=e.x,r=e.y,i=e.y2,o=t.chart.select("g.fl-gridlines-vertical"),a=t.chart.select("g.fl-gridlines-horizontal"),l,s,u,c,f,h,d;return function(p){var _=fO(t.xScale()),g=fO(t.yScale()),y=fO(t.y2Scale()),m=t.x_left,v=t.x_right;void 0===c&&(c=m),void 0===f&&(f=v);var b=t.y_bottom,x=t.y_top;void 0===h&&(h=b),void 0===d&&(d=x),s=s||g,u=u||y;var w=(l=l||_).type===_.type&&"ordinal"!==_.type?l:_,k=l.type===_.type&&"ordinal"!==l.type?_:l,M=s.type===g.type&&"ordinal"!==g.type?s:g,A=s.type===g.type&&"ordinal"!==s.type?g:s,S=u.type===y.type&&"ordinal"!==u.type?u:y,C=u.type===y.type&&"ordinal"!==u.type?y:u,E=l?t.animationDuration():0,z=function(n){if("x"===n&&"off"===e.x.axis_position)return[];if("x"!==n&&!e[n].axis_visible)return[];if(!e[n].gridlines_visible)return[];var r=t[n+"Hide"]();return r&&!r.keep_gridlines?[]:t[n+"Ticks"]()},T=z("x"),N=z("y"),j=z("y2"),L=T.map((function(t){return{type:t.type,value:t.value,dasharray:yD(n.gridline_style),stroke:n.gridline_color,width:tO(n.gridline_width,!0),x_enter:w(t.value),x:_(t.value)}}));if(n.gridline_category_dividers&&_.step){var P=_.step();L.pop(),L.forEach((function(t){if(t.x_enter+=P/2,t.x+=P/2,n.gridline_category_dividers_extend){var e=p.x&&"top"==p.x.pos,r=p.x&&"bottom"==p.x.pos;e?t.y2=p.x.extended_gridline:r&&(t.y1=p.x.extended_gridline)}}))}var O=N.map((function(t){return{axis:"y",type:t.type,value:t.value,dasharray:yD(r.gridline_style),stroke:r.gridline_color,width:tO(r.gridline_width,!0),y_enter:M(t.value),y:g(t.value)}}));if(r.gridline_category_dividers&&g.step){var F=g.step();O.pop(),O.forEach((function(t){t.y_enter-=F/2,t.y-=F/2,r.gridline_category_dividers_extend&&(t.x1=p.y.extended_gridline)}))}var D=j.map((function(t){return{axis:"y2",type:t.type,value:t.value,dasharray:yD(i.gridline_style),stroke:i.gridline_color,width:tO(i.gridline_width),y_enter:S(t.value),y:y(t.value)}}));if(i.gridline_category_dividers&&y.step){var q=y.step();D.pop(),D.forEach((function(t){t.y_enter-=q/2,t.y-=q/2,i.gridline_category_dividers_extend&&(t.x2=p.y2.extended_gridline)}))}var R=O.concat(D),B=o.selectAll("line").data(L,(function(t){return t.type+"-"+t.value}));B.exit().attr("stroke-dasharray",(function(t){return t.dasharray})).style("stroke",(function(t){return t.stroke})).style("stroke-width",(function(t){return t.width})).transition().duration(E).attr("x1",(function(t){return k(t.value)})).attr("x2",(function(t){return k(t.value)})).attr("y1",b).attr("y2",x).style("opacity",0).remove();var H=B.enter().append("line").style("shape-rendering","crispEdges").attr("x1",(function(t){return t.x_enter})).attr("x2",(function(t){return t.x_enter})).attr("y1",h).attr("y2",d).style("opacity",0);B.merge(H).attr("stroke-dasharray",(function(t){return t.dasharray})).style("stroke",(function(t){return t.stroke})).style("stroke-width",(function(t){return t.width})).transition().duration(E).attr("x1",(function(t){return t.x})).attr("x2",(function(t){return t.x})).attr("y1",b).attr("y2",x).style("opacity",1);var I=a.selectAll("line").data(R,(function(t){return t.axis+"-"+t.type+"-"+t.value}));I.exit().attr("stroke-dasharray",(function(t){return t.dasharray})).style("stroke",(function(t){return t.stroke})).style("stroke-width",(function(t){return t.width})).transition().duration(E).attr("x1",m).attr("x2",v).attr("y1",(function(t){return"y"===t.axis?A(t.value):C(t.value)})).attr("y2",(function(t){return"y"===t.axis?A(t.value):C(t.value)})).style("opacity",0).remove();var U=I.enter().append("line").style("shape-rendering","crispEdges").attr("x1",c).attr("x2",f).attr("y1",(function(t){return t.y_enter})).attr("y2",(function(t){return t.y_enter})).style("opacity",0);I.merge(U).attr("stroke-dasharray",(function(t){return t.dasharray})).style("stroke",(function(t){return t.stroke})).style("stroke-width",(function(t){return t.width})).transition().duration(E).attr("x1",m).attr("x2",v).attr("y1",(function(t){return t.y})).attr("y2",(function(t){return t.y})).style("opacity",1),l=_,s=g,u=y,c=m,f=v}}function vD(t,e){var n=function(){var e=null;(t.offsetLeft()||t.offsetTop())&&(e="translate("+t.offsetLeft()+","+t.offsetTop()+")"),t.chart.attr("transform",e)},r=tD(t),i=rD(t,e),o=function(e){t.margins._update(e)},a=iD(t,e),l=oD(t,e),s=hD(t,e),u=mD(t,e);return function(e){if(e=e||{},nO(),n(),r(),i(),o(e.margins),e.skip_rendering)return t;a(),l();var c=s();return u(c),t}}function bD(t,e){e=yE(e);var n={},r=mT(t);Object.defineProperty(n,"svg",{get:r.getSvg}),n.container=r.container,n.chart=kT(n),n.data_background=n.chart.select("g.fl-data-background"),n.data_foreground=n.chart.select("g.fl-data-foreground"),n.identifier=AT(n),n.debug=ST(n),n.debugColor=CT(n),n.clip=TT(n),n.animationDuration=zj(n);var i=aP(n);return n.width=i.width,n.height=i.height,n.plotAspect=i.plotAspect,Object.defineProperty(n,"plot_width",{get:i.plotWidth}),Object.defineProperty(n,"plot_height",{get:i.plotHeight}),Object.defineProperty(n,"x_left",{get:i.xLeft}),Object.defineProperty(n,"x_right",{get:i.xRight}),Object.defineProperty(n,"y_bottom",{get:i.yBottom}),Object.defineProperty(n,"y_top",{get:i.yTop}),n.offsetLeft=lP(n),n.offsetTop=sP(n),n.margins=UO(n,e),n.xData=yO(n),n.yData=yO(n),n.y2Data=yO(n),n.xFormat=Nj(n),n.yFormat=Nj(n),n.y2Format=Nj(n),n.xNumberParse=iP(n),n.yNumberParse=iP(n),n.y2NumberParse=iP(n),n.xDatetimeParse=oP(n),n.yDatetimeParse=oP(n),n.y2DatetimeParse=oP(n),n.xTitle=jO(n,e),n.yTitle=LO(n,e),n.y2Title=PO(n,e),n.xTicks=kO(n,e),n.yTicks=AO(n,e),n.y2Ticks=SO(n,e),n.xAutoTicks=EO(n),n.yAutoTicks=zO(n),n.y2AutoTicks=TO(n),n.xScale=HF(n,e),n.yScale=WF(n,e),n.y2Scale=GF(n,e),n.xPadding=RF(n),n.yPadding=UF(n),n.y2Padding=ZF(n),n.xMinStep=IF(n),n.yMinStep=VF(n),n.y2MinStep=$F(n),n.xFlipAxis=JF(n),n.yFlipAxis=JF(n),n.y2FlipAxis=JF(n),n.xZeroAxis=QF(n),n.yZeroAxis=QF(n),n.y2ZeroAxis=QF(n),n.xHide=KF(n),n.yHide=KF(n),n.y2Hide=KF(n),n.y2Hide(!0),n.update=vD(n,e),n}function xD(){pD=sJ.getFormatterFunction()}function wD(){pD=sJ.getFormatterFunction(),_D=uJ(pD)}function kD(t){var e;return["beeswarm","multi-beeswarm","scatter","group-2d-packed"].indexOf(t)>-1}function MD(){var t,e,n=bm(cJ.getSection("primary")).append("div").classed("svg-container",!0).append("svg"),r={x:jc.xAxis,y:jc.yAxis};(gD=bD(n,r)).clip(!1),gD.data_foreground.append("rect").attr("id","svg-zoom-background").style("opacity",0);var i=gD.data_foreground.append("g").classed("zoom-container",!0);i.append("g").classed("elements",!0),i.append("g").classed("labels",!0),i.append("g").classed("group-labels",!0),gD.data_foreground.append("g").attr("id","svg-state-zoom")}function AD(t){var e,n=Kk(LM.map((function(e){return e.categoryColumns[t]}))).values();return n.sort(),n}function SD(t){var e=jc.position_by_1,n=CC(e),r=EC(e),i=zC(e),o=jC(e),a=jc.position_by_2,l=zC(a),s=jC(a),u=n?i:l,c=r?i:l,f,h;switch(t){case"group-2d-packed":f=s,h=o,gD.xData(AD(l)).yData(AD(i)).xAutoTitle(f).yAutoTitle(h);break;case"beeswarm":f=n?o:s,gD.xData(LM,(function(t){return+t.numericColumns[u]})).yData(["All"]).xAutoTitle(f).yAutoTitle("");break;case"multi-beeswarm":f=n?o:s,h=r?o:s,gD.xData(LM,(function(t){return+t.numericColumns[u]||0})).yData(AD(c)).xAutoTitle(f).yAutoTitle(h);break;case"scatter":f=o,h=s,gD.xData(LM,(function(t){return+t.numericColumns[i]||0})).yData(LM,(function(t){return+t.numericColumns[l]||0})).xAutoTitle(f).yAutoTitle(h)}}function CD(t){SD(t),gD.xFormat((function(e){return"group-2d-packed"===t?e.toString():_D(e)})).yFormat((function(e){return"scatter"===t?_D(e):e.toString()})).update({skip_rendering:!0}),gD.chart.selectAll(".fl-gridlines, .fl-axes").transition().style("opacity",kD(t)?1:0)}function ED(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function zD(t){return function(){return t}}function TD(t){return+t}var ND=[0,1];function jD(t){return t}function LD(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:zD(isNaN(e)?NaN:.5)}function PD(t,e){var n;return t>e&&(n=t,t=e,e=n),function(n){return Math.max(t,Math.min(e,n))}}function OD(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=LD(i,r),o=n(a,o)):(r=LD(r,i),o=n(o,a)),function(t){return o(r(t))}}function FD(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=LD(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=aM(t,e,1,r)-1;return o[n](i[n](e))}}function DD(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function qD(){var t=ND,e=ND,n=nw,r,i,o,a=jD,l,s,u;function c(){var n=Math.min(t.length,e.length);return a!==jD&&(a=PD(t[0],t[n-1])),l=n>2?FD:OD,s=u=null,f}function f(i){return null==i||isNaN(i=+i)?o:(s||(s=l(t.map(r),e,n)))(r(a(i)))}return f.invert=function(n){return a(i((u||(u=l(e,t.map(r),Gx)))(n)))},f.domain=function(e){return arguments.length?(t=Array.from(e,TD),c()):t.slice()},f.range=function(t){return arguments.length?(e=Array.from(t),c()):e.slice()},f.rangeRound=function(t){return e=Array.from(t),n=rw,c()},f.clamp=function(t){return arguments.length?(a=!!t||jD,c()):a!==jD},f.interpolate=function(t){return arguments.length?(n=t,c()):n},f.unknown=function(t){return arguments.length?(o=t,f):o},function(t,e){return r=t,i=e,c()}}function RD(t,e,n,r){var i=dM(t,e,n),o;switch((r=Jw(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(o=dk(i,a))||(r.precision=o),uk(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(o=pk(i,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=o-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(o=hk(i))||(r.precision=o-2*("%"===r.type))}return sk(r)}function BD(t){var e=t.domain;return t.ticks=function(t){var n=e();return fM(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return RD(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r=e(),i=0,o=r.length-1,a=r[i],l=r[o],s,u,c=10;for(l<a&&(u=a,a=l,l=u,u=i,i=o,o=u);c-- >0;){if((u=hM(a,l,n))===s)return r[i]=a,r[o]=l,e(r);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else{if(!(u<0))break;a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u}s=u}return t},t}function HD(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function ID(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function UD(t){return t<0?-t*t:t*t}function YD(t){var e=t(jD,jD),n=1;function r(){return 1===n?t(jD,jD):.5===n?t(ID,UD):t(HD(n),HD(1/n))}return e.exponent=function(t){return arguments.length?(n=+t,r()):n},BD(e)}function WD(){var t=YD(qD());return t.copy=function(){return DD(t,WD()).exponent(t.exponent())},ED.apply(t,arguments),t}function VD(){return WD.apply(null,arguments).exponent(.5)}var ZD=Array.prototype.slice;function XD(t){for(var e=t.length,n,r;e;)r=Math.random()*e--|0,n=t[e],t[e]=t[r],t[r]=n;return t}function GD(t){for(var e=0,n=(t=XD(ZD.call(t))).length,r=[],i,o;e<n;)i=t[e],o&&JD(o,i)?++e:(o=tq(r=$D(r,i)),e=0);return o}function $D(t,e){var n,r;if(KD(e,t))return[e];for(n=0;n<t.length;++n)if(QD(e,t[n])&&KD(nq(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(QD(nq(t[n],t[r]),e)&&QD(nq(t[n],e),t[r])&&QD(nq(t[r],e),t[n])&&KD(rq(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function QD(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function JD(t,e){var n=t.r-e.r+1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function KD(t,e){for(var n=0;n<e.length;++n)if(!JD(t,e[n]))return!1;return!0}function tq(t){switch(t.length){case 1:return eq(t[0]);case 2:return nq(t[0],t[1]);case 3:return rq(t[0],t[1],t[2])}}function eq(t){return{x:t.x,y:t.y,r:t.r}}function nq(t,e){var n=t.x,r=t.y,i=t.r,o=e.x,a=e.y,l=e.r,s=o-n,u=a-r,c=l-i,f=Math.sqrt(s*s+u*u);return{x:(n+o+s/f*c)/2,y:(r+a+u/f*c)/2,r:(f+i+l)/2}}function rq(t,e,n){var r=t.x,i=t.y,o=t.r,a=e.x,l=e.y,s=e.r,u=n.x,c=n.y,f=n.r,h=r-a,d=r-u,p=i-l,_=i-c,g=s-o,y=f-o,m=r*r+i*i-o*o,v=m-a*a-l*l+s*s,b=m-u*u-c*c+f*f,x=d*p-h*_,w=(p*b-_*v)/(2*x)-r,k=(_*g-p*y)/x,M=(d*v-h*b)/(2*x)-i,A=(h*y-d*g)/x,S=k*k+A*A-1,C=2*(o+w*k+M*A),E=w*w+M*M-o*o,z=-(S?(C+Math.sqrt(C*C-4*S*E))/(2*S):E/C);return{x:r+w+k*z,y:i+M+A*z,r:z}}function iq(t,e,n){var r=t.x-e.x,i,o,a=t.y-e.y,l,s,u=r*r+a*a;u?(o=e.r+n.r,o*=o,s=t.r+n.r,o>(s*=s)?(i=(u+s-o)/(2*u),l=Math.sqrt(Math.max(0,s/u-i*i)),n.x=t.x-i*r-l*a,n.y=t.y-i*a+l*r):(i=(u+o-s)/(2*u),l=Math.sqrt(Math.max(0,o/u-i*i)),n.x=e.x+i*r-l*a,n.y=e.y+i*a+l*r)):(n.x=e.x+n.r,n.y=e.y)}function oq(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function aq(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,o=(e.y*n.r+n.y*e.r)/r;return i*i+o*o}function lq(t){this._=t,this.next=null,this.previous=null}function sq(t){if(!(i=t.length))return 0;var e,n,r,i,o,a,l,s,u,c,f;if((e=t[0]).x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;iq(n,e,r=t[2]),e=new lq(e),n=new lq(n),r=new lq(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(l=3;l<i;++l){iq(e._,n._,r=t[l]),r=new lq(r),s=n.next,u=e.previous,c=n._.r,f=e._.r;do{if(c<=f){if(oq(s._,r._)){n=s,e.next=n,n.previous=e,--l;continue t}c+=s._.r,s=s.next}else{if(oq(u._,r._)){(e=u).next=n,n.previous=e,--l;continue t}f+=u._.r,u=u.previous}}while(s!==u.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,o=aq(e);(r=r.next)!==n;)(a=aq(r))<o&&(e=r,o=a);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=GD(e),l=0;l<i;++l)(e=t[l]).x-=r.x,e.y-=r.y;return r.r}function uq(t){return sq(t),t}function cq(t){if(isNaN(t))return"M0,0 a0,0 0 1 1 0,0 a0,0 0 1 1 0,0 z";var e="M0,-"+t+" a"+[t,t]+" 0 0 1 0,"+2*t;return e+=" a"+[t,t]+" 0 0 1 0,"+2*-t+"z"}function fq(t){return isNaN(t)?[[0,0],[0,0]]:[[-t,-t],[t,t]]}function hq(t){var e=2*t;return"M"+-t+","+-t+" h"+e+" v"+e+" h"+-e+" z"}function dq(t){return[[-t,-t],[t,t]]}function pq(t){var e=0,n=0,r=0,i=0;return t.forEach((function(t){e=Math.min(e,t.x-t.r),n=Math.max(n,t.x+t.r),r=Math.min(r,t.y-t.r),i=Math.max(i,t.y+t.r)})),{x0:e,x1:n,y0:r,y1:i,w:n-e,h:i-r}}function _q(t){return null!=t&&!isNaN(+t)}function gq(t,e){return t===e?0:_q(t)&&_q(e)?+t<+e?-1:1:typeof t==typeof e?t<e?-1:1:typeof t<typeof e?-1:1}function yq(t,e){return t===e?0:_q(t)&&_q(e)?+t>+e?-1:1:typeof t==typeof e?t>e?-1:1:typeof t>typeof e?-1:1}function mq(t,e){var n=jx(t,(function(t){return+e(t)})),r;return kA().domain([0,n])}function vq(t,e){var n=mq(t,e.sizeByAccessor),r=t.map((function(t){var r=+e.sizeByAccessor(t);return{id:t.__flourish_id,value:r,r:n(r),_data:t}}));uq(r);var i=pq(r),o,a,l=Math.min(e.width,e.height)/Math.max(i.w,i.h);n.range([0,l]);var s=-.5*(i.x0+i.x1),u=-.5*(i.y0+i.y1),c;return{nodes:r.map((function(t){var r=n(t.value);return{id:t.id,x:l*(t.x+s)+.5*e.width,y:l*(t.y+u)+.5*e.height,r:r,path:"square"===e.shape?hq(r):cq(r),bounds:"square"===e.shape?dq(r):fq(r),_data:t._data}})),labels:[],radius_scale:{domain:n.domain(),range:n.range()}}}function bq(t,e,n){for(var r,i,o=0,a=1/0,l=1;l<=t;l++){var s=Math.ceil(t/l),u=Math.min(e/l,n/s),c=s*l;u>o?(o=u,a=c,i=l,r=s):u==o&&c<a&&(a=c,i=l,r=s)}for(var f=[],h=e/i,d=n/r,p=0;p<r;p++){for(var _=n*(p+.5)/r,g=Math.min(i,t),y=0;y<g;y++){var m=e*(y+.5)/i;m+=(i-g)*h/2,f.push({cx:m,cy:_,w:h,h:d})}t-=i}return f}function xq(t,e){e=e||0;var n=1/0;t.forEach((function(t){if(0!=t.length){uq(t);var r=GD(t);t.cx-=r.x,t.cy-=r.y,t.scale=Math.max(0,Math.min(t.w-e,t.h-e)/(2*r.r)),n=Math.min(n,t.scale),t.forEach((function(e){e.group=t}))}})),t.scale=n}function wq(t,e){var n=jx(t,(function(t){return+e(t)})),r;return kA().domain([0,n])}function kq(t,e,n){var r,i=Kk(t.map((function(t){return e(t)}))).values();return"ascending"===n?i.sort(gq):"descending"===n&&i.sort(yq),i}function Mq(t,e){var n=wq(t,e.sizeByAccessor),r=kq(t,e.groupByAccessor,e.group_sort_method),i,o=bq(r.length,e.width,e.height).map((function(t,e){var n=[];return n.cx=t.cx,n.cy=t.cy,n.w=t.w,n.h=t.h,n.name=r[e],n}));t.forEach((function(t){var i=r.indexOf(e.groupByAccessor(t)),a=+e.sizeByAccessor(t)||0;o[i].push({id:t.__flourish_id,r:n(a),value:a,_data:t})})),xq(o,e.label_margin),n.range([0,o.scale]);var a=[];o.forEach((function(t){t.forEach((function(r){var i=n(r.value);a.push({id:r.id,x:t.cx+o.scale*r.x,y:t.cy+o.scale*r.y,r:i,path:"square"===e.shape?hq(i):cq(i),bounds:"square"===e.shape?dq(i):fq(i),_data:r._data})}))}));var l=o.map((function(t){return{x:t.cx,y:t.cy+.5*t.h,text:t.name}}));return{nodes:a,labels:l,radius_scale:{domain:n.domain(),range:n.range()}}}function Aq(t,e){var n=jx(t,(function(t){return+e(t)})),r;return kA().domain([0,n])}function Sq(t,e){var n=(t.range()[1]-t.range()[0])/t.domain().length,r=Math.abs(e.range()[1]-e.range()[0])/e.domain().length,i=[];return t.domain().forEach((function(o,a){e.domain().forEach((function(l,s){i.push({row:s,col:a,cx:t(o),cy:e(l),w:n,h:r})}))})),i}function Cq(t){var e=[];return t.forEach((function(t){void 0===e[t.row]&&(e[t.row]=[]);var n=e[t.row][t.col]=[];n.cx=t.cx,n.cy=t.cy,n.w=t.w,n.h=t.h})),e}function Eq(t,e,n,r){var i=n.xScale.domain(),o=n.yScale.domain();e.forEach((function(e){var a=o.indexOf(n.groupBy1Accessor(e)),l=i.indexOf(n.groupBy2Accessor(e)),s=+n.sizeByAccessor(e)||0;t[a][l].push({id:e.__flourish_id,r:r(s),value:s,_data:e})}))}function zq(t){var e=[];return t.forEach((function(t){t.forEach((function(t){e.push(t)}))})),e}function Tq(t,e){var n=Aq(t,e.sizeByAccessor),r,i=Cq(Sq(e.xScale,e.yScale));Eq(i,t,e,n),xq(i=zq(i)),n.range([0,i.scale]);var o=[];return i.forEach((function(t){t.forEach((function(r){var a=n(r.value);o.push({id:r.id,x:t.cx+i.scale*r.x,y:t.cy+i.scale*r.y,r:a,path:"square"===e.shape?hq(a):cq(a),bounds:"square"===e.shape?dq(a):fq(a),_data:r._data})}))})),{nodes:o,labels:[],radius_scale:{domain:n.domain(),range:n.range()}}}function Nq(t,e){var n=[];return t.forEach((function(t){t.x===e.x?n.push(t):t.x<e.x?t.x+t.r>e.x-e.r&&n.push(t):t.x>e.x&&t.x-t.r<e.x+e.r&&n.push(t)})),n}function jq(t,e){var n=(t.r+e.r)*(t.r+e.r),r=(e.x-t.x)*(e.x-t.x),i=Math.sqrt(n-r);return[t.y+i,t.y-i]}function Lq(t,e){var n,r;return Math.sqrt((e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y))<t.r+e.r}function Pq(t,e,n){for(var r=0;r<t.length;r++)if(r!==e&&Lq(t[r],n))return!0;return!1}function Oq(t,e){var n=1/0;return Pq(t,-1,{x:e.x,y:0,r:e.r})?(t.forEach((function(r,i){var o=jq(r,e);Math.abs(o[0])>Math.abs(n)||(Pq(t,i,{x:e.x,y:o[0],r:e.r})||(n=o[0]),Math.abs(o[1])>Math.abs(n)||Pq(t,i,{x:e.x,y:o[1],r:e.r})||(n=o[1]))})),n):n=0}function Fq(t,e){return 0===e.r?0:Oq(Nq(t,e),e);var n,r}function Dq(t){var e=[];return t.forEach((function(t){var n=Fq(e,t);e.push({x:t.x,y:n,r:t.r})})),e}function qq(t,e){var n;return t.map((function(t){return{x:t.x,r:e*t.r}}))}function Rq(t,e){var n,r,i;return jx(Dq(qq(t,e)),(function(t){return Math.abs(t.y)+t.r}))}function Bq(t,e,n,r,i,o){var a=.5*(e+n),l=Rq(t,a)-r;return 0===i||l<0&&Math.abs(l)<o?a:l<0?Bq(t,a,n,r,i-1,o):Bq(t,e,a,r,i-1,o)}function Hq(t,e){var n;return e/jx(t,(function(t){return t.r}))}function Iq(t,e,n){var r,i,o,a,l,s;return Bq(t,Hq(t,n/t.length/2),Hq(t,n/4),n/2,10,20)}function Uq(t,e){var n=jx(t,(function(t){return+e(t)})),r;return kA().domain([0,n])}function Yq(t,e){var n=Uq(t,e.sizeByAccessor),r=t.map((function(t){var r=+e.sizeByAccessor(t)||0;return{id:t.__flourish_id,x:e.xScale(e.positionByAccessor(t)),r:n(r),value:r,_data:t}}));r.sort((function(t,e){return e.r-t.r}));var i,o,a=Iq(r,e.xScale.range()[1]-e.xScale.range()[0],Math.abs(e.yScale.range()[1]-e.yScale.range()[0]));n.range([0,a]),r.forEach((function(t){t.r=n(t.value),t.path="square"===e.shape?hq(t.r):cq(t.r),t.bounds="square"===e.shape?dq(t.r):fq(t.r)}));var l=Dq(r),s=e.yScale("All");return r.forEach((function(t,e){t.y=s+l[e].y})),{nodes:r,labels:[],radius_scale:{domain:n.domain(),range:n.range()}}}function Wq(t,e){var n=jx(t,(function(t){return+e(t)})),r;return kA().domain([0,n])}function Vq(t,e){var n=Wq(t,e.sizeByAccessor),r={},i=e.yScale.domain();i.forEach((function(t){r[t]={id:t,y:e.yScale(t),data:[]}})),t.forEach((function(t){var i=+e.sizeByAccessor(t)||0;r[e.groupByAccessor(t)].data.push({id:t.__flourish_id,x:e.xScale(e.positionByAccessor(t)),r:n(i),value:i,_data:t})})),i.forEach((function(t){var e;r[t].data.sort((function(t,e){return e.r-t.r}))}));var o=e.xScale.range()[1]-e.xScale.range()[0],a=Math.abs(e.yScale.range()[1]-e.yScale.range()[0])/e.yScale.domain().length,l=1/0;i.forEach((function(t){var e,n=Iq(r[t].data,o,a);l=Math.min(l,n)})),n.range([0,l]),i.forEach((function(t){var i;r[t].data.forEach((function(t){t.r=n(t.value),t.path="square"===e.shape?hq(t.r):cq(t.r),t.bounds="square"===e.shape?dq(t.r):fq(t.r)}))})),i.forEach((function(t){var e=r[t];e.circles=Dq(e.data)}));var s=[];return i.forEach((function(t){var e=r[t];e.circles.forEach((function(t,n){s.push({id:e.data[n].id,path:e.data[n].path,bounds:e.data[n].bounds,x:t.x,y:e.y+t.y,r:t.r,_data:e.data[n]._data})}))})),{nodes:s,labels:[],radius_scale:{domain:n.domain(),range:n.range()}}}function Zq(t,e){var n=jx(t,(function(t){return+e.sizeByAccessor(t)||0})),r=kA().domain([0,n]).range([0,e.max_radius]),i;return{nodes:t.map((function(t){var n=r(e.sizeByAccessor(t));return{id:t.__flourish_id,x:e.xScale(e.positionBy1Accessor(t)),y:e.yScale(e.positionBy2Accessor(t)),r:n,path:"square"===e.shape?hq(n):cq(n),bounds:"square"===e.shape?dq(n):fq(n),_data:t}})),labels:[],radius_scale:{domain:r.domain(),range:r.range()}}}function Xq(){return new Gq}function Gq(){this.reset()}Gq.prototype={constructor:Gq,reset:function(){this.s=this.t=0},add:function(t){Qq($q,t,this.t),Qq(this,$q.s,this.s),this.s?this.t+=$q.t:this.s=$q.t},valueOf:function(){return this.s}};var $q=new Gq;function Qq(t,e,n){var r=t.s=e+n,i=r-e,o=r-i;t.t=e-o+(n-i)}var Jq=1e-6,Kq=1e-12,tR=Math.PI,eR=tR/2,nR=tR/4,rR=2*tR,iR=180/tR,oR=tR/180,aR=Math.abs,lR=Math.atan,sR=Math.atan2,uR=Math.cos,cR=Math.sin,fR=Math.sign||function(t){return t>0?1:t<0?-1:0},hR=Math.sqrt;function dR(t){return t>1?0:t<-1?tR:Math.acos(t)}function pR(t){return t>1?eR:t<-1?-eR:Math.asin(t)}function _R(){}function gR(t,e){t&&mR.hasOwnProperty(t.type)&&mR[t.type](t,e)}var yR={Feature:function(t,e){gR(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)gR(n[r].geometry,e)}},mR={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){OR(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)OR(n[r],e,0)},Polygon:function(t,e){FR(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)FR(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)gR(n[r],e)}},vR,bR,xR,wR,kR,MR,AR,SR,CR,ER,zR,TR,NR,jR,LR,PR;function OR(t,e,n){var r=-1,i=t.length-n,o;for(e.lineStart();++r<i;)o=t[r],e.point(o[0],o[1],o[2]);e.lineEnd()}function FR(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)OR(t[n],e,1);e.polygonEnd()}function DR(t,e){t&&yR.hasOwnProperty(t.type)?yR[t.type](t,e):gR(t,e)}function qR(t){return[sR(t[1],t[0]),pR(t[2])]}function RR(t){var e=t[0],n=t[1],r=uR(n);return[r*uR(e),r*cR(e),cR(n)]}function BR(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function HR(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function IR(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function UR(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function YR(t){var e=hR(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var WR={sphere:_R,point:VR,lineStart:XR,lineEnd:QR,polygonStart:function(){WR.lineStart=JR,WR.lineEnd=KR},polygonEnd:function(){WR.lineStart=XR,WR.lineEnd=QR}};function VR(t,e){t*=oR;var n=uR(e*=oR);ZR(n*uR(t),n*cR(t),cR(e))}function ZR(t,e,n){++vR,xR+=(t-xR)/vR,wR+=(e-wR)/vR,kR+=(n-kR)/vR}function XR(){WR.point=GR}function GR(t,e){t*=oR;var n=uR(e*=oR);jR=n*uR(t),LR=n*cR(t),PR=cR(e),WR.point=$R,ZR(jR,LR,PR)}function $R(t,e){t*=oR;var n=uR(e*=oR),r=n*uR(t),i=n*cR(t),o=cR(e),a=sR(hR((a=LR*o-PR*i)*a+(a=PR*r-jR*o)*a+(a=jR*i-LR*r)*a),jR*r+LR*i+PR*o);bR+=a,MR+=a*(jR+(jR=r)),AR+=a*(LR+(LR=i)),SR+=a*(PR+(PR=o)),ZR(jR,LR,PR)}function QR(){WR.point=VR}function JR(){WR.point=tB}function KR(){eB(TR,NR),WR.point=VR}function tB(t,e){TR=t,NR=e,t*=oR,e*=oR,WR.point=eB;var n=uR(e);jR=n*uR(t),LR=n*cR(t),PR=cR(e),ZR(jR,LR,PR)}function eB(t,e){t*=oR;var n=uR(e*=oR),r=n*uR(t),i=n*cR(t),o=cR(e),a=LR*o-PR*i,l=PR*r-jR*o,s=jR*i-LR*r,u=hR(a*a+l*l+s*s),c=pR(u),f=u&&-c/u;CR+=f*a,ER+=f*l,zR+=f*s,bR+=c,MR+=c*(jR+(jR=r)),AR+=c*(LR+(LR=i)),SR+=c*(PR+(PR=o)),ZR(jR,LR,PR)}function nB(t){vR=bR=xR=wR=kR=MR=AR=SR=CR=ER=zR=0,DR(t,WR);var e=CR,n=ER,r=zR,i=e*e+n*n+r*r;return i<Kq&&(e=MR,n=AR,r=SR,bR<Jq&&(e=xR,n=wR,r=kR),(i=e*e+n*n+r*r)<Kq)?[NaN,NaN]:[sR(n,e)*iR,pR(r/hR(i))*iR]}function rB(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function iB(t,e){return[aR(t)>tR?t+Math.round(-t/rR)*rR:t,e]}function oB(t,e,n){return(t%=rR)?e||n?rB(lB(t),sB(e,n)):lB(t):e||n?sB(e,n):iB}function aB(t){return function(e,n){return[(e+=t)>tR?e-rR:e<-tR?e+rR:e,n]}}function lB(t){var e=aB(t);return e.invert=aB(-t),e}function sB(t,e){var n=uR(t),r=cR(t),i=uR(e),o=cR(e);function a(t,e){var a=uR(e),l=uR(t)*a,s=cR(t)*a,u=cR(e),c=u*n+l*r;return[sR(s*i-c*o,l*n-u*r),pR(c*i+s*o)]}return a.invert=function(t,e){var a=uR(e),l=uR(t)*a,s=cR(t)*a,u=cR(e),c=u*i-s*o;return[sR(s*i+u*o,l*n+c*r),pR(c*n-l*r)]},a}function uB(t,e,n,r,i,o){if(n){var a=uR(e),l=cR(e),s=r*n;null==i?(i=e+r*rR,o=e-s/2):(i=cB(a,i),o=cB(a,o),(r>0?i<o:i>o)&&(i+=r*rR));for(var u,c=i;r>0?c>o:c<o;c-=s)u=qR([a,-l*uR(c),-l*cR(c)]),t.point(u[0],u[1])}}function cB(t,e){(e=RR(e))[0]-=t,YR(e);var n=dR(-e[1]);return((-e[2]<0?-n:n)+rR-Jq)%rR}function fB(){var t=[],e;return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:_R,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function hB(t,e){return aR(t[0]-e[0])<Jq&&aR(t[1]-e[1])<Jq}function dB(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function pB(t,e,n,r,i){var o=[],a=[],l,s;if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n=t[0],r=t[e],s;if(hB(n,r)){if(!n[2]&&!r[2]){for(i.lineStart(),l=0;l<e;++l)i.point((n=t[l])[0],n[1]);return void i.lineEnd()}r[0]+=2*Jq}o.push(s=new dB(n,t,null,!0)),a.push(s.o=new dB(n,null,s,!1)),o.push(s=new dB(r,t,null,!1)),a.push(s.o=new dB(r,null,s,!0))}})),o.length){for(a.sort(e),_B(o),_B(a),l=0,s=a.length;l<s;++l)a[l].e=n=!n;for(var u=o[0],c,f;;){for(var h=u,d=!0;h.v;)if((h=h.n)===u)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(l=0,s=c.length;l<s;++l)i.point((f=c[l])[0],f[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(c=h.p.z,l=c.length-1;l>=0;--l)i.point((f=c[l])[0],f[1]);else r(h.x,h.p.x,-1,i);h=h.p}c=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function _B(t){if(e=t.length){for(var e,n=0,r=t[0],i;++n<e;)r.n=i=t[n],i.p=r,r=i;r.n=i=t[0],i.p=r}}iB.invert=iB;var gB=Xq();function yB(t){return aR(t[0])<=tR?t[0]:fR(t[0])*((aR(t[0])+tR)%rR-tR)}function mB(t,e){var n=yB(e),r=e[1],i=cR(r),o=[cR(n),-uR(n),0],a=0,l=0;gB.reset(),1===i?r=eR+Jq:-1===i&&(r=-eR-Jq);for(var s=0,u=t.length;s<u;++s)if(f=(c=t[s]).length)for(var c,f,h=c[f-1],d=yB(h),p=h[1]/2+nR,_=cR(p),g=uR(p),y=0;y<f;++y,d=v,_=x,g=w,h=m){var m=c[y],v=yB(m),b=m[1]/2+nR,x=cR(b),w=uR(b),k=v-d,M=k>=0?1:-1,A=M*k,S=A>tR,C=_*x;if(gB.add(sR(C*M*cR(A),g*w+C*uR(A))),a+=S?k+M*rR:k,S^d>=n^v>=n){var E=HR(RR(h),RR(m));YR(E);var z=HR(o,E);YR(z);var T=(S^k>=0?-1:1)*pR(z[2]);(r>T||r===T&&(E[0]||E[1]))&&(l+=S^k>=0?1:-1)}}return(a<-Jq||a<Jq&&gB<-Jq)^1&l}function vB(t,e,n,r){return function(i){var o=e(i),a=fB(),l=e(a),s=!1,u,c,f,h={point:d,lineStart:_,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=m,h.lineEnd=v,c=[],u=[]},polygonEnd:function(){h.point=d,h.lineStart=_,h.lineEnd=g,c=Lx(c);var t=mB(u,r);c.length?(s||(i.polygonStart(),s=!0),pB(c,xB,t,n,i)):t&&(s||(i.polygonStart(),s=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),s&&(i.polygonEnd(),s=!1),c=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(e,n){t(e,n)&&i.point(e,n)}function p(t,e){o.point(t,e)}function _(){h.point=p,o.lineStart()}function g(){h.point=d,o.lineEnd()}function y(t,e){f.push([t,e]),l.point(t,e)}function m(){l.lineStart(),f=[]}function v(){y(f[0][0],f[0][1]),l.lineEnd();var t=l.clean(),e=a.result(),n,r=e.length,o,h,d;if(f.pop(),u.push(f),f=null,r)if(1&t){if((o=(h=e[0]).length-1)>0){for(s||(i.polygonStart(),s=!0),i.lineStart(),n=0;n<o;++n)i.point((d=h[n])[0],d[1]);i.lineEnd()}}else r>1&&2&t&&e.push(e.pop().concat(e.shift())),c.push(e.filter(bB))}return h}}function bB(t){return t.length>1}function xB(t,e){return((t=t.x)[0]<0?t[1]-eR-Jq:eR-t[1])-((e=e.x)[0]<0?e[1]-eR-Jq:eR-e[1])}var wB=vB((function(){return!0}),kB,AB,[-tR,-eR]);function kB(t){var e=NaN,n=NaN,r=NaN,i;return{lineStart:function(){t.lineStart(),i=1},point:function(o,a){var l=o>0?tR:-tR,s=aR(o-e);aR(s-tR)<Jq?(t.point(e,n=(n+a)/2>0?eR:-eR),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(l,n),t.point(o,n),i=0):r!==l&&s>=tR&&(aR(e-r)<Jq&&(e-=r*Jq),aR(o-l)<Jq&&(o-=l*Jq),n=MB(e,n,o,a),t.point(r,n),t.lineEnd(),t.lineStart(),t.point(l,n),i=0),t.point(e=o,n=a),r=l},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-i}}}function MB(t,e,n,r){var i,o,a=cR(t-n);return aR(a)>Jq?lR((cR(e)*(o=uR(r))*cR(n)-cR(r)*(i=uR(e))*cR(t))/(i*o*a)):(e+r)/2}function AB(t,e,n,r){var i;if(null==t)i=n*eR,r.point(-tR,i),r.point(0,i),r.point(tR,i),r.point(tR,0),r.point(tR,-i),r.point(0,-i),r.point(-tR,-i),r.point(-tR,0),r.point(-tR,i);else if(aR(t[0]-e[0])>Jq){var o=t[0]<e[0]?tR:-tR;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(e[0],e[1])}function SB(t){var e=uR(t),n=6*oR,r=e>0,i=aR(e)>Jq;function o(e,r,i,o){uB(o,t,n,i,e,r)}function a(t,n){return uR(t)*uR(n)>e}function l(t){var e,n,o,l,c;return{lineStart:function(){l=o=!1,c=1},point:function(f,h){var d=[f,h],p,_=a(f,h),g=r?_?0:u(f,h):_?u(f+(f<0?tR:-tR),h):0;if(!e&&(l=o=_)&&t.lineStart(),_!==o&&(!(p=s(e,d))||hB(e,p)||hB(d,p))&&(d[2]=1),_!==o)c=0,_?(t.lineStart(),p=s(d,e),t.point(p[0],p[1])):(p=s(e,d),t.point(p[0],p[1],2),t.lineEnd()),e=p;else if(i&&e&&r^_){var y;g&n||!(y=s(d,e,!0))||(c=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!_||e&&hB(e,d)||t.point(d[0],d[1]),e=d,o=_,n=g},lineEnd:function(){o&&t.lineEnd(),e=null},clean:function(){return c|(l&&o)<<1}}}function s(t,n,r){var i,o,a=[1,0,0],l=HR(RR(t),RR(n)),s=BR(l,l),u=l[0],c=s-u*u;if(!c)return!r&&t;var f=e*s/c,h=-e*u/c,d=HR(a,l),p=UR(a,f),_;IR(p,UR(l,h));var g=d,y=BR(p,g),m=BR(g,g),v=y*y-m*(BR(p,p)-1);if(!(v<0)){var b=hR(v),x=UR(g,(-y-b)/m);if(IR(x,p),x=qR(x),!r)return x;var w=t[0],k=n[0],M=t[1],A=n[1],S;k<w&&(S=w,w=k,k=S);var C=k-w,E=aR(C-tR)<Jq,z;if(!E&&A<M&&(S=M,M=A,A=S),E||C<Jq?E?M+A>0^x[1]<(aR(x[0]-w)<Jq?M:A):M<=x[1]&&x[1]<=A:C>tR^(w<=x[0]&&x[0]<=k)){var T=UR(g,(-y+b)/m);return IR(T,p),[x,qR(T)]}}}function u(e,n){var i=r?t:tR-t,o=0;return e<-i?o|=1:e>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return vB(a,l,o,r?[0,-t]:[-tR,t-tR])}function CB(t,e,n,r,i,o){var a=t[0],l=t[1],s,u,c=0,f=1,h=e[0]-a,d=e[1]-l,p;if(p=n-a,h||!(p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=i-a,h||!(p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}if(p=r-l,d||!(p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=o-l,d||!(p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}return c>0&&(t[0]=a+c*h,t[1]=l+c*d),f<1&&(e[0]=a+f*h,e[1]=l+f*d),!0}}}}}var EB=1e9,zB=-EB;function TB(t,e,n,r){function i(i,o){return t<=i&&i<=n&&e<=o&&o<=r}function o(i,o,l,u){var c=0,f=0;if(null==i||(c=a(i,l))!==(f=a(o,l))||s(i,o)<0^l>0)do{u.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+l+4)%4)!==f);else u.point(o[0],o[1])}function a(r,i){return aR(r[0]-t)<Jq?i>0?0:3:aR(r[0]-n)<Jq?i>0?2:1:aR(r[1]-e)<Jq?i>0?1:0:i>0?3:2}function l(t,e){return s(t.x,e.x)}function s(t,e){var n=a(t,1),r=a(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(a){var s=a,u=fB(),c,f,h,d,p,_,g,y,m,v,b,x={point:w,lineStart:S,lineEnd:C,polygonStart:M,polygonEnd:A};function w(t,e){i(t,e)&&s.point(t,e)}function k(){for(var e=0,n=0,i=f.length;n<i;++n)for(var o=f[n],a=1,l=o.length,s=o[0],u,c,h=s[0],d=s[1];a<l;++a)u=h,c=d,h=(s=o[a])[0],d=s[1],c<=r?d>r&&(h-u)*(r-c)>(d-c)*(t-u)&&++e:d<=r&&(h-u)*(r-c)<(d-c)*(t-u)&&--e;return e}function M(){s=u,c=[],f=[],b=!0}function A(){var t=k(),e=b&&t,n=(c=Lx(c)).length;(e||n)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),n&&pB(c,l,t,o,a),a.polygonEnd()),s=a,c=f=h=null}function S(){x.point=E,f&&f.push(h=[]),v=!0,m=!1,g=y=NaN}function C(){c&&(E(d,p),_&&m&&u.rejoin(),c.push(u.result())),x.point=w,m&&s.lineEnd()}function E(o,a){var l=i(o,a);if(f&&h.push([o,a]),v)d=o,p=a,_=l,v=!1,l&&(s.lineStart(),s.point(o,a));else if(l&&m)s.point(o,a);else{var u=[g=Math.max(zB,Math.min(EB,g)),y=Math.max(zB,Math.min(EB,y))],c=[o=Math.max(zB,Math.min(EB,o)),a=Math.max(zB,Math.min(EB,a))];CB(u,c,t,e,n,r)?(m||(s.lineStart(),s.point(u[0],u[1])),s.point(c[0],c[1]),l||s.lineEnd(),b=!1):l&&(s.lineStart(),s.point(o,a),b=!1)}g=o,y=a,m=l}return x}}function NB(t){return t}var jB=Xq(),LB=Xq(),PB,OB,FB,DB,qB={point:_R,lineStart:_R,lineEnd:_R,polygonStart:function(){qB.lineStart=RB,qB.lineEnd=IB},polygonEnd:function(){qB.lineStart=qB.lineEnd=qB.point=_R,jB.add(aR(LB)),LB.reset()},result:function(){var t=jB/2;return jB.reset(),t}};function RB(){qB.point=BB}function BB(t,e){qB.point=HB,PB=FB=t,OB=DB=e}function HB(t,e){LB.add(DB*t-FB*e),FB=t,DB=e}function IB(){HB(PB,OB)}var UB=qB,YB=1/0,WB=YB,VB=-YB,ZB=VB,XB;function GB(t,e){t<YB&&(YB=t),t>VB&&(VB=t),e<WB&&(WB=e),e>ZB&&(ZB=e)}var $B={point:GB,lineStart:_R,lineEnd:_R,polygonStart:_R,polygonEnd:_R,result:function(){var t=[[YB,WB],[VB,ZB]];return VB=ZB=-(WB=YB=1/0),t}},QB=0,JB=0,KB=0,tH=0,eH=0,nH=0,rH=0,iH=0,oH=0,aH,lH,sH,uH,cH={point:fH,lineStart:hH,lineEnd:_H,polygonStart:function(){cH.lineStart=gH,cH.lineEnd=yH},polygonEnd:function(){cH.point=fH,cH.lineStart=hH,cH.lineEnd=_H},result:function(){var t=oH?[rH/oH,iH/oH]:nH?[tH/nH,eH/nH]:KB?[QB/KB,JB/KB]:[NaN,NaN];return QB=JB=KB=tH=eH=nH=rH=iH=oH=0,t}};function fH(t,e){QB+=t,JB+=e,++KB}function hH(){cH.point=dH}function dH(t,e){cH.point=pH,fH(sH=t,uH=e)}function pH(t,e){var n=t-sH,r=e-uH,i=hR(n*n+r*r);tH+=i*(sH+t)/2,eH+=i*(uH+e)/2,nH+=i,fH(sH=t,uH=e)}function _H(){cH.point=fH}function gH(){cH.point=mH}function yH(){vH(aH,lH)}function mH(t,e){cH.point=vH,fH(aH=sH=t,lH=uH=e)}function vH(t,e){var n=t-sH,r=e-uH,i=hR(n*n+r*r);tH+=i*(sH+t)/2,eH+=i*(uH+e)/2,nH+=i,rH+=(i=uH*t-sH*e)*(sH+t),iH+=i*(uH+e),oH+=3*i,fH(sH=t,uH=e)}var bH=cH;function xH(t){this._context=t}xH.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,rR)}},result:_R};var wH=Xq(),kH,MH,AH,SH,CH,EH={point:_R,lineStart:function(){EH.point=zH},lineEnd:function(){kH&&TH(MH,AH),EH.point=_R},polygonStart:function(){kH=!0},polygonEnd:function(){kH=null},result:function(){var t=+wH;return wH.reset(),t}};function zH(t,e){EH.point=TH,MH=SH=t,AH=CH=e}function TH(t,e){SH-=t,CH-=e,wH.add(hR(SH*SH+CH*CH)),SH=t,CH=e}var NH=EH;function jH(){this._string=[]}function LH(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function PH(t,e){var n=4.5,r,i;function o(t){return t&&("function"==typeof n&&i.pointRadius(+n.apply(this,arguments)),DR(t,r(i))),i.result()}return o.area=function(t){return DR(t,r(UB)),UB.result()},o.measure=function(t){return DR(t,r(NH)),NH.result()},o.bounds=function(t){return DR(t,r($B)),$B.result()},o.centroid=function(t){return DR(t,r(bH)),bH.result()},o.projection=function(e){return arguments.length?(r=null==e?(t=null,NB):(t=e).stream,o):t},o.context=function(t){return arguments.length?(i=null==t?(e=null,new jH):new xH(e=t),"function"!=typeof n&&i.pointRadius(n),o):e},o.pointRadius=function(t){return arguments.length?(n="function"==typeof t?t:(i.pointRadius(+t),+t),o):n},o.projection(t).context(e)}function OH(t){return function(e){var n=new FH;for(var r in t)n[r]=t[r];return n.stream=e,n}}function FH(){}function DH(t,e,n){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),DR(n,t.stream($B)),e($B.result()),null!=r&&t.clipExtent(r),t}function qH(t,e,n){return DH(t,(function(n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,l=+e[0][1]+(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([a,l])}),n)}function RH(t,e,n){return qH(t,[[0,0],e],n)}function BH(t,e,n){return DH(t,(function(n){var r=+e,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];t.scale(150*i).translate([o,a])}),n)}function HH(t,e,n){return DH(t,(function(n){var r=+e,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;t.scale(150*i).translate([o,a])}),n)}jH.prototype={_radius:4.5,_circle:LH(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=LH(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},FH.prototype={constructor:FH,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var IH=16,UH=uR(30*oR);function YH(t,e){return+e?VH(t,e):WH(t)}function WH(t){return OH({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function VH(t,e){function n(r,i,o,a,l,s,u,c,f,h,d,p,_,g){var y=u-r,m=c-i,v=y*y+m*m;if(v>4*e&&_--){var b=a+h,x=l+d,w=s+p,k=hR(b*b+x*x+w*w),M=pR(w/=k),A=aR(aR(w)-1)<Jq||aR(o-f)<Jq?(o+f)/2:sR(x,b),S=t(A,M),C=S[0],E=S[1],z=C-r,T=E-i,N=m*z-y*T;(N*N/v>e||aR((y*z+m*T)/v-.5)>.3||a*h+l*d+s*p<UH)&&(n(r,i,o,a,l,s,C,E,A,b/=k,x/=k,w,_,g),g.point(C,E),n(C,E,A,b,x,w,u,c,f,h,d,p,_,g))}}return function(e){var r,i,o,a,l,s,u,c,f,h,d,p,_={point:g,lineStart:y,lineEnd:v,polygonStart:function(){e.polygonStart(),_.lineStart=b},polygonEnd:function(){e.polygonEnd(),_.lineStart=y}};function g(n,r){n=t(n,r),e.point(n[0],n[1])}function y(){c=NaN,_.point=m,e.lineStart()}function m(r,i){var o=RR([r,i]),a=t(r,i);n(c,f,u,h,d,p,c=a[0],f=a[1],u=r,h=o[0],d=o[1],p=o[2],IH,e),e.point(c,f)}function v(){_.point=g,e.lineEnd()}function b(){y(),_.point=x,_.lineEnd=w}function x(t,e){m(r=t,e),i=c,o=f,a=h,l=d,s=p,_.point=m}function w(){n(c,f,u,h,d,p,i,o,r,a,l,s,IH,e),_.lineEnd=v,v()}return _}}var ZH=OH({point:function(t,e){this.stream.point(t*oR,e*oR)}});function XH(t){return OH({point:function(e,n){var r=t(e,n);return this.stream.point(r[0],r[1])}})}function GH(t,e,n,r,i){function o(o,a){return[e+t*(o*=r),n-t*(a*=i)]}return o.invert=function(o,a){return[(o-e)/t*r,(n-a)/t*i]},o}function $H(t,e,n,r,i,o){var a=uR(o),l=cR(o),s=a*t,u=l*t,c=a/t,f=l/t,h=(l*n-a*e)/t,d=(l*e+a*n)/t;function p(t,o){return[s*(t*=r)-u*(o*=i)+e,n-u*t-s*o]}return p.invert=function(t,e){return[r*(c*t-f*e+h),i*(d-f*t-c*e)]},p}function QH(t){return JH((function(){return t}))()}function JH(t){var e,n=150,r=480,i=250,o=0,a=0,l=0,s=0,u=0,c,f=0,h=1,d=1,p=null,_=wB,g=null,y,m,v,b=NB,x=.5,w,k,M,A,S;function C(t){return M(t[0]*oR,t[1]*oR)}function E(t){return(t=M.invert(t[0],t[1]))&&[t[0]*iR,t[1]*iR]}function z(){var t=$H(n,0,0,h,d,f).apply(null,e(o,a)),p=(f?$H:GH)(n,r-t[0],i-t[1],h,d,f);return c=oB(l,s,u),k=rB(e,p),M=rB(c,k),w=YH(k,x),T()}function T(){return A=S=null,C}return C.stream=function(t){return A&&S===t?A:A=ZH(XH(c)(_(w(b(S=t)))))},C.preclip=function(t){return arguments.length?(_=t,p=void 0,T()):_},C.postclip=function(t){return arguments.length?(b=t,g=y=m=v=null,T()):b},C.clipAngle=function(t){return arguments.length?(_=+t?SB(p=t*oR):(p=null,wB),T()):p*iR},C.clipExtent=function(t){return arguments.length?(b=null==t?(g=y=m=v=null,NB):TB(g=+t[0][0],y=+t[0][1],m=+t[1][0],v=+t[1][1]),T()):null==g?null:[[g,y],[m,v]]},C.scale=function(t){return arguments.length?(n=+t,z()):n},C.translate=function(t){return arguments.length?(r=+t[0],i=+t[1],z()):[r,i]},C.center=function(t){return arguments.length?(o=t[0]%360*oR,a=t[1]%360*oR,z()):[o*iR,a*iR]},C.rotate=function(t){return arguments.length?(l=t[0]%360*oR,s=t[1]%360*oR,u=t.length>2?t[2]%360*oR:0,z()):[l*iR,s*iR,u*iR]},C.angle=function(t){return arguments.length?(f=t%360*oR,z()):f*iR},C.reflectX=function(t){return arguments.length?(h=t?-1:1,z()):h<0},C.reflectY=function(t){return arguments.length?(d=t?-1:1,z()):d<0},C.precision=function(t){return arguments.length?(w=YH(k,x=t*t),T()):hR(x)},C.fitExtent=function(t,e){return qH(C,t,e)},C.fitSize=function(t,e){return RH(C,t,e)},C.fitWidth=function(t,e){return BH(C,t,e)},C.fitHeight=function(t,e){return HH(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&E,z()}}function KH(t,e){return[t,e]}function tI(){return QH(KH).scale(152.63)}KH.invert=KH;var eI={},nI={get exports(){return eI},set exports(t){eI=t}},rI={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},iI=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function oI(t){return 10===t||13===t||8232===t||8233===t||32===t||9===t||11===t||12===t||160===t||t>=5760&&iI.indexOf(t)>=0}function aI(t){switch(32|t){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function lI(t){return 97==(32|t)}function sI(t){return t>=48&&t<=57}function uI(t){return t>=48&&t<=57||43===t||45===t||46===t}function cI(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function fI(t){for(;t.index<t.max&&oI(t.path.charCodeAt(t.index));)t.index++}function hI(t){var e=t.path.charCodeAt(t.index);return 48===e?(t.param=0,void t.index++):49===e?(t.param=1,void t.index++):void(t.err="SvgPath: arc flag can be 0 or 1 only (at pos "+t.index+")")}function dI(t){var e=t.index,n=e,r=t.max,i=!1,o=!1,a=!1,l=!1,s;if(n>=r)t.err="SvgPath: missed param (at pos "+n+")";else if(43!==(s=t.path.charCodeAt(n))&&45!==s||(s=++n<r?t.path.charCodeAt(n):0),sI(s)||46===s){if(46!==s){if(i=48===s,s=++n<r?t.path.charCodeAt(n):0,i&&n<r&&s&&sI(s))return void(t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+e+")");for(;n<r&&sI(t.path.charCodeAt(n));)n++,o=!0;s=n<r?t.path.charCodeAt(n):0}if(46===s){for(l=!0,n++;sI(t.path.charCodeAt(n));)n++,a=!0;s=n<r?t.path.charCodeAt(n):0}if(101===s||69===s){if(l&&!o&&!a)return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");if(43!==(s=++n<r?t.path.charCodeAt(n):0)&&45!==s||n++,!(n<r&&sI(t.path.charCodeAt(n))))return void(t.err="SvgPath: invalid float exponent (at pos "+n+")");for(;n<r&&sI(t.path.charCodeAt(n));)n++}t.index=n,t.param=parseFloat(t.path.slice(e,n))+0}else t.err="SvgPath: param should start with 0..9 or `.` (at pos "+n+")"}function pI(t){var e,n;n=(e=t.path[t.segmentStart]).toLowerCase();var r=t.data;if("m"===n&&r.length>2&&(t.result.push([e,r[0],r[1]]),r=r.slice(2),n="l",e="m"===e?"l":"L"),"r"===n)t.result.push([e].concat(r));else for(;r.length>=rI[n]&&(t.result.push([e].concat(r.splice(0,rI[n]))),rI[n]););}function _I(t){var e=t.max,n,r,i,o,a;if(t.segmentStart=t.index,r=lI(n=t.path.charCodeAt(t.index)),aI(n))if(o=rI[t.path[t.index].toLowerCase()],t.index++,fI(t),t.data=[],o){for(i=!1;;){for(a=o;a>0;a--){if(!r||3!==a&&4!==a?dI(t):hI(t),t.err.length)return void pI(t);t.data.push(t.param),fI(t),i=!1,t.index<e&&44===t.path.charCodeAt(t.index)&&(t.index++,fI(t),i=!0)}if(!i){if(t.index>=t.max)break;if(!uI(t.path.charCodeAt(t.index)))break}}pI(t)}else pI(t);else t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")"}var gI=function t(e){var n=new cI(e),r=n.max;for(fI(n);n.index<r&&!n.err.length;)_I(n);return n.result.length&&("mM".indexOf(n.result[0][0])<0?(n.err="SvgPath: string should start with `M` or `m`",n.result=[]):n.result[0][0]="M"),{err:n.err,segments:n.result}};function yI(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}function mI(){if(!(this instanceof mI))return new mI;this.queue=[],this.cache=null}mI.prototype.matrix=function(t){return 1===t[0]&&0===t[1]&&0===t[2]&&1===t[3]&&0===t[4]&&0===t[5]||(this.cache=null,this.queue.push(t)),this},mI.prototype.translate=function(t,e){return 0===t&&0===e||(this.cache=null,this.queue.push([1,0,0,1,t,e])),this},mI.prototype.scale=function(t,e){return 1===t&&1===e||(this.cache=null,this.queue.push([t,0,0,e,0,0])),this},mI.prototype.rotate=function(t,e,n){var r,i,o;return 0!==t&&(this.translate(e,n),r=t*Math.PI/180,i=Math.cos(r),o=Math.sin(r),this.queue.push([i,o,-o,i,0,0]),this.cache=null,this.translate(-e,-n)),this},mI.prototype.skewX=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this},mI.prototype.skewY=function(t){return 0!==t&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this},mI.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],1===this.queue.length)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=yI(this.cache,this.queue[t]);return this.cache},mI.prototype.calc=function(t,e,n){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),[t*(r=this.cache)[0]+e*r[2]+(n?0:r[4]),t*r[1]+e*r[3]+(n?0:r[5])]):[t,e]};var vI=mI,bI=vI,xI={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},wI=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,kI=/[\s,]+/,MI=function t(e){var n=new bI,r,i;return e.split(wI).forEach((function(t){if(t.length)if(void 0===xI[t])switch(i=t.split(kI).map((function(t){return+t||0})),r){case"matrix":return void(6===i.length&&n.matrix(i));case"scale":return void(1===i.length?n.scale(i[0],i[0]):2===i.length&&n.scale(i[0],i[1]));case"rotate":return void(1===i.length?n.rotate(i[0],0,0):3===i.length&&n.rotate(i[0],i[1],i[2]));case"translate":return void(1===i.length?n.translate(i[0],0):2===i.length&&n.translate(i[0],i[1]));case"skewX":return void(1===i.length&&n.skewX(i[0]));case"skewY":return void(1===i.length&&n.skewY(i[0]))}else r=t})),n},AI=2*Math.PI;function SI(t,e,n,r){var i,o=t*n+e*r;return o>1&&(o=1),o<-1&&(o=-1),(t*r-e*n<0?-1:1)*Math.acos(o)}function CI(t,e,n,r,i,o,a,l,s,u){var c=u*(t-n)/2+s*(e-r)/2,f=-s*(t-n)/2+u*(e-r)/2,h=a*a,d=l*l,p=c*c,_=f*f,g=h*d-h*_-d*p;g<0&&(g=0),g/=h*_+d*p;var y=(g=Math.sqrt(g)*(i===o?-1:1))*a/l*f,m=g*-l/a*c,v=u*y-s*m+(t+n)/2,b=s*y+u*m+(e+r)/2,x=(c-y)/a,w=(f-m)/l,k=(-c-y)/a,M=(-f-m)/l,A=SI(1,0,x,w),S=SI(x,w,k,M);return 0===o&&S>0&&(S-=AI),1===o&&S<0&&(S+=AI),[v,b,A,S]}function EI(t,e){var n=4/3*Math.tan(e/4),r=Math.cos(t),i=Math.sin(t),o=Math.cos(t+e),a=Math.sin(t+e);return[r,i,r-i*n,i+r*n,o+a*n,a-o*n,o,a]}var zI=function t(e,n,r,i,o,a,l,s,u){var c=Math.sin(u*AI/360),f=Math.cos(u*AI/360),h=f*(e-r)/2+c*(n-i)/2,d=-c*(e-r)/2+f*(n-i)/2;if(0===h&&0===d)return[];if(0===l||0===s)return[];l=Math.abs(l),s=Math.abs(s);var p=h*h/(l*l)+d*d/(s*s);p>1&&(l*=Math.sqrt(p),s*=Math.sqrt(p));var _=CI(e,n,r,i,o,a,l,s,c,f),g=[],y=_[2],m=_[3],v=Math.max(Math.ceil(Math.abs(m)/(AI/4)),1);m/=v;for(var b=0;b<v;b++)g.push(EI(y,m)),y+=m;return g.map((function(t){for(var e=0;e<t.length;e+=2){var n=t[e+0],r=t[e+1],i=f*(n*=l)-c*(r*=s),o=c*n+f*r;t[e+0]=i+_[0],t[e+1]=o+_[1]}return t}))},TI=1e-10,NI=Math.PI/180;function jI(t,e,n){if(!(this instanceof jI))return new jI(t,e,n);this.rx=t,this.ry=e,this.ax=n}jI.prototype.transform=function(t){var e=Math.cos(this.ax*NI),n=Math.sin(this.ax*NI),r=[this.rx*(t[0]*e+t[2]*n),this.rx*(t[1]*e+t[3]*n),this.ry*(-t[0]*n+t[2]*e),this.ry*(-t[1]*n+t[3]*e)],i=r[0]*r[0]+r[2]*r[2],o=r[1]*r[1]+r[3]*r[3],a=((r[0]-r[3])*(r[0]-r[3])+(r[2]+r[1])*(r[2]+r[1]))*((r[0]+r[3])*(r[0]+r[3])+(r[2]-r[1])*(r[2]-r[1])),l=(i+o)/2;if(a<TI*l)return this.rx=this.ry=Math.sqrt(l),this.ax=0,this;var s=r[0]*r[1]+r[2]*r[3],u=l+(a=Math.sqrt(a))/2,c=l-a/2;return this.ax=Math.abs(s)<TI&&Math.abs(u-o)<TI?90:180*Math.atan(Math.abs(s)>Math.abs(u-o)?(u-i)/s:s/(u-o))/Math.PI,this.ax>=0?(this.rx=Math.sqrt(u),this.ry=Math.sqrt(c)):(this.ax+=90,this.rx=Math.sqrt(c),this.ry=Math.sqrt(u)),this},jI.prototype.isDegenerate=function(){return this.rx<TI*this.ry||this.ry<TI*this.rx};var LI,PI=gI,OI=MI,FI=vI,DI=zI,qI=jI;function RI(t){if(!(this instanceof RI))return new RI(t);var e=PI(t);this.segments=e.segments,this.err=e.err,this.__stack=[]}RI.from=function(t){if("string"==typeof t)return new RI(t);if(t instanceof RI){var e=new RI("");return e.err=t.err,e.segments=t.segments.map((function(t){return t.slice()})),e.__stack=t.__stack.map((function(t){return FI().matrix(t.toArray())})),e}throw new Error("SvgPath.from: invalid param type "+t)},RI.prototype.__matrix=function(t){var e=this,n;t.queue.length&&this.iterate((function(r,i,o,a){var l,s,u,c;switch(r[0]){case"v":s=0===(l=t.calc(0,r[1],!0))[0]?["v",l[1]]:["l",l[0],l[1]];break;case"V":s=(l=t.calc(o,r[1],!1))[0]===t.calc(o,a,!1)[0]?["V",l[1]]:["L",l[0],l[1]];break;case"h":s=0===(l=t.calc(r[1],0,!0))[1]?["h",l[0]]:["l",l[0],l[1]];break;case"H":s=(l=t.calc(r[1],a,!1))[1]===t.calc(o,a,!1)[1]?["H",l[0]]:["L",l[0],l[1]];break;case"a":case"A":var f=t.toArray(),h=qI(r[1],r[2],r[3]).transform(f);if(f[0]*f[3]-f[1]*f[2]<0&&(r[5]=r[5]?"0":"1"),l=t.calc(r[6],r[7],"a"===r[0]),"A"===r[0]&&r[6]===o&&r[7]===a||"a"===r[0]&&0===r[6]&&0===r[7]){s=["a"===r[0]?"l":"L",l[0],l[1]];break}s=h.isDegenerate()?["a"===r[0]?"l":"L",l[0],l[1]]:[r[0],h.rx,h.ry,h.ax,r[4],r[5],l[0],l[1]];break;case"m":c=i>0,s=["m",(l=t.calc(r[1],r[2],c))[0],l[1]];break;default:for(s=[u=r[0]],c=u.toLowerCase()===u,n=1;n<r.length;n+=2)l=t.calc(r[n],r[n+1],c),s.push(l[0],l[1])}e.segments[i]=s}),!0)},RI.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(1===this.__stack.length)return this.__matrix(this.__stack[0]),void(this.__stack=[]);for(t=FI(),e=this.__stack.length;--e>=0;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}},RI.prototype.toString=function(){var t="",e="",n=!1;this.__evaluateStack();for(var r=0,i=this.segments.length;r<i;r++){var o=this.segments[r],a=o[0];a!==e||"m"===a||"M"===a?("m"===a&&"z"===e&&(t+=" "),t+=a,n=!1):n=!0;for(var l=1;l<o.length;l++){var s=o[l];1===l?n&&s>=0&&(t+=" "):s>=0&&(t+=" "),t+=s}e=a}return t},RI.prototype.translate=function(t,e){return this.__stack.push(FI().translate(t,e||0)),this},RI.prototype.scale=function(t,e){return this.__stack.push(FI().scale(t,e||0===e?e:t)),this},RI.prototype.rotate=function(t,e,n){return this.__stack.push(FI().rotate(t,e||0,n||0)),this},RI.prototype.skewX=function(t){return this.__stack.push(FI().skewX(t)),this},RI.prototype.skewY=function(t){return this.__stack.push(FI().skewY(t)),this},RI.prototype.matrix=function(t){return this.__stack.push(FI().matrix(t)),this},RI.prototype.transform=function(t){return t.trim()?(this.__stack.push(OI(t)),this):this},RI.prototype.round=function(t){var e=0,n=0,r=0,i=0,o;return t=t||0,this.__evaluateStack(),this.segments.forEach((function(a){var l=a[0].toLowerCase()===a[0];switch(a[0]){case"H":case"h":return l&&(a[1]+=r),r=a[1]-a[1].toFixed(t),void(a[1]=+a[1].toFixed(t));case"V":case"v":return l&&(a[1]+=i),i=a[1]-a[1].toFixed(t),void(a[1]=+a[1].toFixed(t));case"Z":case"z":return r=e,void(i=n);case"M":case"m":return l&&(a[1]+=r,a[2]+=i),r=a[1]-a[1].toFixed(t),i=a[2]-a[2].toFixed(t),e=r,n=i,a[1]=+a[1].toFixed(t),void(a[2]=+a[2].toFixed(t));case"A":case"a":return l&&(a[6]+=r,a[7]+=i),r=a[6]-a[6].toFixed(t),i=a[7]-a[7].toFixed(t),a[1]=+a[1].toFixed(t),a[2]=+a[2].toFixed(t),a[3]=+a[3].toFixed(t+2),a[6]=+a[6].toFixed(t),void(a[7]=+a[7].toFixed(t));default:return o=a.length,l&&(a[o-2]+=r,a[o-1]+=i),r=a[o-2]-a[o-2].toFixed(t),i=a[o-1]-a[o-1].toFixed(t),void a.forEach((function(e,n){n&&(a[n]=+a[n].toFixed(t))}))}})),this},RI.prototype.iterate=function(t,e){var n=this.segments,r={},i=!1,o=0,a=0,l=0,s=0,u,c,f;if(e||this.__evaluateStack(),n.forEach((function(e,n){var u=t(e,n,o,a);Array.isArray(u)&&(r[n]=u,i=!0);var c=e[0]===e[0].toLowerCase();switch(e[0]){case"m":case"M":return o=e[1]+(c?o:0),a=e[2]+(c?a:0),l=o,void(s=a);case"h":case"H":return void(o=e[1]+(c?o:0));case"v":case"V":return void(a=e[1]+(c?a:0));case"z":case"Z":return o=l,void(a=s);default:o=e[e.length-2]+(c?o:0),a=e[e.length-1]+(c?a:0)}})),!i)return this;for(f=[],u=0;u<n.length;u++)if(void 0!==r[u])for(c=0;c<r[u].length;c++)f.push(r[u][c]);else f.push(n[u]);return this.segments=f,this},RI.prototype.abs=function(){return this.iterate((function(t,e,n,r){var i=t[0],o=i.toUpperCase(),a;if(i!==o)switch(t[0]=o,i){case"v":return void(t[1]+=r);case"a":return t[6]+=n,void(t[7]+=r);default:for(a=1;a<t.length;a++)t[a]+=a%2?n:r}}),!0),this},RI.prototype.rel=function(){return this.iterate((function(t,e,n,r){var i=t[0],o=i.toLowerCase(),a;if(i!==o&&(0!==e||"M"!==i))switch(t[0]=o,i){case"V":return void(t[1]-=r);case"A":return t[6]-=n,void(t[7]-=r);default:for(a=1;a<t.length;a++)t[a]-=a%2?n:r}}),!0),this},RI.prototype.unarc=function(){return this.iterate((function(t,e,n,r){var i,o,a,l=[],s=t[0];return"A"!==s&&"a"!==s?null:("a"===s?(o=n+t[6],a=r+t[7]):(o=t[6],a=t[7]),0===(i=DI(n,r,o,a,t[4],t[5],t[1],t[2],t[3])).length?[["a"===t[0]?"l":"L",t[6],t[7]]]:(i.forEach((function(t){l.push(["C",t[2],t[3],t[4],t[5],t[6],t[7]])})),l))})),this},RI.prototype.unshort=function(){var t=this.segments,e,n,r,i,o;return this.iterate((function(a,l,s,u){var c=a[0],f=c.toUpperCase(),h;l&&("T"===f?(h="t"===c,"Q"===(r=t[l-1])[0]?(e=r[1]-s,n=r[2]-u):"q"===r[0]?(e=r[1]-r[3],n=r[2]-r[4]):(e=0,n=0),i=-e,o=-n,h||(i+=s,o+=u),t[l]=[h?"q":"Q",i,o,a[1],a[2]]):"S"===f&&(h="s"===c,"C"===(r=t[l-1])[0]?(e=r[3]-s,n=r[4]-u):"c"===r[0]?(e=r[3]-r[5],n=r[4]-r[6]):(e=0,n=0),i=-e,o=-n,h||(i+=s,o+=u),t[l]=[h?"c":"C",i,o,a[1],a[2],a[3],a[4]]))})),this};var BI=RI;!function(t){t.exports=BI}(nI);var HI=w(eI);function II(t,e){return t&&t.length?zM(t,F_(e)):[]}var UI=tI();function YI(t){return{type:"Feature",geometry:{type:"Point",coordinates:[t.lon,t.lat]}}}function WI(t){var e;return II(t,(function(t){return t.geometry.coordinates[0].toString()+":"+t.geometry.coordinates[1].toString()}))}function VI(t,e){var n=[],r=[];if(t.forEach((function(t){t.geo_region?n.push(t.geo_region):t.geo_point&&r.push(YI(t.geo_point))})),r=WI(r),(0!==n.length||0!==r.length)&&(e.fit_to_points||0!==n.length)){var i=n.length>0?n:r,o=e.fit_to_points&&r.length>0;o&&(i=r);var a={type:"FeatureCollection",features:i};if(e.geoProjection){var l=e.geoProjection;UI.scale(l.scale).center(l.center)}else{if(!o&&n.length>0&&e.center_the_centroid){var s=nB(a);UI.rotate([-s[0],0])}else UI.rotate([0,0,0]);if(o&&1===r.length){var u=r[0];UI.center(u.geometry.coordinates).scale(400).translate([.5*e.width,.5*e.height])}else{var c=o?.2*Math.min(e.width,e.height):0;UI.fitExtent([[c,c],[e.width-c,e.height-c]],a)}}}}function ZI(t,e){var n;return HI(t).translate(-e[0],-e[1]).toString()}function XI(t,e){if("MultiPolygon"===t.geometry.type){var n,r=0;return t.geometry.coordinates.forEach((function(t){var i={type:"Polygon",coordinates:t},o=e.measure(i);o>r&&(r=o,n=i)})),n}return t.geometry}function GI(t,e){return e.centroid(t)}function $I(t,e){var n,r;return jx(t.filter((function(t){return void 0!==t.geo_point})),(function(t){return+e.sizeByAccessor(t)||0}))}function QI(t,e){VI(t,e),UI.scale()===1/0&&(UI=tI(),console.warn("Projection has infinite scale after fitting so will reset"));var n=PH().projection(UI),r=$I(t,e),i=e.unscale_points_factor||1,o=kA().domain([0,r]).range([0,e.max_radius/i]),a;return{nodes:t.map((function(t){var r="M0,0",i=[.5*e.width,.5*e.height],a=[[0,0],[0,0]],l;if(t.geo_point){r=cq(l=o(e.sizeByAccessor(t)));var s=[t.geo_point.lon,t.geo_point.lat];i=UI(s),a=[[-l,-l],[l,l]]}else if(t.geo_region){var u,c={type:"Feature",geometry:XI(t.geo_region,n)};r=ZI(r=n(t.geo_region),i=GI(c,n)),(a=n.bounds(c))[0][0]-=i[0],a[1][0]-=i[0],a[0][1]-=i[1],a[1][1]-=i[1]}return{id:t.__flourish_id,x:i[0],y:i[1],path:r,r:l,bounds:a,_data:t}})),labels:[],projection:UI}}let JI;function KI(t,e,n){let r;switch(e){case"single-packed":r=vq(t,n);break;case"group-1d-packed":r=Mq(t,n);break;case"group-2d-packed":r=Tq(t,n);break;case"beeswarm":r=Yq(t,n);break;case"multi-beeswarm":r=Vq(t,n);break;case"scatter":r=Zq(t,n);break;case"geo":r=QI(t,n)}return r}function tU(t,e,n){JI=KI(t,e,n)}function eU(){if(NM())return"geo";var t={none:{none:"single-packed",numeric:"beeswarm",categorical:"group-1d-packed"},numeric:{none:"beeswarm",numeric:"scatter",categorical:"multi-beeswarm"},categorical:{none:"group-1d-packed",numeric:"multi-beeswarm",categorical:"group-2d-packed"}},e=NC(jc.position_by_1),n=NC(jc.position_by_2),r;return t[e][n]}function nU(t){var e=CC(jc.position_by_1),n=EC(jc.position_by_1),r=zC(jc.position_by_1),i=zC(jc.position_by_2),o=zC(jc.size_by),a=cJ.getPrimaryWidth(),l,s={width:a,height:cJ.getPrimaryHeight(),shape:jc.shape,xScale:gD.xScale(),yScale:gD.yScale(),sizeByAccessor:function(t){return"none"!==jc.size_by.type?+t.numericColumns[o]||0:1}},u=e?r:i,c=n?r:i;switch(t){case"group-1d-packed":s.groupByAccessor=function(t){return t.categoryColumns[c]},s.label_margin=kC(jc.group_label_margin),s.group_sort_method=jc.group_sort_method||"ascending";break;case"group-2d-packed":s.groupBy1Accessor=function(t){return t.categoryColumns[r]},s.groupBy2Accessor=function(t){return t.categoryColumns[i]},s.margin_left=s.xScale.range()[0],s.margin_bottom=s.yScale.range()[1];break;case"beeswarm":s.positionByAccessor=function(t){return+t.numericColumns[u]};break;case"multi-beeswarm":s.positionByAccessor=function(t){return+t.numericColumns[u]},s.groupByAccessor=function(t){return t.categoryColumns[c]};break;case"scatter":s.positionBy1Accessor=function(t){return+t.numericColumns[r]},s.positionBy2Accessor=function(t){return+t.numericColumns[i]},s.max_radius=.01*a*jc.scatter_max_radius;break;case"geo":s.center_the_centroid=!0,s.max_radius=.01*a*jc.geo_point_max_radius,s.fit_to_points=jc.geo_fit_to_points,s.unscale_points_factor=!jc.geo_apply_zoom_scale_to_points&&jc.zoom_focus[jc.geo_shapes_index]?jc.zoom_focus[jc.geo_shapes_index].k:1}return s}function rU(t,e,n,r,i,o){var a=[];return t.forEach((function(t){var l=e(+t.numericColumns[n]),s="none"!==r.type?+t.numericColumns[i]:1;s=o(s),a.push(l-s),a.push(l+s)})),lM(a)}function iU(t){if(jc.prevent_clipping&&("beeswarm"===t||"multi-beeswarm"===t||"scatter"===t)&&"linear"===jc.xAxis.numeric_scale_type&&"linear"===jc.yAxis.numeric_scale_type){var e=CC(jc.position_by_1),n=zC(jc.position_by_1),r=zC(jc.position_by_2),i=e?n:r,o=gD.xScale(),a=gD.yScale(),l=VD(),s=zC(jc.size_by),u=nU(t),c=KI(LM,t,u),f,h,d,p,_,g,y;switch(c.radius_scale&&l.domain(c.radius_scale.domain).range(c.radius_scale.range),t){case"beeswarm":case"multi-beeswarm":h=(f=rU(LM,o,i,jc.size_by,s,l))[0],d=f[1],p=o.range()[0],_=o.range()[1],g=h<p?o.invert(h):o.domain()[0],y=d>_?o.invert(d):o.domain()[1],gD.xData([g,y]);break;case"scatter":h=(f=rU(LM,o,n,jc.size_by,s,l))[0],d=f[1],p=o.range()[0],_=o.range()[1],g=h<p?o.invert(h):o.domain()[0],y=d>_?o.invert(d):o.domain()[1];var m=rU(LM,a,r,jc.size_by,s,l),v=m[0],b=m[1],x=a.range()[1],w,k=b>a.range()[0]?a.invert(b):a.domain()[0],M=v<x?a.invert(v):a.domain()[1];gD.xData([g,y]).yData([k,M])}}}var oU,aU,lU;function sU(){oU||uU(),aU===jc.non_header_font.url&&lU===jc.non_header_font.name||(oU.href=jc.non_header_font.url||"",Am(".fl-layout-container:not(#fl-layout-header-container), .flourish-popup").style("font-family",jc.non_header_font.name||""),aU=jc.non_header_font.url,lU=jc.non_header_font.name)}function uU(){(oU=document.createElement("link")).setAttribute("rel","stylesheet"),document.head.appendChild(oU)}function cU(t,e){if("string"==typeof t&&(t=document.querySelector(t)),!t)return console.error("No valid target in createScreenshotSVG"),null;const{width:n,height:r,x:i,y:o}=t.getBoundingClientRect(),a=document.createElementNS("http://www.w3.org/2000/svg","svg");function l(e){if("string"==typeof e&&(e=t.querySelectorAll(e)),!e)return console.error("No valid els inside addTextElements"),null;for(const t of e){const{x:e,y:n,width:r}=t.getBoundingClientRect(),i=document.createElementNS("http://www.w3.org/2000/svg","text"),{color:o,"font-family":l,"font-size":s,"font-weight":u,"line-height":c,"padding-left":f,"padding-top":h}=window.getComputedStyle(t),d="".concat(u," ").concat(s," ").concat(l),p=dU(t.innerText,d,null,Math.ceil(r)),_=isNaN(parseFloat(c))?1.2*parseFloat(s)+"px":c,g=window.getComputedStyle(t.closest("[style*='opacity']")||t).opacity;p.forEach(((t,n)=>{const r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.innerHTML=t,r.setAttribute("dy",0===n?parseFloat(h):_),r.setAttribute("dx",parseFloat(f)),r.setAttribute("x",e),r.setAttribute("opacity",g),i.appendChild(r)})),i.style.dominantBaseline="text-before-edge",i.setAttribute("x",e+"px"),i.setAttribute("y",n+"px"),i.setAttribute("font-family",l),i.setAttribute("font-size",s),i.setAttribute("font-weight",u),i.setAttribute("fill",o),a.appendChild(i)}return this}function s(e){if("string"==typeof e&&(e=t.querySelectorAll(e)),!e)return console.error("No valid els inside addCircleElements"),null;for(const t of e){const e=document.createElementNS("http://www.w3.org/2000/svg","circle"),{x:n,y:r,width:i}=t.getBoundingClientRect(),o=window.getComputedStyle(t)["background-color"],l=window.getComputedStyle(t.closest("[style*='opacity']")||t).opacity,s=i/2;e.setAttribute("cx",n+s+"px"),e.setAttribute("cy",r+s+"px"),e.setAttribute("r",s+"px"),e.setAttribute("opacity",l),e.setAttribute("fill",o),"rgba(0, 0, 0, 0)"===o&&e.setAttribute("stroke","#CCC"),a.appendChild(e)}return this}function u(e,n,r){if("string"==typeof e&&(e=t.querySelector(e)),!e)return console.error("No valid els inside addCircleElements"),null;const i=document.createElementNS("http://www.w3.org/2000/svg","g"),{x:o,y:l,width:s,height:u}=e.getBoundingClientRect(),{max:c,min:f}=r,h=c-f;for(let t=0;t<=s;t++){const e=document.createElementNS("http://www.w3.org/2000/svg","line");e.setAttribute("stroke",n(f+t*h/s)),e.setAttribute("x1",t+o),e.setAttribute("y1",l),e.setAttribute("x2",t+o),e.setAttribute("y2",u+l),i.appendChild(e)}return a.appendChild(i),this}function c(){a.remove()}return a.id=e,a.classList.add("flourish-screenshot-svg-container"),a.style.left=i+"px",a.style.top=o+"px",a.style.width=n+"px",a.style.height=r+"px",a.style.position="absolute",t.appendChild(a),{addTextElements:l,addCircleElements:s,addGradient:u,remove:c}}var fU,hU=document.createElement("canvas").getContext("2d");function dU(t,e,n,r){var i=[],o=0;if(null!==n&&n<=0)return i.widest_line=o,i;hU.font=e;var a=hU.measureText(t).width;if(a<=r)i.push(t),o=a;else{for(var l=t.trim().split(/\s+/g),s="",u=0;u<l.length;u++){var c=l[u],f=s+(s?" ":"")+c,h=hU.measureText(f).width;if(!(h<=r)){var d;if(!(i.length+1==n)&&s){i.push(s);var p=hU.measureText(c).width;if(p<=r){s=c,o=Math.max(o,p);continue}}var _=1,g=s;do{g=s.substring(0,f.length-_)+"…",h=hU.measureText(g).width}while(h>r&&++_<f.length);o=Math.max(o,h),s=g;break}s=f,o=Math.max(o,h)}i.push(s)}return i.widest_line=o,i}var pU="0.2em";function _U(t){if(t.appendChild(this._container.node()),!document.querySelector("#legend-styles")){var e=document.createElement("style"),n=new Wb;n.select(".fl-legend-container.interactive .fl-legend-item:hover").style("opacity",.75).style("cursor","pointer"),e.id="legend-styles",e.type="text/css",e.innerHTML=n.print(),document.head.appendChild(e)}return this}function gU(t){return this._formatFunction=t,this}function yU(){return this._container}function mU(t){return void 0===t?this._visible:(this._visible=t,this)}function vU(t){return void 0===t?this._auto_title:(this._auto_title=t,this)}function bU(){var t=this,e="auto"==t._state.title_mode?t.autoTitle():t._state.title;this._container.select(".fl-legend-title").text(e).style("display",(function(){return e.trim()?void 0===t._state.orientation||"horizontal"==t._state.orientation?"inline-block":"block":"none"})).style("padding-inline-start",0).style("padding-inline-end",pU)}function xU(t,e){var n=t.sort(gx),r=n[0],i=n[n.length-1],o=n.length>2?n[1]:null;null===e.legend_min&&null===e.legend_max||(null!==e.legend_min&&null!==e.legend_max?e.legend_min<e.legend_max&&(r=e.legend_min,i=e.legend_max):null!==e.legend_min?i<(r=e.legend_min)&&(i=r+2):r>(i=e.legend_max)&&(r=i-2)),null!==o&&(r>o||i<o)&&(o=null);var a=[r];return null!==o&&a.push(o),a.push(i),a.min=r,a.max=i,a.mid=o,a}function wU(t){return t*parseFloat(getComputedStyle(document.documentElement).fontSize)}function kU(t){return Math.log(t)/Math.LN10}function MU(t){if(0===t)return 0;var e=Math.floor(kU(t)),n=t/Math.pow(10,e),r,i=Math.floor(n)*Math.pow(10,e);if(e<0){var o=-e;i=o<=100?parseFloat(i.toFixed(o)):0}return i}var AU=0,SU=Object.freeze({show_legend:!0,title_mode:"auto",title:"",max_width:25,swatch_width:.75,swatch_height:1,swatch_radius:3,legend_items_padding:.5,icon_height:1,icon_color:"#777777",icon_fill_opacity:1,icon_stroke_opacity:1,order_override:"",orientation:"horizontal"});function CU(t){for(var e in this._state=t,SU)void 0===this._state[e]&&(this._state[e]=SU[e]);return this._colorFunction=void 0,this._formatFunction=void 0,this._legend_items=[],this._filtered_items=[],this._eventListeners=[],this._id="fl-legend-discrete-color-"+AU,this._visible=!0,this._auto_title="",this._container=bm(document.createElement("div")).attr("class","fl-legend-container").attr("id",this._id),this._container.append("p").attr("class","fl-legend-title"),AU++,this}function EU(t,e){for(var n={},r=e.split(/\s*\n\s*/),i=0;i<r.length;i++){var o;n[r[i]]=i}for(var a=[],l=0;l<t.length;l++){var s=t[l],u=n[s.label];void 0!==u&&(a[u]=s)}return a.filter((function(t){return void 0!==t}))}CU.prototype.appendTo=_U,CU.prototype.format=gU,CU.prototype.getContainer=yU,CU.prototype.visible=mU,CU.prototype.autoTitle=vU,CU.prototype._updateTitle=bU,CU.prototype.data=function(t,e){return this._colorFunction=e,t||e?(e?Array.isArray(t)?this._legend_items=t.slice().map((function(t,n){var r="object"==typeof t?t.label||"":t;return r?{label:r,color:e(r),index:n}:null})).filter((function(t){return null!==t})):this._legend_items=[]:this._legend_items=Array.isArray(t)?t.slice():[],this):this._legend_items.slice()},CU.prototype.filtered=function(t){return t?(this._filtered_items=Array.isArray(t)?t.slice():[],this):this._filtered_items.slice()},CU.prototype.on=function(t,e){return this._container?(e&&this._eventListeners.indexOf(t)<0?this._eventListeners.push(t):e||this._eventListeners.splice(this._eventListeners.indexOf[t],1),this._container.classed("interactive",this._eventListeners.length>0),e?this._container.on(t,(function(){var t=im.target,n=t.parentNode,r=t.classList.contains("fl-legend-item")?t:n.classList.contains("fl-legend-item")?n:null;if(r){var i=bm(r).datum();e.call(r,i,i.index)}})):this._container.on(t,null),this):this},CU.prototype.update=function(){var t=this._state.show_legend&&this._visible&&this._legend_items.length>0;return this._container.style("display",t?"":"none"),t?(this._updateTitle(),this._updateLegend(),this):this},CU.prototype._updateLegend=function(){var t=this,e=this._formatFunction,n;this._container.style("max-width",wU(this._state.max_width)+"px").style("display","inline-flex").style("flex-wrap","wrap").style("align-items","horizontal"==this._state.orientation?"center":"start").style("align-content","horizontal"==this._state.orientation?"center":null).style("flex-direction","horizontal"==this._state.orientation?null:"column"),n=this._state.order_override.trim()?EU(this._legend_items,this._state.order_override):this._legend_items;var r=this._container.selectAll(".fl-legend-item").data(n),i=r.enter().append("div").attr("class","fl-legend-item");i.append("div").attr("class","fl-legend-swatch"),i.append("svg").attr("class","fl-legend-icon fl-ignore-svg-download").append("path"),i.append("p").attr("class","fl-legend-label");var o=r.merge(i);return o.style("display","horizontal"==this._state.orientation?"inline-flex":"flex").style("flex-direction",(function(t){return t.reverse?"row-reverse":"row"})).style("opacity",(function(e){return t._filtered_items.indexOf(e.label)>-1?.2:""})).style("align-items","center").style("padding-inline-end","horizontal"==this._state.orientation?this._state.legend_items_padding+"rem":0).style("padding-inline-start",0),o.select(".fl-legend-swatch").style("height",this._state.swatch_height+"rem").style("width",this._state.swatch_width+"rem").style("border-radius",this._state.swatch_radius+"px").style("background-color",(function(t){return t.color})).style("display",(function(t){return t.icon?"none":null})),o.select(".fl-legend-icon").attr("height",Math.ceil(wU(this._state.icon_height))).attr("width",(function(e){if(!e.icon)return 0;var n=e.icon.width,r=e.icon.height,i=e.outline?r*e.stroke_thickness:0,o=(n+=i)/(r+=i),a=wU(t._state.icon_height*o);return Math.ceil(a)})).style("margin-right",.25*this._state.text_size+"rem").style("display",(function(t){return t.icon?"inline-block":"none"})).select("path").attr("d",(function(t){return t.icon?t.icon.path_string:null})).attr("transform",(function(e){if(!e.icon)return null;var n=e.icon.height,r=e.outline?n*e.stroke_thickness:0;n+=r;var i,o,a="scale("+wU(t._state.icon_height)/n+")";return a+="translate("+.5*r+","+.5*r+")"})).style("fill",(function(e){return e.outline?"none":e.fill||e.color||t._state.icon_color})).style("fill-opacity",(function(e){return e.outline?0:e.fill_opacity||t._state.icon_fill_opacity})).style("stroke",(function(e){return e.outline||e.stroke?e.stroke||e.color||t._state.icon_color:"none"})).style("stroke-width",(function(t){if(!t.outline&&!t.stroke_width)return 0;var e=t.icon.height*t.stroke_thickness;return t.stroke_width||e})).style("stroke-opacity",(function(e){return e.outline||e.stroke_opacity?e.stroke_opacity||t.state.icon_stroke_opacity:0})),o.select(".fl-legend-label").text((function(t){return e?e(t.label):t.label})).style("margin",0).style("user-select","none").style("padding-inline-end",0).style("padding-inline-start",pU),r.exit().remove(),this._legend_item_els=o,this},CU.prototype.prepareScreenshotSVG=function(){this._state.show_legend&&this._visible&&this._legend_items.length&&cU("#fl-layout-wrapper",this._id+"-svg-screenshot-container").addTextElements(".fl-legend-title").addCircleElements(".fl-legend-swatch").addTextElements(".fl-legend-label")},CU.prototype.clearScreenshotSVG=function(){const t=document.getElementById(this._id+"-svg-screenshot-container");t&&t.remove()};var zU=0,TU=window.devicePixelRatio||1,NU,jU=Object.freeze({show_legend:!0,title_mode:"auto",title:"",color_band_width:8,color_band_height:1,color_band_radius:3,binned_label_mode:"thresholds",binned_label_custom:"",legend_min:null,legend_max:null,additional_min_label:"",additional_max_label:""});function LU(t){for(var e in this._state=t,jU)void 0===this._state[e]&&(this._state[e]=jU[e]);this._colorFunction=void 0,this._formatFunction=void 0,this._legend_domain=[],this._id="fl-legend-continuous-color-"+zU,this._visible=!0,this._marker_value=null,this._auto_title="",this._container=bm(document.createElement("div")).attr("class","fl-legend-container").attr("id",this._id).style("display","none"),this._container.append("p").classed("fl-legend-title",!0);var n=this._container.append("div").classed("min label",!0);n.append("tspan").classed("custom-label",!0),n.append("tspan").classed("number",!0),this._container.append("div").classed("color-range-container",!0),this._container.select(".color-range-container").append("canvas").classed("color-range",!0),this._container.select(".color-range-container").append("canvas").classed("color-range-labels",!0);var r=this._container.append("div").classed("max label",!0);return r.append("tspan").classed("number",!0),r.append("tspan").classed("custom-label",!0),zU++,this}function PU(t){var e=-1/0,n=1/0;for(var r in t)e=Math.max(e,t[r]),n=Math.min(n,t[r]);return function(t){return t>=n&&t<=e}}LU.prototype.appendTo=_U,LU.prototype.format=gU,LU.prototype.getContainer=yU,LU.prototype.visible=mU,LU.prototype.autoTitle=vU,LU.prototype._updateTitle=bU,LU.prototype.data=function(t,e){if(!t&&!e)return this._legend_domain.slice();var n=Array.isArray(t)?t.slice():[];return this._legend_domain=xU(n,this._state),this._colorFunction=e,this},LU.prototype.markerValue=function(t){return void 0===t?this._marker_value:(this._marker_value=t,this)},LU.prototype.update=function(t){var e=this._state.show_legend&&this._visible&&this._legend_domain.length>0;return this._container.style("display",e?"":"none"),e?(this._updateTitle(),this._updateLegend(t),this):this},LU.prototype._updateLegend=function(t){var e=this._legend_domain;NU=document.body.getAttribute("dir"),this._scale_type="continuous",this._colorFunction.thresholds?this._scale_type="binned":e.length>2&&(this._scale_type="diverging");var n=this._state,r=wU(n.color_band_width),i=wU(n.color_band_height),o=r;this._container.style("display","inline-flex").style("align-items","continuous"==this._scale_type?"center":"flex-start"),this._container.select(".color-range-container").style("display","inline-block");var a=this._container.select(".color-range").attr("width",r*TU).attr("height",i*TU).style("border-radius",n.color_band_radius+"px").style("width",r+"px").style("height",i+"px").style("display","block");this._container.select(".color-range-labels").attr("width",o*TU).style("width",o+"px").style("display","continuous"==this._scale_type?"none":"block").node().getContext("2d").scale(TU,TU);var l=a.node().getContext("2d");function s(t){var n=e.max-e.min,i=t/r;return"rtl"==NU?e.max-i*n:e.min+i*n}l.scale(TU,TU);for(var u=0;u<r;u++){var c=this._colorFunction(s(u));l.fillStyle=c,l.strokeStyle=c,l.fillRect(u,0,1,i),l.strokeRect(u,0,1,i)}if(null!==this._marker_value){var f,h=yA().domain([e.min,e.max]).range([0,r])(this.markerValue()),d=0,p=i;l.save(),l.strokeStyle="#FFFFFF",l.lineWidth=3,l.beginPath(),l.moveTo(h,0),l.lineTo(h,p),l.stroke(),l.strokeStyle="#000000",l.lineWidth=1,l.beginPath(),l.moveTo(h,0),l.lineTo(h,p),l.stroke(),l.restore()}this._updateLegendLabels(t)},LU.prototype._updateLegendLabels=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var e=this._container.select(".color-range-labels"),n=this._formatFunction,r=this._legend_domain,i=this._state,o=this._container.select(".min.label").style("display","inline-flex").style("align-items","center").style("vertical-align","middle").style("user-select","none").style("line-height","1.25em").style("padding-inline-start",0).style("padding-inline-end",pU);o.select(".number").style("display","continuous"==this._scale_type?null:"none").text((function(){return n?n(r.min):r.min})),o.select(".custom-label").text((function(){return i.additional_min_label+" "})).style("font-weight","bold").style("text-align","center").style("padding-inline-end",pU);var a=this._container.select(".max.label").style("display","inline-flex").style("align-items","center").style("vertical-align","middle").style("user-select","none").style("line-height","1.25em").style("padding-inline-start",pU).style("padding-inline-end",0);a.select(".number").style("display","continuous"==this._scale_type?null:"none").text((function(){return n?n(r.max):r.max})),a.select(".custom-label").text((function(){return" "+i.additional_max_label})).style("font-weight","bold").style("text-align","center").style("padding-inline-start",pU);var l=[],s=0,u=0,c,f,h,d,p;if("diverging"===this._scale_type?l=this._getDivergingLabels():"binned"===this._scale_type&&(l=this._getBinnedLabels()),l.length){var _=e.node().getContext("2d");_.textAlign="center",_.textBaseline="top",_.font=t.weight+" "+wU(t.size)+"px "+t.family;var g=(c=[],f=wU(i.color_band_width),h=PU([0,f]),d="rtl"==NU?[r.max,r.min]:[r.min,r.max],p=yA().domain(d).range([0,f]),function(t){var e=p(t);if(h(e)){for(var r=n?n(t):t,i=_.measureText(r).width/2+1,o=e-i,a=e+i,l=0,d=c.length,g=0;g<d&&e>c[g].center;g++)l++;var y=0===l,m=l===d;if((y||!(c[l-1].right>o))&&(m||!(c[l].left<a)))return y&&(s=Math.abs(Math.min(0,o))),m&&(u=Math.max(0,a-f)),c.splice(l,0,{left:o,center:e,right:a}),{text:r,position:e}}}),y=l.map((function(t){return g(t)})),m=wU(i.color_band_width)+s+u,v=Math.ceil(.95*wU(t.size)),b=window.devicePixelRatio||1;e.attr("width",m*b).style("width",m+"px").attr("height",v*b).style("height",v+"px").style("margin-top",pU),bm(".color-range").style("margin-left",s+"px"),_.scale(b,b),_.textAlign="center",_.textBaseline="top",_.font=t.weight+" "+wU(t.size)+"px "+t.family,_.fillStyle=t.color,y.forEach((function(t){t&&_.fillText(t.text,t.position+s,0)}))}},LU.prototype._getDivergingLabels=function(){var t=this._legend_domain,e=PU(t),n=[];return e(t.min)&&n.push(t.min),e(t.mid)&&n.push(t.mid),e(t.max)&&n.push(t.max),n},LU.prototype._getBinnedLabels=function(){var t=this._state,e=this._legend_domain,n=PU(e),r;if("thresholds"===t.binned_label_mode)r=this._colorFunction.thresholds.slice().filter(n),e.min<r[0]&&r.unshift(e.min),e.max>r[r.length-e.length-1]&&r.unshift(e.max);else if("centers"===t.binned_label_mode)if((r=this._colorFunction.centers.slice().filter(n)).length){var i=this._colorFunction.thresholds,o=i[0],a=i[i.length-1];o>e.min&&r.unshift((e.min+o)/2),a<e.max&&r.unshift((a+e.max)/2)}else r.push((e.min+e.max)/2);else r=t.binned_label_custom.split(";").map(parseFloat);return r},LU.prototype.prepareScreenshotSVG=function(){this._state.show_legend&&this._visible&&this._legend_domain.length&&cU("#fl-layout-wrapper",this._id+"-svg-screenshot-container").addTextElements(".fl-legend-title").addGradient(".color-range",this._colorFunction,this._legend_domain).addTextElements(".min.label").addTextElements(".max.label")},LU.prototype.clearScreenshotSVG=function(){const t=document.getElementById(this._id+"-svg-screenshot-container");t&&t.remove()};var OU=0,FU=Object.freeze({show_legend:!0,title_mode:"auto",title:"",clip_height:1,small_symbol_size:.5,shape_fill:"#eeeeee",shape_stroke:"#555555"});function DU(t){for(var e in this._state=t,FU)void 0===this._state[e]&&(this._state[e]=FU[e]);this._scaleFunction=void 0,this._formatFunction=void 0,this._id="fl-legend-continuous-size-"+OU,this._visible=!0,this._auto_title="",this._symbol_type="circle",this._spike_width=10,this._container=bm(document.createElement("div")).attr("class","fl-legend-container").attr("id",this._id).style("display","none").style("align-items","center"),this._container.append("p").attr("class","fl-legend-title"),this._container.append("div").classed("min label",!0);var n=this._container.append("div").classed("symbols",!0);return n.append("canvas").classed("min symbol",!0),n.append("canvas").classed("max symbol",!0),this._container.append("div").classed("max label",!0),OU++,this}DU.prototype.appendTo=_U,DU.prototype.format=gU,DU.prototype.autoTitle=vU,DU.prototype._updateTitle=bU,DU.prototype.getContainer=yU,DU.prototype.visible=mU,DU.prototype.scale=function(t){return void 0===t?this._scaleFunction:(this._scaleFunction=t,this)},DU.prototype.symbolType=function(t){return void 0===t?this._symbol_type:(this._symbol_type=t,this)},DU.prototype.spikeWidth=function(t){return void 0===t?this._spike_width:(this._spike_width=t,this)},DU.prototype.update=function(){var t=this._state.show_legend&&this._visible,e=Math.ceil(wU(this._state.clip_height));return this._container.style("display",t?"inline-flex":"none").style("align-items","circle"===this._symbol_type?"center":"baseline").style("min-height",e+"px"),t&&this._scaleFunction?(0!==this._scaleFunction.domain()[0]&&console.warn("Non zero domain[0] in ContinuousSizeLegend"),0!==this._scaleFunction.range()[0]&&console.warn("Non zero range[0] in ContinuousSizeLegend"),this._updateTitle(),this._updateLegend(),this):this},DU.prototype._updateSymbolCanvas=function(t,e,n,r){var i,o=this._container.select(t).style("width",e+"px").style("height",n+"px").attr("width",e*r).attr("height",n*r).node().getContext("2d");return o.scale(r,r),o.clearRect(0,0,e,n),o},DU.prototype._updateCircle=function(t,e,n,r,i,o){var a=this._scaleFunction(e),l=Math.ceil(2*a),s=this._updateSymbolCanvas(t,l,n,r);s.beginPath(),s.fillStyle=o,s.arc(.5*l,.5*n,a,0,2*Math.PI),s.fill(),s.beginPath(),s.fillStyle=i,s.arc(.5*l,.5*n,Math.max(a-1,0),0,2*Math.PI),s.fill()},DU.prototype._updateSpike=function(t,e,n,r,i,o){var a=this._scaleFunction(e),l=Math.ceil(this._spike_width),s=this._updateSymbolCanvas(t,l,n,r),u=Math.atan(.5*l/a),c=1/Math.cos(u),f=1/Math.sin(u);s.beginPath(),s.fillStyle=o,s.moveTo(0,n),s.lineTo(.5*l,n-a),s.lineTo(l,n),s.fill(),s.beginPath(),s.fillStyle=i,s.moveTo(c,n),s.lineTo(.5*l,n-a+f),s.lineTo(l-c,n),s.fill()},DU.prototype._updateLegend=function(){var t=this._scaleFunction.domain(),e=this._scaleFunction.range(),n=this._formatFunction,r=this._state,i=r.shape_fill,o=r.shape_stroke,a=window.devicePixelRatio||1,l=wU(r.clip_height);l=Math.ceil(Math.min(l,2*e[1]));var s=this._symbol_type,u=this._scaleFunction.invert("circle"===s?l/2:l),c=MU(u=Math.min(u,t[1]))||0,f=c*r.small_symbol_size;this._container.style("min-height",l+"px"),this._container.select(".symbols").style("display","flex").style("flex-wrap","nowrap"),this._container.select(".min.symbol").style("margin-right","0.25rem"),this._container.select(".min.label").style("user-select","none").style("line-height","1.25em").text((function(){return n?n(f):f})).style("padding-inline-start",0).style("padding-inline-end",pU),"circle"===s?this._updateCircle(".min.symbol",f,l,a,i,o):"spike"===s&&this._updateSpike(".min.symbol",f,l,a,i,o),"circle"===s?this._updateCircle(".max.symbol",c,l,a,i,o):"spike"===s&&this._updateSpike(".max.symbol",c,l,a,i,o),this._container.select(".max.label").style("user-select","none").style("line-height","1.25em").text((function(){return n?n(c):c})).style("padding-inline-start",pU).style("padding-inline-end",0)},DU.prototype.prepareScreenshotSVG=function(){this._state.show_legend&&this._visible&&cU("#fl-layout-wrapper",this._id+"-svg-screenshot-container").addTextElements(".min.label").addCircleElements(".min.symbol").addCircleElements(".max.symbol").addTextElements(".max.label")},DU.prototype.clearScreenshotSVG=function(){const t=document.getElementById(this._id+"-svg-screenshot-container");t&&t.remove()};var qU,RU,BU,HU,IU=1,UU=Object.freeze({alignment:"start",orientation:"horizontal",text_color:null,title_weight:"bold",text_weight:"normal",text_size:1});function YU(t){for(var e in this._state=t,UU)void 0===this._state[e]&&(this._state[e]=UU[e]);return this}function WU(t){return new YU(t)}function VU(t){return new CU(t)}function ZU(t){return new LU(t)}function XU(t){return new DU(t)}YU.prototype.appendTo=function(t){return this._container=bm(t).append("div").node(),this},YU.prototype.add=function(t){this._legends=Array.isArray(t)?t:[t];var e=this;return this._legends.forEach((function(t){t&&"function"==typeof t.appendTo?t.appendTo(e._container):console.warn("Please pass in valid legend instances into .add()")})),this},YU.prototype.update=function(){var t=window.template||void 0,e=t?t.state.layout:void 0;RU=this._state.text_color||t&&e&&e.font_color||"#333333",BU=e?e.body_font.name:window.getComputedStyle(document.body).fontFamily,qU=this._state.text_size,HU=this._state.text_weight;var n={family:BU,weight:HU,size:qU,color:RU};this._legends.forEach((function(t){t&&"function"==typeof t.update&&t.update(n)}));var r="horizontal"===this._state.orientation,i=this._state.alignment,o="center"==i?i:"flex-"+i,a;return bm(this._container).style("justify-content",r?o:null).style("align-items",r?null:o).style("display","flex").style("flex-direction",r?"row":"column"),bm(this._container).selectAll(".fl-legend-container").style("padding-inline-end",(function(){return r?"0.5rem":0})).style("padding-bottom",(function(){return r?0:"0.25rem"})).style("justify-content",o),bm(this._container).selectAll(".fl-legend-title").style("color",this._state.text_color).style("font-weight",this._state.title_weight).style("font-size",qU+"rem").style("margin-right",.25*qU+"rem").style("line-height","1.25em").style("margin-top",0).style("margin-bottom",0).style("text-align",i),bm(this._container).selectAll(".fl-legend-item").style("display","inline-flex").style("text-align",i),bm(this._container).selectAll(".fl-legend-label").style("color",this._state.text_color).style("font-weight",this._state.text_weight).style("font-size",qU+"rem"),bm(this._container).selectAll(".label").style("color",this._state.text_color).style("font-weight",this._state.text_weight).style("font-size",qU+"rem"),this};var GU=VD(),$U,QU,JU,KU;function tY(){JI.radius_scale&&GU.domain(JI.radius_scale.domain).range(JI.radius_scale.range)}function eY(){$U=WU(jc.legend_container),JU=VU(jc.shade_by_legend_discrete),KU=ZU(jc.shade_by_legend_continuous),QU=XU(jc.size_by_legend),$U.appendTo(cJ.getSection("legend")).add([QU,JU,KU])}function nY(){"none"===jc.size_by.type||NM()?QU.visible(!1):QU.scale(GU).format(_D).autoTitle(jC(jc.size_by)).visible(!0)}function rY(){var t=[],e=zC(jc.shade_by);return LM.forEach((function(n){var r=n.categoryColumns[e];""!==r&&fC.indexOf(r)>-1&&t.push(r)})),(t=TM(t)).sort(),t}function iY(){if("categorical"===jc.shade_by.type){var t=rY();JU.data(t,cC.getColor).autoTitle(jC(jc.shade_by)).visible(!0)}else JU.visible(!1)}function oY(){"numeric"===jc.shade_by.type?KU.data(fC,cC.getColor).autoTitle(jC(jc.shade_by)).format(_D).visible(!0):KU.visible(!1)}function aY(){nY(),iY(),oY(),$U.update()}function lY(){var t;bm(cJ.getSidebar()).append("button").attr("id","controls-hide-button").on("click",uY).append("svg").attr("viewBox","0 0 40 40").append("path").attr("d","M 10,10 L 30,30 M 30,10 L 10,30"),bm(cJ.getSection("primary")).append("button").attr("id","controls-show-button").on("click",uY).append("svg").attr("viewBox","0 0 64 64").append("path").attr("d","M9,0 C10.6568542,-3.04359188e-16 12,1.34314575 12,3 L12.0008885,39.906444 C13.2270123,40.3369266 14.3358071,41.0504429 15.3272727,42.046993 C17.1090909,43.8013986 18,45.9395804 18,48.4615385 C18,50.9834965 17.1090909,53.1216783 15.3272727,54.8760839 C14.3358071,55.872634 13.2270123,56.5861504 12.0008885,57.0166329 L12,61 C12,62.6568542 10.6568542,64 9,64 C7.34314575,64 6,62.6568542 6,61 L5.99995465,57.0330356 C4.73416119,56.6043827 3.58872176,55.8853988 2.56363636,54.8760839 C0.854545455,53.1216783 0,50.9834965 0,48.4615385 C0,45.9395804 0.854545455,43.8013986 2.56363636,42.046993 C3.58872176,41.0376782 4.73416119,40.3186942 5.99995465,39.8900413 L6,3 C6,1.34314575 7.34314575,3.04359188e-16 9,0 Z M32,0 C33.6568542,-3.04359188e-16 35,1.34314575 35,3 L35.0008885,7.48855401 C36.2270123,7.91684021 37.3358071,8.62671614 38.3272727,9.61818182 C40.1090909,11.3636364 41,13.4909091 41,16 C41,18.5090909 40.1090909,20.6363636 38.3272727,22.3818182 C37.3358071,23.3732839 36.2270123,24.0831598 35.0008885,24.511446 L35,61 C35,62.6568542 33.6568542,64 32,64 C30.3431458,64 29,62.6568542 29,61 L28.9999546,24.527765 C27.7341612,24.1012991 26.5887218,23.3859835 25.5636364,22.3818182 C23.8545455,20.6363636 23,18.5090909 23,16 C23,13.4909091 23.8545455,11.3636364 25.5636364,9.61818182 C26.5887218,8.61401653 27.7341612,7.89870091 28.9999546,7.47223495 L29,3 C29,1.34314575 30.3431458,3.04359188e-16 32,0 Z M55,0 C56.6568542,-3.04359188e-16 58,1.34314575 58,3 L58.0008885,26.5859899 C59.2270123,27.0142761 60.3358071,27.724152 61.3272727,28.7156177 C63.1090909,30.4610723 64,32.588345 64,35.0974359 C64,37.6065268 63.1090909,39.7337995 61.3272727,41.4792541 C60.3358071,42.4707198 59.2270123,43.1805957 58.0008885,43.6088819 L58,61 C58,62.6568542 56.6568542,64 55,64 C53.3431458,64 52,62.6568542 52,61 L51.9999546,43.6252009 C50.7341612,43.198735 49.5887218,42.4834194 48.5636364,41.4792541 C46.8545455,39.7337995 46,37.6065268 46,35.0974359 C46,32.588345 46.8545455,30.4610723 48.5636364,28.7156177 C49.5887218,27.7114524 50.7341612,26.9961368 51.9999546,26.5696708 L52,3 C52,1.34314575 53.3431458,3.04359188e-16 55,0 Z")}function sY(){var t=jc.hide_controls_toggle&&("preview"==Flourish.environment||"live"==Flourish.environment);t|=wQ();var e=jc.controls_toggle_color||(jc.layout.background_color_enabled?jc.layout.background_color:"#fff");bm("#controls-hide-button").style("display",jc.show_controls&&!t?"inline":"none").style("background-color",jc.controls_toggle_background||jc.layout.font_color).select("svg").attr("stroke",e),bm("#controls-show-button").style("display",jc.show_controls||t?"none":"inline").style("background-color",jc.controls_toggle_background||jc.layout.font_color).style("padding",jc.controls_toggle_size+"rem").select("svg").style("width",jc.controls_toggle_size+"rem").style("height",jc.controls_toggle_size+"rem").style("fill",e)}function uY(){jc.show_controls=!jc.show_controls,K$()}function cY(t){const e=[{search:"",result:t}],n=function(t,n){for(let n=e.length-1;n>=0&&!t.startsWith(e[n].search);n--)e.pop();e.push({search:t,result:n})},r=function(t){let n=null;for(let r=e.length-1;r>=0;r--)if(t.startsWith(e[r].search)){n=e[r];break}return n};return{clear:()=>e.length=1,addSearch:n,getClosestSearch:r,current_search_list:()=>e.filter(((t,e)=>e)).map((t=>t.search))}}function fY(t,e){return e.includes(t)}function hY(t,e){return e.startsWith(t)}function dY(t,e){return t===e}const pY=Object.freeze({anywhere:fY,start:hY,whole:dY});function _Y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t=>t,n=t=>t,r="anywhere",i="some";const o=t.map((function(t){let n=e(t);const r=Array.isArray(n);r&&(n=n.slice());const i=undefined;return{item:t,is_array:r,exact:n,normalized:n}})),a=cY(o),l=function(t){t=n(t);const e=a.getClosestSearch(t);if(e.search===t)return e.result.map((t=>t.item));const o=pY[r],l=e.result.filter((function(e){return e.is_array?e.normalized[i]((e=>o(t,e))):o(t,e.normalized)}));return"whole"!==r&&a.addSearch(t,l),l.map((t=>t.item))};return l.normalizer=function(t){return void 0===t?this.normalizer:(n=t,a.clear(),o.forEach((function(t){t.normalized=t.is_array?t.exact.map(n):n(t.exact)})),l)},l.mode=function(t){if(void 0===t)return r;if(void 0===pY[t])throw new Error(t+" is not a valid mode");return t!==r&&(r=t,a.clear()),l},l.arrayMode=function(t){if(void 0===t)return i;if(!["some","every"].includes(t))throw new Error(t+" is not a valid array mode");return t!==i&&(i=t,a.clear()),l},l._current_search_list=()=>a.current_search_list(),l}var gY=25,yY=5,mY=10,vY=10,bY={},xY,wY;function kY(t,e,n,r,i,o,a){var l=n-t/2-vY,s=n+t/2+vY,u=t/2+Math.min(0,l-i.left)+Math.max(0,s-i.right),c;return{pos:[u,a],shape:c=u-mY<yY?[-u,(-vY-yY)*o,Math.max(mY,yY-u),-vY*o]:u+mY>t-yY?[Math.min(-10,t-u-yY),-vY*o,Math.min(mY,t-u),(-vY-yY)*o]:[-10,-vY*o,mY,-vY*o]}}function MY(t,e,n,r,i,o,a){var l=r-e/2-vY,s=r+e/2+vY,u=e/2+Math.min(0,l-i.top)+Math.max(0,s-i.bottom),c;return{pos:[a,u],shape:c=u-mY<yY?[(-vY-yY)*o,-u,-vY*o,Math.max(mY,yY-u)]:u+mY>e-yY?[-vY*o,Math.min(-10,e-u-yY),(-vY-yY)*o,Math.min(mY,e-u)]:[-vY*o,-10,-vY*o,mY]}}function AY(t,e,n,r,i,o){var a=bY[t](e,n,r,i,o),l=r-gY-a.pos[0],s=i-gY-a.pos[1];return{left:l,top:s,right:l+e+2*gY,bottom:s+n+2*gY}}function SY(t,e,n,r,i,o,a,l,s,u){var c=bY[t](r,i,l,s,u);e.left=o-gY-c.pos[0]+"px",e.top=a-gY-c.pos[1]+"px",n.setAttribute("d","M0,0L"+c.shape.join(",")+"Z"),n.setAttribute("transform","translate("+(c.pos[0]+gY)+","+(c.pos[1]+gY)+")")}function CY(){var t=this;function e(e){return t._maxWidth.match(/^\d+(?:\.\d+)?%$/)?e.width*parseFloat(t._maxWidth)/100:t._maxWidth.match(/^\d+(?:\.\d+)?(?:px)?$/)?parseFloat(t._maxWidth):(null!=t._maxWidth&&console.error("Popup: Unknown value for maxWidth: "+t._maxWidth),e.width)}if(t.is_visible=!0,t._point){var n=document.documentElement.getBoundingClientRect(),r=t._point[0],i=t._point[1],o=t._container.getBoundingClientRect();r<o.left?r=o.left:r>o.right&&(r=o.right),i<o.top?i=o.top:i>o.bottom&&(i=o.bottom);var a=r-n.left,l=i-n.top,s=t._getElement(),u=s.style,c=s.querySelector(".flourish-popup-svg"),f=c.querySelector("g"),h=f.querySelector("rect"),d=f.querySelector("path"),p=s.querySelector(".flourish-popup-content");u.display="block",p.style.maxWidth=e(o)+"px",t._inner_html!=t._html&&(p.innerHTML=t._inner_html=t._html);var _=p.getBoundingClientRect(),g,y;do{g=Math.ceil(_.width),y=Math.ceil(_.height),u.width=g+2*gY+"px",u.height=y+2*gY+"px",_=p.getBoundingClientRect()}while(g!=Math.ceil(_.width)||y!=Math.ceil(_.height));h.setAttribute("width",g),h.setAttribute("height",y),c.setAttribute("width",g+2*gY),c.setAttribute("height",y+2*gY);for(var m=gY-vY,v=null,b=null,x=null,w=1/0,k=1/0,M,A,S=0;S<t._directions.length;S++){var C=t._directions[S],E=AY(C,g,y,r,i,o),z=Math.max(0,Math.floor(o.left)-E.left-m)+Math.max(0,E.right-Math.ceil(o.right)-m),T=Math.max(0,Math.floor(o.top)-E.top-m)+Math.max(0,E.bottom-Math.ceil(o.bottom)-m);if(0==z&&0==T){v=C;break}(z<w||z==w&&T<M)&&(w=z,M=T,b=C),(T<k||T==k&&z<A)&&(k=T,A=z,x=C)}return v?C=v:"horizontal"==t._fallbackFit?C=b:"vertical"==t._fallbackFit?C=x:(console.warn("Popup: failed to point box of size ("+g+", "+y+") at ("+r+", "+i+") within ("+o.left+", "+o.top+", "+o.right+", "+o.bottom+")"),C=t._directions[0]),SY(C,u,d,g,y,a,l,r,i,o),t}console.error("Popup: cannot draw popup till point() has been specified")}function EY(t,e,n){var r=document.createElementNS("http://www.w3.org/2000/svg",t),i;if(e)for(i in e)r.setAttribute(i,e[i]);var o=r.style;if(n)for(i in n)o[i]=n[i];return r}function zY(){var t=this,e="flourish-popup-"+t.unique_id,n=document.getElementById(e);if(!n){(n=document.createElement("div")).className="flourish-popup",n.id=e;var r=n.style;r.display="none",r.margin=r.padding=0,r.position="absolute",r.width="80px",r.height="40px",r.boxSizing="border-box",n.addEventListener("click",(function(e){t.fire("click",e)}),!1);var i=EY("svg",{class:"flourish-popup-svg"},{position:"absolute",top:0,left:0,bottom:0,right:0}),o=EY("filter",{id:"dropshadow-"+t.unique_id,height:"130%"});o.appendChild(EY("feGaussianBlur",{in:"SourceAlpha",stdDeviation:5})),o.appendChild(EY("feOffset",{dx:0,dy:2,result:"offsetblur"}));var a=EY("feComponentTransfer");a.appendChild(EY("feFuncA",{type:"linear",slope:.2})),o.appendChild(a);var l=EY("feMerge");o.appendChild(l),l.appendChild(EY("feMergeNode")),l.appendChild(EY("feMergeNode",{in:"SourceGraphic"})),i.appendChild(o);var s=EY("g",{filter:"url(#dropshadow-"+t.unique_id+")",fill:"white",stroke:"none"});s.appendChild(EY("rect",{x:gY,y:gY,rx:yY})),s.appendChild(EY("path")),i.appendChild(s),n.appendChild(i);var u=document.createElement("div");u.className="flourish-popup-content",(r=u.style).position="absolute",r.top=r.left=gY+"px",r.padding="10px",n.appendChild(u),t._getConstrainer().appendChild(n)}return t._resizeConstrainer(),n}function TY(){return xY||((xY=document.createElement("div")).id="flourish-popup-constrainer",(wY=xY.style).overflow="hidden",wY.pointerEvents="none",wY.position="absolute",wY.left="0",wY.top="0",wY.margin="0",wY.padding="0",document.body.appendChild(xY),this._resizeConstrainer(),xY)}function NY(){xY||TY.call(this);var t=wY.display;wY.display="none",wY.width=document.documentElement.scrollWidth+"px",wY.height=document.documentElement.scrollHeight+"px",wY.display=t}bY.bottom=function t(e,n){return{shape:[-10,-vY,mY,-vY],pos:[e/2,n+vY]}},bY.top=function t(e,n){return{shape:[-10,vY,mY,vY],pos:[e/2,-vY]}},bY.left=function t(e,n){return{shape:[vY,mY,vY,-10],pos:[-vY,n/2]}},bY.right=function t(e,n){return{shape:[-vY,mY,-vY,-10],pos:[e+vY,n/2]}},bY.topLeft=function t(e,n){return{shape:[vY+yY,vY,vY,vY+yY],pos:[-vY,-vY]}},bY.bottomLeft=function t(e,n){return{shape:[vY+yY,-vY,vY,-vY-yY],pos:[-vY,n+vY]}},bY.topRight=function t(e,n){return{shape:[-vY-yY,vY,-vY,vY+yY],pos:[e+vY,-vY]}},bY.bottomRight=function t(e,n){return{shape:[-vY-yY,-vY,-vY,-vY-yY],pos:[e+vY,n+vY]}},bY.bottomFlexible=function t(e,n,r,i,o){return kY(e,n,r,i,o,1,n+vY)},bY.topFlexible=function t(e,n,r,i,o){return kY(e,n,r,i,o,-1,-vY)},bY.rightFlexible=function t(e,n,r,i,o){return MY(e,n,r,i,o,1,e+vY)},bY.leftFlexible=function t(e,n,r,i,o){return MY(e,n,r,i,o,-1,-vY)};var jY="2.1.5",LY=1,PY={container:document.body,maxWidth:"70%",point:null,html:null,directions:["bottom","top","left","right","topLeft","bottomLeft","topRight","bottomRight","bottomFlexible","topFlexible","leftFlexible","rightFlexible"],fallbackFit:"horizontal"};function OY(){for(var t in this.unique_id=LY++,this.is_visible=!0,PY)this["_"+t]=PY[t];this.handlers={click:[]}}function FY(t){OY.prototype[t]=function(e){return void 0===e?this["_"+t]:(this["_"+t]=e,this)}}for(var DY in PY)FY(DY);function qY(t){return t.replace(/[&<>]/g,(function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;"}[t]}))}function RY(){return new OY}OY.prototype.point=function(t,e){if(void 0===t)return this._point;if(Array.isArray(t))this._point=[t[0],t[1]];else if(void 0!==e)this._point=[t,e];else if(t instanceof HTMLElement||t instanceof SVGElement){var n=t.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Popup: could not understand argument");return this},OY.prototype.directions=function(t){return void 0===t?this._directions:("string"==typeof t&&(t=[t]),this._directions=t.slice(),this)},OY.prototype.text=function t(e){return this._html=qY(e),this},OY.prototype.on=function t(e,n){if(!(e in this.handlers))throw new Error("Popup.on: No such event: "+e);return this.handlers[e].push(n),this},OY.prototype.fire=function t(e,n){if(!(e in this.handlers))throw new Error("Popup.fire: No such event: "+e);for(var r=this.handlers[e],i=0;i<r.length;i++)r[i].call(this,n);return this},OY.prototype._getElement=zY,OY.prototype._getConstrainer=TY,OY.prototype._resizeConstrainer=NY,OY.prototype.draw=CY,OY.prototype.hide=function t(){return this.is_visible?(this.is_visible=!1,this._getElement().style.display="none",this):this},RY.version=jY;var BY={value:function(){}};function HY(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new IY(n)}function IY(t){this._=t}function UY(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function YY(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function WY(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=BY,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}IY.prototype=HY.prototype={constructor:IY,on:function(t,e){var n=this._,r=UY(t+"",n),i,o=-1,a=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<a;)if(i=(t=r[o]).type)n[i]=WY(n[i],t.name,e);else if(null==e)for(i in n)n[i]=WY(n[i],t.name,null);return this}for(;++o<a;)if((i=(t=r[o]).type)&&(i=YY(n[i],t.name)))return i},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new IY(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,i=(o=this._[t]).length;r<i;++r)o[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};var VY=HY("start","end","cancel","interrupt"),ZY=[],XY=0,GY=1,$Y=2,QY=3,JY=4,KY=5,tW=6;function eW(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};oW(t,n,{name:e,index:r,group:i,on:VY,tween:ZY,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:XY})}function nW(t,e){var n=iW(t,e);if(n.state>XY)throw new Error("too late; already scheduled");return n}function rW(t,e){var n=iW(t,e);if(n.state>QY)throw new Error("too late; already running");return n}function iW(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function oW(t,e,n){var r=t.__transition,i;function o(t){n.state=GY,n.timer.restart(a,n.delay,n.time),n.delay<=t&&a(t-n.delay)}function a(o){var u,c,f,h;if(n.state!==GY)return s();for(u in r)if((h=r[u]).name===n.name){if(h.state===QY)return rN(a);h.state===JY?(h.state=tW,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete r[u]):+u<e&&(h.state=tW,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete r[u])}if(rN((function(){n.state===QY&&(n.state=JY,n.timer.restart(l,n.delay,n.time),l(o))})),n.state=$Y,n.on.call("start",t,t.__data__,n.index,n.group),n.state===$Y){for(n.state=QY,i=new Array(f=n.tween.length),u=0,c=-1;u<f;++u)(h=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++c]=h);i.length=c+1}}function l(e){for(var r=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=KY,1),o=-1,a=i.length;++o<a;)i[o].call(t,r);n.state===KY&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var i in n.state=tW,n.timer.stop(),delete r[e],r)return;delete t.__transition}r[e]=n,n.timer=QT(o,0,n.time)}function aW(t,e){var n=t.__transition,r,i,o=!0,a;if(n){for(a in e=null==e?null:e+"",n)(r=n[a]).name===e?(i=r.state>$Y&&r.state<KY,r.state=tW,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]):o=!1;o&&delete t.__transition}}function lW(t){return this.each((function(){aW(this,t)}))}function sW(t,e){var n,r;return function(){var i=rW(this,t),o=i.tween;if(o!==n)for(var a=0,l=(r=n=o).length;a<l;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function uW(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=rW(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var l={name:e,value:n},s=0,u=i.length;s<u;++s)if(i[s].name===e){i[s]=l;break}s===u&&i.push(l)}o.tween=i}}function cW(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=iW(this.node(),n).tween,i=0,o=r.length,a;i<o;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((null==e?sW:uW)(n,t,e))}function fW(t,e,n){var r=t._id;return t.each((function(){var t=rW(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)})),function(t){return iW(t,r).value[e]}}function hW(t,e){var n;return("number"==typeof e?Gx:e instanceof Ps?Ix:(n=Ps(e))?(e=n,Ix):ew)(t,e)}function dW(t){return function(){this.removeAttribute(t)}}function pW(t){return function(){this.removeAttributeNS(t.space,t.local)}}function _W(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttribute(t);return a===i?null:a===r?o:o=e(r=a,n)}}function gW(t,e,n){var r,i=n+"",o;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?o:o=e(r=a,n)}}function yW(t,e,n){var r,i,o;return function(){var a,l=n(this),s;if(null!=l)return(a=this.getAttribute(t))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l));this.removeAttribute(t)}}function mW(t,e,n){var r,i,o;return function(){var a,l=n(this),s;if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l));this.removeAttributeNS(t.space,t.local)}}function vW(t,e){var n=jg(t),r="transform"===n?_w:hW;return this.attrTween(t,"function"==typeof e?(n.local?mW:yW)(n,r,fW(this,"attr."+t,e)):null==e?(n.local?pW:dW)(n):(n.local?gW:_W)(n,r,e))}function bW(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function xW(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function wW(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&xW(t,i)),n}return i._value=e,i}function kW(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&bW(t,i)),n}return i._value=e,i}function MW(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=jg(t);return this.tween(n,(r.local?wW:kW)(r,e))}function AW(t,e){return function(){nW(this,t).delay=+e.apply(this,arguments)}}function SW(t,e){return e=+e,function(){nW(this,t).delay=e}}function CW(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?AW:SW)(e,t)):iW(this.node(),e).delay}function EW(t,e){return function(){rW(this,t).duration=+e.apply(this,arguments)}}function zW(t,e){return e=+e,function(){rW(this,t).duration=e}}function TW(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?EW:zW)(e,t)):iW(this.node(),e).duration}function NW(t,e){if("function"!=typeof e)throw new Error;return function(){rW(this,t).ease=e}}function jW(t){var e=this._id;return arguments.length?this.each(NW(e,t)):iW(this.node(),e).ease}function LW(t){"function"!=typeof t&&(t=Ig(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o=e[i],a=o.length,l=r[i]=[],s,u=0;u<a;++u)(s=o[u])&&t.call(s,s.__data__,u,o)&&l.push(s);return new sV(r,this._parents,this._name,this._id)}function PW(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),l=0;l<o;++l)for(var s=e[l],u=n[l],c=s.length,f=a[l]=new Array(c),h,d=0;d<c;++d)(h=s[d]||u[d])&&(f[d]=h);for(;l<r;++l)a[l]=e[l];return new sV(a,this._parents,this._name,this._id)}function OW(t){return(t+"").trim().split(/^|\s+/).every((function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t}))}function FW(t,e,n){var r,i,o=OW(e)?nW:rW;return function(){var a=o(this,t),l=a.on;l!==r&&(i=(r=l).copy()).on(e,n),a.on=i}}function DW(t,e){var n=this._id;return arguments.length<2?iW(this.node(),n).on.on(t):this.each(FW(n,t,e))}function qW(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function RW(){return this.on("end.remove",qW(this._id))}function BW(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Dg(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var l=r[a],s=l.length,u=o[a]=new Array(s),c,f,h=0;h<s;++h)(c=l[h])&&(f=t.call(c,c.__data__,h,l))&&("__data__"in c&&(f.__data__=c.__data__),u[h]=f,eW(u[h],e,n,h,u,iW(c,n)));return new sV(o,this._parents,e,n)}function HW(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=Bg(t));for(var r=this._groups,i=r.length,o=[],a=[],l=0;l<i;++l)for(var s=r[l],u=s.length,c,f=0;f<u;++f)if(c=s[f]){for(var h=t.call(c,c.__data__,f,s),d,p=iW(c,n),_=0,g=h.length;_<g;++_)(d=h[_])&&eW(d,e,n,_,h,p);o.push(h),a.push(c)}return new sV(o,a,e,n)}var IW=vm.prototype.constructor;function UW(){return new IW(this._groups,this._parents)}function YW(t,e){var n,r,i;return function(){var o=wy(this,t),a=(this.style.removeProperty(t),wy(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}function WW(t){return function(){this.style.removeProperty(t)}}function VW(t,e,n){var r,i=n+"",o;return function(){var a=wy(this,t);return a===i?null:a===r?o:o=e(r=a,n)}}function ZW(t,e,n){var r,i,o;return function(){var a=wy(this,t),l=n(this),s=l+"";return null==l&&(this.style.removeProperty(t),s=l=wy(this,t)),a===s?null:a===r&&s===i?o:(i=s,o=e(r=a,l))}}function XW(t,e){var n,r,i,o="style."+e,a="end."+o,l;return function(){var s=rW(this,t),u=s.on,c=null==s.value[o]?l||(l=WW(e)):void 0;u===n&&i===c||(r=(n=u).copy()).on(a,i=c),s.on=r}}function GW(t,e,n){var r="transform"==(t+="")?pw:hW;return null==e?this.styleTween(t,YW(t,r)).on("end.style."+t,WW(t)):"function"==typeof e?this.styleTween(t,ZW(t,r,fW(this,"style."+t,e))).each(XW(this._id,t)):this.styleTween(t,VW(t,r,e),n).on("end.style."+t,null)}function $W(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function QW(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&$W(t,o,n)),r}return o._value=e,o}function JW(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,QW(t,e,null==n?"":n))}function KW(t){return function(){this.textContent=t}}function tV(t){return function(){var e=t(this);this.textContent=null==e?"":e}}function eV(t){return this.tween("text","function"==typeof t?tV(fW(this,"text",t)):KW(null==t?"":t+""))}function nV(t){return function(e){this.textContent=t.call(this,e)}}function rV(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&nV(r)),e}return r._value=t,r}function iV(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,rV(t))}function oV(){for(var t=this._name,e=this._id,n=uV(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var c=iW(s,e);eW(s,t,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new sV(r,this._parents,t,n)}function aV(){var t,e,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var l={value:a},s={value:function(){0==--i&&o()}};n.each((function(){var n=rW(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(l),e._.interrupt.push(l),e._.end.push(s)),n.on=e}))}))}var lV=0;function sV(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function uV(){return++lV}var cV=vm.prototype;function fV(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}sV.prototype={constructor:sV,select:BW,selectAll:HW,filter:LW,merge:PW,selection:UW,transition:oV,call:cV.call,nodes:cV.nodes,node:cV.node,size:cV.size,empty:cV.empty,each:cV.each,on:DW,attr:vW,attrTween:MW,style:GW,styleTween:JW,text:eV,textTween:iV,remove:RW,tween:cW,delay:CW,duration:TW,ease:jW,end:aV};var hV={time:null,delay:0,duration:250,ease:fV};function dV(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return hV.time=XT(),hV;return n}function pV(t){var e,n;t instanceof sV?(e=t._id,t=t._name):(e=uV(),(n=hV).time=XT(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a=r[o],l=a.length,s,u=0;u<l;++u)(s=a[u])&&eW(s,t,e,u,a,n||dV(s,e));return new sV(r,this._parents,t,e)}vm.prototype.interrupt=lW,vm.prototype.transition=pV;var _V=1,gV={container:document.body,point:[window.innerWidth/2,window.innerHeight/2],html:"",open_duration:250,close_duration:250,popup_custom_template:"",position:"overlay",shadow:!0,underlay_color:"rgba(255, 255, 255, 0.75)",width_side:35,height_side:35,width_overlay:80,height_overlay:80,vertical_position:"click",max_width:null,max_height:null,closeable:!0};function yV(){var t=this;for(var e in t.unique_id=_V++,t._is_open=!1,t._onclose=null,gV)t["_"+e]=gV[e]}function mV(t){yV.prototype[t]=function(e){return void 0===e?this["_"+t]:(this["_"+t]=e,this)}}for(var vV in gV)mV(vV);function bV(t){t._getElement().style.pointerEvents="none",t._is_open=!1;var e=t._close_duration;bm(t._getElement()).transition().duration(e).style("background","rgba(255, 255, 255, 0)").on("interrupt",(function(){bm(this).style("display",t._is_open?"block":"none")})).on("end",(function(){bm(this).style("display","none")})).select(".flourish-panel-close").style("opacity","0"),bm(t._inner).transition().duration(e).style("opacity",0),bm(t._content).transition().duration(e/2).style("opacity",0)}function xV(t){bm(t._inner).append("svg").attr("class","flourish-panel-close").attr("viewBox","0 0 40 40").style("width","1.25rem").style("height","1.25rem").style("position","absolute").style("right","1rem").style("top","1rem").style("cursor","pointer").style("opacity",0).on("mouseover",(function(){t._closeable&&(this.style.opacity=.66)})).on("mouseout",(function(){t._closeable&&(this.style.opacity=1)})).on("click",(function(){im.stopPropagation(),t.hide(),t._onclose&&t._onclose()})).on("touch",(function(){im.stopPropagation(),t.hide(),t._onclose&&t._onclose()})).append("path").attr("stroke","#333333").attr("stroke-width","0.5rem").attr("stroke-linecap","round").attr("d","M 10,10 L 30,30 M 30,10 L 10,30")}function wV(t){var e=t._is_open||t._html==t._default?0:t._open_duration,n=window.innerWidth,r=window.innerHeight,i="overlay"==t._position,o="top"==t._position||"bottom"==t._position,a="left"==t._position||"right"==t._position,l=100*(t._max_width||1/0)/n,s=100*(t._max_height||1/0)/r,u=100*t._point[1]/r,c="click"==t._vertical_position&&!Flourish.fixed_height,f=i?Math.min(t._width_overlay,l):o?100:Math.min(t._width_side,l),h=i?Math.min(t._height_overlay,s):a?100:Math.min(t._height_side,s),d=i?(100-f)/2:"right"==t._position?100-f:0,p=c?Math.max(1,Math.min(u-h/2,99-h)):(100-h)/2,_=i?p:"bottom"==t._position?100-h:0,g=i?0:f,y=i?0:h,m=i?100*t._point[0]/n:"right"==t._position?100:"left"==t._position?-f:0,v=i?u:"bottom"==t._position?100:"top"==t._position?-h:0;bm(t._getElement()).style("display","block").transition().duration(e).delay(.25*e).style("background",i?t._underlay_color:"rgba(255, 255, 255, 0)").style("pointer-events",i?null:"none"),bm(t._inner).style("opacity",1).style("display","block").style("pointer-events","none").style("width",g+"%").style("height",y+"%").style("left",m+"%").style("top",v+"%").transition().duration(e).style("width",f+"%").style("height",h+"%").style("left",d+"%").style("top",_+"%").on("end",(function(){bm(t._inner).style("pointer-events","all").style("width",f+"%").style("height",h+"%").style("left",d+"%").style("top",_+"%")})).on("interrupt",(function(){bm(t._inner).style("pointer-events","all").style("width",f+"%").style("height",h+"%").style("left",d+"%").style("top",_+"%")}));var b=a&&c;bm(t._content).transition().duration(e/4).delay(e).style("opacity",1).on("interrupt",(function(){bm(this).style("opacity",1)})),bm(t._content).select(".flourish-panel-content-inner").style("position",b?"absolute":null).style("top",b?u+"%":null).style("transform",b?"translateY(-50%)":null),bm(t._inner).select(".flourish-panel-close").style("opacity",0).transition().duration(e/4).delay(e).style("opacity",t._closeable?1:0),t._is_open=!0,JT()}function kV(){return new yV}yV.prototype.point=function(t,e){if(void 0===t)return this._point;if(Array.isArray(t))this._point=[t[0],t[1]];else if(void 0!==e)this._point=[t,e];else if(t instanceof HTMLElement||t instanceof SVGElement){var n=t.getBoundingClientRect();this._point=[Math.floor(n.left+n.width/2),Math.floor(n.top+n.height/2)]}else console.error("Panel: could not understand argument");return this},yV.prototype.container=function(t){return t&&(this._container=t),this},yV.prototype.hide=function(){var t=this;if(t._is_open)return bV(t),this},yV.prototype.close=yV.prototype.hide,yV.prototype.draw=function(){var t=this;return t._content.innerHTML=t._html,wV(t),this},yV.prototype.on=function(t,e){return"close"==t?e&&(this._onclose=e):console.error("Panel .on() method only supports 'close' events"),this},yV.prototype.margins=function(){var t={top:0,right:0,bottom:0,left:0};if(this._is_open&&"overlay"!=this._position){var e=this._getElement().getBoundingClientRect();"top"==this._position&&(t.top=e.top+e.height),"right"==this._position&&(t.right=e.left),"bottom"==this._position&&(t.bottom=e.top),"left"==this._position&&(t.left=e.left+e.width)}return t.css=t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px",t},yV.prototype._getElement=function(){var t=this,e="flourish-panel-"+t.unique_id,n=document.getElementById(e);if(!n){(n=document.createElement("div")).className="flourish-panel",n.id=e,n.addEventListener("click",(function(e){e.stopPropagation(),t.hide(),t._onclose&&t._onclose()}));var r=n.style;r.position="absolute",r.zIndex="999999",r.pointerEvents="none",r.width="100%",r.height="100%",r.top="0",r.left="0",r.background="rgba(255, 255, 255, 0)";var i=document.createElement("div");i.className="flourish-panel-inner",n.appendChild(i),t._inner=i,(r=i.style).width="0",r.height="0",r.position="absolute",r.boxSizing="border-box";var o=document.createElement("div");o.className="flourish-panel-shadow",i.appendChild(o);var a=document.createElement("div");a.className="flourish-panel-content",i.appendChild(a),t._content=a,(r=a.style).opacity="0",r.overflowY="auto",r.height="100%",xV(t),t._container.appendChild(n)}return n};var MV={mode:"popup",locked_id:null,popup_is_custom:!1,popup_custom_header:"Popup header",popup_custom_main:"Popup main content. Write your column names in between double curly brackets to display dynamic content.",popup_teaser_default:"Click to see more",popup_text_color:"#333333",popup_align:"start",popup_font_size:1,popup_width:12,popup_background:"#ffffff",popup_background_opacity:1,popup_padding:.5,popup_radius:.2,popup_shadow:!0,popup_pointer:!0,popup_header_background:"#333333",popup_header_text_color:"#ffffff",popup_header_type:"block",popup_list_type:"table",popup_list_label_weight:"normal",popup_list_separator:": ",panel_is_custom:!1,panel_custom_header:"Custom panel header",panel_custom_main:"Custom panel main content",panel_side_default_content:"<h1>Tap or click to explore</h1>",panel_side_fixed:!1,panel_position:"overlay",panel_width_overlay:80,panel_height_overlay:80,panel_vertical_position:"center",panel_width_side:35,panel_height_side:35,panel_max_width:null,panel_max_height:null,panel_text_color:"#333333",panel_align:"start",panel_font_size:1.25,panel_background:"#ffffff",panel_background_opacity:.9,panel_padding:1.2,panel_radius:.2,panel_shadow:!0,panel_open_duration:250,panel_close_duration:250,panel_list_type:"table",panel_list_label_weight:"normal",panel_list_separator:": "};function AV(t,e,n){var r="<div class='flourish-panel-content-inner'>",i=t["_"+n+"_default_template"],o=t._state[n+"_list_type"],a=t._state[n+"_list_separator"],l="<br />"===a,s=l?"":a,u=l?a:"";if(i)r+=i.replace(/\{\{((?:[^}]|\}[^}])*)\}\}/g,(function(n,r){var i;if(Array.isArray(t._column_names[r])){var o=t._column_names[r];if(0==o.length)return"";i="<ul>",o.forEach((function(t,n){i+="<li>"+t+a+e[r][n]+"</li>"})),i+="</ul>"}else i=e[r];return void 0!==i?i:""}));else{var c,f={};(e[t._title_key]||e[t._subtitle_key])&&(r+="<header>",e[t._title_key]&&(r+="<h1>"+e[t._title_key]+"</h1>",f[c=t._column_names[t._title_key]]=!0),e[t._subtitle_key]&&(r+="<h2>"+e[t._subtitle_key]+"</h2>",f[c=t._column_names[t._subtitle_key]]=!0),r+="</header>");var h="";for(var d in t._column_names)if(!(t._column_names_hidden.indexOf(d)>-1)&&d!=t._title_key&&d!=t._subtitle_key)if(Array.isArray(e[d]))for(var p=0;p<e[d].length;p++)f[c=t._column_names[d][p]]||(f[c]=!0,"table"==o?h+="<tr><td class='table-col-label'><span class='data-heading'>"+c+"</span></td><td class='table-col-value'>"+e[d][p]+"</td></tr>":"ul"==o&&(h+="<li><span class='data-heading'>"+c+s+" </span> "+u+e[d][p]+"</li>"));else{if(f[c=t._column_names[d]])continue;f[c]=!0,"table"==o?h+="<tr><td class='table-col-label'><span class='data-heading'>"+c+"</span></td><td class='table-col-value'>"+e[d]+"</td></tr>":"ul"==o&&(h+="<li><span class='data-heading'>"+c+s+" </span> "+u+e[d]+"</li>")}""!==h&&(r+="<div class='main-content'><"+o+">",r+=h,r+="</"+o+"></div></div>")}return r}function SV(t,e,n){var r;return Object.keys(t._column_names).some((function(i){if(Array.isArray(t._column_names[i])){var o=t._column_names[i].indexOf(e);if(o>=0)return r=n[i][o],!0}else if(t._column_names[i]==e)return r=n[i],!0})),void 0!==r?r:""}function CV(t,e,n,r){var i="",o=EV(e,t,r),a=EV(n,t,r);return o&&(i+="<header>"+o+"</header>"),a&&(i+="<div class='main-content'>"+a+"</div>"),i}function EV(t,e,n){var r=/\{\{#if ((?:[^}]|\}[^}])*)\}\}([\s\S]*?)\{\{\/if\}\}/g,i=/\{\{((?:[^}]|\}[^}])*)\}\}/g,o=/\{\{(visualisation|story)\/(.*)\}\}/g;return t.replace(r,(function(t,r,i){return""==SV(e,r,n)?"":i})).replace(o,(function(t,e,n){var r=n.split("/");if(r.length<1||!["visualisation","story"].includes(e))return t;var i={id:r[0],w:r[1]||"100%",h:r[2]||"400px%"},o="https://flo.uri.sh/"+e+"/"+i.id+"/embed?",a;return xm("iframe").attr("src",o).attr("title","Interactive or visual content").attr("class","flourish-embed-iframe").attr("frameborder","0").attr("scrolling","no").attr("sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation").style("width",i.width).style("height",i.height).node().outerHTML})).replace(i,(function(t,r){return SV(e,r,n)})).trim()}function zV(t,e,n){var r="";return n&&!t._state.popup_is_custom?r+="<div class='main-content'>"+t._state.popup_teaser_default+"</div>":n||t._state.popup_is_custom?r+=CV(t,t._state.popup_custom_header,t._state.popup_custom_main,e):r+=AV(t,e,"popup"),r}function TV(t,e){var n="";return t._state.panel_is_custom?n+=CV(t,t._state.panel_custom_header,t._state.panel_custom_main,e):n+=AV(t,e,"panel"),n}function NV(t){if(!document.querySelector("#popup-styles")){var e=document.createElement("style");e.id="popup-styles",document.head.appendChild(e)}var n=new Wb,r="block"==t._state.popup_header_type,i=Ps(t._state.popup_header_background||"transparent");i.opacity=t._state.popup_header_background?t._state.popup_background_opacity:0;var o=t._state.panel_position;n.select(".flourish-panel .flourish-panel-shadow").style("pointer-events","none").style("position","absolute").style("display","overlay"!=o&&t._state.panel_shadow?"block":"none").style("top","bottom"==o?"-3rem":"top"==o?"auto":0).style("right","left"==o?"-3rem":"right"==o?"auto":0).style("bottom","top"==o?"-3rem":"bottom"==o?"auto":0).style("left","right"==o?"-3rem":"left"==o?"auto":0).style("width","left"==o||"right"==o?"3rem":"100%").style("height","top"==o||"bottom"==o?"3rem":"100%").style("z-index","-1").style("overflow","hidden"),n.select(".flourish-panel .flourish-panel-shadow:before").style("content","''").style("display","block").style("position","absolute").style("width","left"==o||"right"==o?"1.5rem":"100%").style("height","top"==o||"bottom"==o?"1.5rem":"100%").style("border-radius","50%").style("background","rgba(0,0,0,0.3)").style("bottom","bottom"==o?"-50%":"top"==o?"auto":0).style("left","left"==o?"-50%":"right"==o?"auto":0).style("top","top"==o?"-50%":"bottom"==o?"auto":0).style("right","right"==o?"-50%":"left"==o?"auto":0).style("filter","blur(15px)"),n.select(".flourish-popup").style("pointer-events","none").select(".flourish-popup-content").style("pointer-events","auto").style("max-width",null==t._state.popup_width?null:t._state.popup_width+"rem !important"),n.select(".flourish-popup header, .flourish-panel header").style("margin","0"),n.select(".flourish-popup header").style("font-weight","bold").style("color",r?t._state.popup_header_text_color:null).style("background",r?i.rgb():null).style("padding",t._state.popup_padding+"rem").style("border-radius",t._state.popup_radius+"rem "+t._state.popup_radius+"rem 0 0");const a=undefined;n.select(".flourish-popup header:not(:last-child)").style("padding-bottom",r?null:"0"),n.select(".flourish-popup header:not(:last-child)").style("padding-bottom",r?null:"0"),n.select(".flourish-panel .flourish-panel-content-inner").style("overflow","auto"),n.select(".flourish-panel header").style("font-weight","bold").style("margin-bottom","0.5em").style("padding-right","1rem"),n.select(".flourish-popup .main-content").style("padding",t._state.popup_padding+"rem"),n.select(".flourish-popup header + .main-content").style("padding",t._state.popup_padding+"rem").style("padding-top",r?null:"0"),n.select(".flourish-popup h1, .flourish-panel h1").style("font-size","1em").style("margin","0"),n.select(".flourish-popup h1, .flourish-popup h2, .flourish-popup ul li").style("text-align",t._state.popup_align),n.select(".flourish-panel h1, .flourish-panel h2, .flourish-panel ul li").style("text-align",t._state.panel_align),n.select(".flourish-popup h2, .flourish-panel h2").style("font-size","1em").style("margin",r?"0":"0 0 0.25em").style("opacity","0.6").style("font-weight","normal"),n.select(".flourish-popup h2:empty, .flourish-panel h2:empty, .flourish-popup h1:empty, .flourish-panel h1:empty, .flourish-popup p:empty, .flourish-panel p:empty").style("display","none"),n.select(".flourish-popup p, .flourish-panel p").style("margin","0").style("font-size","inherit").style("font-weight","normal"),n.select(".flourish-popup table, .flourish-panel table").style("margin","0").style("width","100%").style("border-collapse","collapse").style("table-layout","auto"),n.select(".flourish-popup table tr, .flourish-panel table tr").style("border-top","1px solid #eee"),n.select(".flourish-popup table tr:first-child, .flourish-panel table tr:first-child").style("border-top","none"),n.select(".flourish-popup table tr td, .flourish-panel table tr td").style("padding","0.25em 0 0.25em 0").style("padding-inline-end","0.25em").style("vertical-align","top").style("font-size","inherit").style("text-align","start").style("font-weight","normal").style("overflow","hidden").style("word-break","break-word").style("text-overflow","ellipsis"),n.select(".flourish-popup table tr:last-child td, .flourish-panel table tr:last-child td").style("padding-bottom","0"),n.select(".flourish-popup .data-heading").style("font-weight",t._state.popup_list_label_weight).style("display","inline-block"),n.select(".flourish-panel .data-heading").style("font-weight",t._state.panel_list_label_weight).style("display","inline-block"),n.select(".flourish-popup table tr td.table-col-value, .flourish-panel table tr td.table-col-value").style("text-align","end").style("padding","0.25em 0 0.25em 0").style("padding-inline-end","0.25em"),n.select(".flourish-popup table tr:last-child td.table-col-value, .flourish-panel table tr:last-child td.table-col-value").style("padding-bottom","0"),n.select(".flourish-popup ul, .flourish-panel ul").style("padding","0").style("margin","0"),n.select(".flourish-popup ul li, .flourish-panel ul li").style("font-size","inherit").style("list-style","none"),document.head.querySelector("#popup-styles").innerHTML=n.print()}function jV(t){var e=t.popup._getElement(),n=e.querySelector(".flourish-popup-content");n.style.padding="0",n.style.textAlign=t._state.popup_align,n.style.color=t._state.popup_text_color,n.style.fontSize=t._state.popup_font_size+"rem",n.style.borderRadius=t._state.popup_radius+"rem",n.addEventListener("click",(function(){event.stopPropagation()}));var r=t.panel._getElement(),i=r.querySelector(".flourish-panel-inner"),o=r.querySelector(".flourish-panel-content"),a=Ps(t._state.panel_background);i.style.background="rgba("+a.r+","+a.g+","+a.b+","+t._state.panel_background_opacity+")",i.style.borderRadius=t._state.popup_radius+"rem",i.style.boxShadow="overlay"==t._state.panel_position&&t._state.panel_shadow?"0 0 1.5rem rgba(0,0,0,0.2)":"",i.addEventListener("click",(function(){event.stopPropagation()})),o.style.padding=t._state.panel_padding+"rem",o.style.textAlign=t._state.panel_align,o.style.color=t._state.panel_text_color,o.style.fontSize=t._state.panel_font_size+"rem",o.style.boxSizing="border-box";var l=e.querySelector(".flourish-popup-svg g");l.style.fill=t._state.popup_background,l.style.opacity=t._state.popup_background_opacity;var s=r.querySelector(".flourish-panel-close path");s&&(s.style.stroke=t._state.panel_text_color),0==t._state.popup_shadow?l.removeAttribute("filter"):l.setAttribute("filter","url(#dropshadow-"+t.popup.unique_id+")"),l.querySelector("rect").setAttribute("rx",t._state.popup_radius+"rem"),l.querySelector("path").style.display=t._state.popup_pointer?"block":"none",NV(t)}function LV(t,e,n){var r=this;for(var i in this._state=t,this._popup_default_template=null,this._panel_default_template=null,this._title_key="name",this._subtitle_key=null,this._first_load=!0,this._on_panel_close=null,this._show_default_content_timer=null,this._panel_container=e||document.body,this._popup_container=n||document.body,this._popup_directions=["top","bottom","left","right"],this._column_names=[],this._column_names_hidden=[],this._getLockedPosition=function(){return null},MV)null==t[i]&&(t[i]=MV[i]);this.panel=kV().container(this._panel_container).on("close",(function(){r._state.locked_id=null,r.popup.hide(),"function"==typeof r._on_panel_close&&r._on_panel_close()})),this.popup=RY().container(this._popup_container).point(0,0).draw().hide()}function PV(t){t.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents="none"}function OV(t){t.popup._getElement().querySelector(".flourish-popup-content").style.pointerEvents="auto"}function FV(t,e,n){return new LV(t,e,n)}LV.prototype.getLockedPosition=function(t){return"function"!=typeof t?console.error("Invalid function passed to @flourish/info-popup getLockedPosition"):this._getLockedPosition=t,this},LV.prototype.update=function(t){if(null!==this._state.locked_id&&"none"!=this._state.mode){var e=this._getLockedPosition(this._state.locked_id);e?this.click(e[0],e[1],this._state.locked_id,t):console.warn("@flourish/info-popup: failed to return value from getLockedPosition function")}else this.clickout()},LV.prototype.click=function(t,e,n,r){if("none"!=this._state.mode){var i="popup"==this._state.mode?"popup":"panel";this._checkIfPopupIsEmpty(e,i)?"panel"===i?this.hidePanel():this.hidePopup():(this._point(t),null!=n?(this._state.locked_id=n,OV(this)):this._state.locked_id=null,"panel"==i?(clearTimeout(this._show_default_content_timer),this.popup.hide(),this._drawPanel(e,r)):"popup"==i&&(this.panel.hide(),this._drawPopup(e,r)))}},LV.prototype.clickout=function(){this._state.locked_id=null,"both"!=this._state.mode&&"panel"!=this._state.mode||(this.popup.draw(),this.popup.hide(),"overlay"!=this._state.panel_position&&this._state.panel_side_fixed?this._showDefaultPanelContent():this.panel.hide()),"popup"==this._state.mode&&(this.panel.hide(),this.popup.draw(),this.popup.hide())},LV.prototype.touch=function(t,e,n,r){this.mouseover(t,e,r,!0,n)},LV.prototype.mouseover=function(t,e,n,r,i){var o="panel"==this._state.mode?"panel":"popup";if(this._checkIfPopupIsEmpty(e,o,"both"==this._state.mode))"panel"===o?this.hidePanel():this.hidePopup();else{var a=this,l;if("both"==this._state.mode)if(this._point(t),this._drawPopup(e,n,!0),r?OV(this):PV(this),r)a.popup._getElement().querySelector(".flourish-popup-content").onclick=function(){a.click(t,e,i,n)};if("popup"==this._state.mode){if(null!==this._state.locked_id)return;PV(this),this._point(t),this._drawPopup(e,n)}if("panel"==this._state.mode){if(null!==this._state.locked_id||"overlay"==this._state.panel_position)return;if(!this._state.panel_side_fixed)return;clearTimeout(this._show_default_content_timer),this._point(t),this._drawPanel(e,n)}}},LV.prototype.mouseout=function(){if("both"==this._state.mode&&this.popup.hide(),"popup"==this._state.mode){if(null!==this._state.locked_id)return;this.popup.hide()}if("panel"==this._state.mode){if(null!==this._state.locked_id)return;if("overlay"==this._state.panel_position||!this._state.panel_side_fixed)return;this._showDefaultPanelContent()}},LV.prototype.locked=function(){return this._state.locked_id},LV.prototype.mode=function(){return this._state.mode},LV.prototype.setColumnNames=function(t){return this._column_names=t,this},LV.prototype.hideColumnNames=function(t){return this._column_names_hidden=t,this},LV.prototype._showDefaultPanelContent=function(){var t=this;clearTimeout(this._show_default_content_timer),this._show_default_content_timer=setTimeout((function(){t.panel.html(t._state.panel_side_default_content),t._drawPanel()}),100),t._drawPanel()},LV.prototype._checkIfPopupIsEmpty=function(t,e,n){var r;return""==("panel"==e?TV(this,t):zV(this,t,n)).trim()},LV.prototype.onPanelClose=function(t){return this._on_panel_close=t,this},LV.prototype._drawPopup=function(t,e,n){return t&&this.popup.html(zV(this,t,n)),jV(this),this.popup.draw(),e&&e(this.popup._getElement(),t),this},LV.prototype._drawPanel=function(t,e){var n=this;return jV(n),this.panel.open_duration(this._state.panel_open_duration).close_duration(this._state.panel_close_duration).width_overlay(this._state.panel_width_overlay).height_overlay(this._state.panel_height_overlay).vertical_position(this._state.panel_vertical_position).width_side(this._state.panel_width_side).height_side(this._state.panel_height_side).position(this._state.panel_position).max_width(this._state.panel_max_width).max_height(this._state.panel_max_height).closeable("overlay"==this._state.panel_position||!this._state.panel_side_fixed),void 0===t?this.panel.draw():this.panel.html(TV(n,t)).draw(),e&&e(this.panel._getElement(),t),this},LV.prototype.hidePanel=function(){return this.panel.hide(),this},LV.prototype.hidePopup=function(){return this.popup.hide(),this},LV.prototype.popupDirections=function(t){return t?(this._popup_directions=t,this):this._popup_directions.slice()},LV.prototype.margins=function(){return this.panel.margins()},LV.prototype._getBiggestGap=function(t){var e=this._popup_container.getBoundingClientRect(),n,r=0,i,o={right:(e.width+e.left-(t.width+t.left))/e.width,bottom:(e.height+e.top-(t.height+t.top))/e.height,left:(t.left-e.left)/e.width,top:(t.top-e.top)/e.height},a={right:["left","leftFlexible","topLeft","bottomLeft","bottomFlexible","bottom","topFlexible","top","bottomRight","topRight","rightFlexible","right"],left:["right","rightFlexible","topRight","bottomRight","top","topFlexible","bottom","bottomFlexible","bottomLeft","topLeft","leftFlexible","left"],top:["bottom","bottomFlexible","bottomRight","bottomLeft","rightFlexible","leftFlexible","right","left","topRight","topLeft","topFlexible","top"],bottom:["top","topFlexible","topLeft","topRight","left","right","leftFlexible","rightFlexible","bottomLeft","bottomRight","bottomFlexible","bottom"]};for(var l in o)this._popup_directions.indexOf(l)<0||o[l]>r&&(r=o[l],n=l,i=a[l]);var s=t.left,u=t.top;return"left"==n||"right"==n?u+=.5*t.height:"bottom"==n&&(u+=t.height),"top"==n||"bottom"==n?s+=.5*t.width:"right"==n&&(s+=t.width),{side:n,arrow_directions:i,x:s,y:u}},LV.prototype._point=function(t){var e,n,r=this._popup_directions;if(Array.isArray(t))e=t[0],n=t[1];else{if(!t||!t.getBoundingClientRect)return console.warn("@flourish/info-popup: Invalid positional value passed in point function, should be a coordinates array, or a node. Current value is",t),this;var i=t.getBoundingClientRect(),o=this._getBiggestGap(i);e=o.x,n=o.y,r=o.arrow_directions}return this.panel.point(t),this.popup.directions(r).point(e,n),this},LV.prototype.popupDefaultTemplate=function(t){return null!=t?(this._popup_default_template=t,this):this._popup_default_template},LV.prototype.panelDefaultTemplate=function(t){return null!=t?(this._panel_default_template=t,this):this._panel_default_template},LV.prototype.titleKey=function(t){return null!=t?(this._title_key=t,this):this._title_key},LV.prototype.subtitleKey=function(t){return null!=t?(this._subtitle_key=t,this):this._subtitle_key};var DV="[object String]";function qV(t){return"string"==typeof t||!uf(t)&&Kc(t)&&Jc(t)==DV}function RV(t,e){return df(e,(function(e){return t[e]}))}function BV(t){return null==t?[]:RV(t,Dp(t))}var HV=Math.max;function IV(t,e,n,r){t=Fp(t)?t:BV(t),n=n&&!r?Cg(n):0;var i=t.length;return n<0&&(n=HV(i+n,0)),qV(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&xM(t,e,n)>-1}function UV(){im.preventDefault(),im.stopImmediatePropagation()}function YV(t){var e=t.document.documentElement,n=bm(t).on("dragstart.drag",UV,!0);"onselectstart"in e?n.on("selectstart.drag",UV,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function WV(t,e){var n=t.document.documentElement,r=bm(t).on("dragstart.drag",null);e&&(r.on("click.drag",UV,!0),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function VV(t){return function(){return t}}function ZV(t,e,n){this.target=t,this.type=e,this.transform=n}function XV(t,e,n){this.k=t,this.x=e,this.y=n}XV.prototype={constructor:XV,scale:function(t){return 1===t?this:new XV(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new XV(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var GV=new XV(1,0,0);function $V(){im.stopImmediatePropagation()}function QV(){im.preventDefault(),im.stopImmediatePropagation()}function JV(){return!im.ctrlKey&&!im.button}function KV(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function tZ(){return this.__zoom||GV}function eZ(){return-im.deltaY*(1===im.deltaMode?.05:im.deltaMode?1:.002)}function nZ(){return navigator.maxTouchPoints||"ontouchstart"in this}function rZ(t,e,n){var r=t.invertX(e[0][0])-n[0][0],i=t.invertX(e[1][0])-n[1][0],o=t.invertY(e[0][1])-n[0][1],a=t.invertY(e[1][1])-n[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}function iZ(){var t=JV,e=KV,n=rZ,r=eZ,i=nZ,o=[0,1/0],a=[[-1/0,-1/0],[1/0,1/0]],l=250,s=kw,u=HY("start","zoom","end"),c,f,h=500,d=150,p=0;function _(t){t.property("__zoom",tZ).on("wheel.zoom",w).on("mousedown.zoom",k).on("dblclick.zoom",M).filter(i).on("touchstart.zoom",A).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",C).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,e){return(e=Math.max(o[0],Math.min(o[1],e)))===t.k?t:new XV(e,t.x,t.y)}function y(t,e,n){var r=e[0]-n[0]*t.k,i=e[1]-n[1]*t.k;return r===t.x&&i===t.y?t:new XV(t.k,r,i)}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function v(t,n,r){t.on("start.zoom",(function(){b(this,arguments).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).end()})).tween("zoom",(function(){var t=this,i=arguments,o=b(t,i),a=e.apply(t,i),l=null==r?m(a):"function"==typeof r?r.apply(t,i):r,u=Math.max(a[1][0]-a[0][0],a[1][1]-a[0][1]),c=t.__zoom,f="function"==typeof n?n.apply(t,i):n,h=s(c.invert(l).concat(u/c.k),f.invert(l).concat(u/f.k));return function(t){if(1===t)t=f;else{var e=h(t),n=u/e[2];t=new XV(n,l[0]-e[0]*n,l[1]-e[1]*n)}o.zoom(null,t)}}))}function b(t,e,n){return!n&&t.__zooming||new x(t,e)}function x(t,n){this.that=t,this.args=n,this.active=0,this.extent=e.apply(t,n),this.taps=0}function w(){if(t.apply(this,arguments)){var e=b(this,arguments),i=this.__zoom,l=Math.max(o[0],Math.min(o[1],i.k*Math.pow(2,r.apply(this,arguments)))),s=Mm(this);if(e.wheel)e.mouse[0][0]===s[0]&&e.mouse[0][1]===s[1]||(e.mouse[1]=i.invert(e.mouse[0]=s)),clearTimeout(e.wheel);else{if(i.k===l)return;e.mouse=[s,i.invert(s)],aW(this),e.start()}QV(),e.wheel=setTimeout(u,d),e.zoom("mouse",n(y(g(i,l),e.mouse[0],e.mouse[1]),e.extent,a))}function u(){e.wheel=null,e.end()}}function k(){if(!f&&t.apply(this,arguments)){var e=b(this,arguments,!0),r=bm(im.view).on("mousemove.zoom",s,!0).on("mouseup.zoom",u,!0),i=Mm(this),o=im.clientX,l=im.clientY;YV(im.view),$V(),e.mouse=[i,this.__zoom.invert(i)],aW(this),e.start()}function s(){if(QV(),!e.moved){var t=im.clientX-o,r=im.clientY-l;e.moved=t*t+r*r>p}e.zoom("mouse",n(y(e.that.__zoom,e.mouse[0]=Mm(e.that),e.mouse[1]),e.extent,a))}function u(){r.on("mousemove.zoom mouseup.zoom",null),WV(im.view,e.moved),QV(),e.end()}}function M(){if(t.apply(this,arguments)){var r=this.__zoom,i=Mm(this),o=r.invert(i),s=r.k*(im.shiftKey?.5:2),u=n(y(g(r,s),i,o),e.apply(this,arguments),a);QV(),l>0?bm(this).transition().duration(l).call(v,u,i):bm(this).call(_.transform,u)}}function A(){if(t.apply(this,arguments)){var e=im.touches,n=e.length,r=b(this,arguments,im.changedTouches.length===n),i,o,a,l;for($V(),o=0;o<n;++o)l=[l=Sm(this,e,(a=e[o]).identifier),this.__zoom.invert(l),a.identifier],r.touch0?r.touch1||r.touch0[2]===l[2]||(r.touch1=l,r.taps=0):(r.touch0=l,i=!0,r.taps=1+!!c);c&&(c=clearTimeout(c)),i&&(r.taps<2&&(c=setTimeout((function(){c=null}),h)),aW(this),r.start())}}function S(){if(this.__zooming){var t=b(this,arguments),e=im.changedTouches,r=e.length,i,o,l,s;for(QV(),c&&(c=clearTimeout(c)),t.taps=0,i=0;i<r;++i)l=Sm(this,e,(o=e[i]).identifier),t.touch0&&t.touch0[2]===o.identifier?t.touch0[0]=l:t.touch1&&t.touch1[2]===o.identifier&&(t.touch1[0]=l);if(o=t.that.__zoom,t.touch1){var u=t.touch0[0],f=t.touch0[1],h=t.touch1[0],d=t.touch1[1],p=(p=h[0]-u[0])*p+(p=h[1]-u[1])*p,_=(_=d[0]-f[0])*_+(_=d[1]-f[1])*_;o=g(o,Math.sqrt(p/_)),l=[(u[0]+h[0])/2,(u[1]+h[1])/2],s=[(f[0]+d[0])/2,(f[1]+d[1])/2]}else{if(!t.touch0)return;l=t.touch0[0],s=t.touch0[1]}t.zoom("touch",n(y(o,l,s),t.extent,a))}}function C(){if(this.__zooming){var t=b(this,arguments),e=im.changedTouches,n=e.length,r,i;for($V(),f&&clearTimeout(f),f=setTimeout((function(){f=null}),h),r=0;r<n;++r)i=e[r],t.touch0&&t.touch0[2]===i.identifier?delete t.touch0:t.touch1&&t.touch1[2]===i.identifier&&delete t.touch1;if(t.touch1&&!t.touch0&&(t.touch0=t.touch1,delete t.touch1),t.touch0)t.touch0[1]=this.__zoom.invert(t.touch0[0]);else if(t.end(),2===t.taps){var o=bm(this).on("dblclick.zoom");o&&o.apply(this,arguments)}}}return _.transform=function(t,e,n){var r=t.selection?t.selection():t;r.property("__zoom",tZ),t!==r?v(t,e,n):r.interrupt().each((function(){b(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()}))},_.scaleBy=function(t,e,n){_.scaleTo(t,(function(){var t,n;return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)}),n)},_.scaleTo=function(t,r,i){_.transform(t,(function(){var t=e.apply(this,arguments),o=this.__zoom,l=null==i?m(t):"function"==typeof i?i.apply(this,arguments):i,s=o.invert(l),u="function"==typeof r?r.apply(this,arguments):r;return n(y(g(o,u),l,s),t,a)}),i)},_.translateBy=function(t,r,i){_.transform(t,(function(){return n(this.__zoom.translate("function"==typeof r?r.apply(this,arguments):r,"function"==typeof i?i.apply(this,arguments):i),e.apply(this,arguments),a)}))},_.translateTo=function(t,r,i,o){_.transform(t,(function(){var t=e.apply(this,arguments),l=this.__zoom,s=null==o?m(t):"function"==typeof o?o.apply(this,arguments):o;return n(GV.translate(s[0],s[1]).scale(l.k).translate("function"==typeof r?-r.apply(this,arguments):-r,"function"==typeof i?-i.apply(this,arguments):-i),t,a)}),o)},x.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){hm(new ZV(_,t,this.that.__zoom),u.apply,u,[t,this.that,this.args])}},_.wheelDelta=function(t){return arguments.length?(r="function"==typeof t?t:VV(+t),_):r},_.filter=function(e){return arguments.length?(t="function"==typeof e?e:VV(!!e),_):t},_.touchable=function(t){return arguments.length?(i="function"==typeof t?t:VV(!!t),_):i},_.extent=function(t){return arguments.length?(e="function"==typeof t?t:VV([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),_):e},_.scaleExtent=function(t){return arguments.length?(o[0]=+t[0],o[1]=+t[1],_):[o[0],o[1]]},_.translateExtent=function(t){return arguments.length?(a[0][0]=+t[0][0],a[1][0]=+t[1][0],a[0][1]=+t[0][1],a[1][1]=+t[1][1],_):[[a[0][0],a[0][1]],[a[1][0],a[1][1]]]},_.constrain=function(t){return arguments.length?(n=t,_):n},_.duration=function(t){return arguments.length?(l=+t,_):l},_.interpolate=function(t){return arguments.length?(s=t,_):s},_.on=function(){var t=u.on.apply(u,arguments);return t===u?_:t},_.clickDistance=function(t){return arguments.length?(p=(t=+t)*t,_):Math.sqrt(p)},_}XV.prototype;var oZ=null;function aZ(t){oZ=t}var lZ=t=>()=>t;function sZ(t,e){return function(n){return t+n*e}}function uZ(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function cZ(t){return 1==(t=+t)?fZ:function(e,n){return n-e?uZ(e,n,t):lZ(isNaN(e)?n:e)}}function fZ(t,e){var n=e-t;return n?sZ(t,n):lZ(isNaN(t)?e:t)}var hZ=function t(e){var n=cZ(e);function r(t,e){var r=n((t=qs(t)).r,(e=qs(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=fZ(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function dZ(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=t[i]*(1-o)+e[i]*o;return r}}function pZ(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function _Z(t,e){return(pZ(e)?dZ:gZ)(t,e)}function gZ(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=AZ(t[a],e[a]);for(;a<n;++a)o[a]=e[a];return function(t){for(a=0;a<r;++a)o[a]=i[a](t);return o}}function yZ(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function mZ(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function vZ(t,e){var n={},r={},i;for(i in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)i in t?n[i]=AZ(t[i],e[i]):r[i]=e[i];return function(t){for(i in n)r[i]=n[i](t);return r}}var bZ=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xZ=new RegExp(bZ.source,"g");function wZ(t){return function(){return t}}function kZ(t){return function(e){return t(e)+""}}function MZ(t,e){var n=bZ.lastIndex=xZ.lastIndex=0,r,i,o,a=-1,l=[],s=[];for(t+="",e+="";(r=bZ.exec(t))&&(i=xZ.exec(e));)(o=i.index)>n&&(o=e.slice(n,o),l[a]?l[a]+=o:l[++a]=o),(r=r[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:mZ(r,i)})),n=xZ.lastIndex;return n<e.length&&(o=e.slice(n),l[a]?l[a]+=o:l[++a]=o),l.length<2?s[0]?kZ(s[0].x):wZ(e):(e=s.length,function(t){for(var n=0,r;n<e;++n)l[(r=s[n]).i]=r.x(t);return l.join("")})}function AZ(t,e){var n=typeof e,r;return null==e||"boolean"===n?lZ(e):("number"===n?mZ:"string"===n?(r=Ps(e))?(e=r,hZ):MZ:e instanceof Ps?hZ:e instanceof Date?yZ:pZ(e)?dZ:Array.isArray(e)?gZ:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?vZ:mZ)(t,e)}function SZ(t){for(var e=-1,n=t.length,r,i=t[n-1],o=0;++e<n;)r=i,i=t[e],o+=r[1]*i[0]-r[0]*i[1];return o/2}function CZ(t){for(var e=-1,n=t.length,r=t[n-1],i,o,a=r[0],l=r[1],s=0;++e<n;)i=a,o=l,i-=a=(r=t[e])[0],o-=l=r[1],s+=Math.sqrt(i*i+o*o);return s}var EZ={},zZ;function TZ(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}function NZ(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function jZ(t,e){return TZ(t,e)<1e-9}function LZ(t,e,n){let r=t.map(((t,n)=>PZ(t,e[n])));return function(t){let e=r.map((e=>e(t)));return n?RZ(e):e}}function PZ(t,e){return function(n){return t.map(((t,r)=>t+n*(e[r]-t)))}}function OZ(t){return"number"==typeof t&&isFinite(t)}!function(t,e){!function(t,n){n(e)}(x,(function(t){var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/gi,r=function(t){var r=[];return t.replace(n,(function(t,n,i){var a=n.toLowerCase();for(i=o(i),"m"===a&&i.length>2&&(r.push([n].concat(i.splice(0,2))),a="l",n="m"===n?"l":"L");i.length>=0;){if(i.length===e[a])return i.unshift(n),r.push(i);if(i.length<e[a])throw new Error("malformed path data");r.push([n].concat(i.splice(0,e[a])))}})),r},i=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function o(t){var e=t.match(i);return e?e.map(Number):[]}var a=function(t,e,n,r,i,o,a,s){return new l(t,e,n,r,i,o,a,s)};function l(t,e,n,r,i,o,a,l){this.a={x:t,y:e},this.b={x:n,y:r},this.c={x:i,y:o},this.d={x:a,y:l},null!=a&&null!=l?(this.getArcLength=b,this.getPoint=h,this.getDerivative=u):(this.getArcLength=d,this.getPoint=f,this.getDerivative=s),this.init()}function s(t,e,n){return{x:2*(1-n)*(t[1]-t[0])+2*n*(t[2]-t[1]),y:2*(1-n)*(e[1]-e[0])+2*n*(e[2]-e[1])}}function u(t,e,n){var r;return f([3*(t[1]-t[0]),3*(t[2]-t[1]),3*(t[3]-t[2])],[3*(e[1]-e[0]),3*(e[2]-e[1]),3*(e[3]-e[2])],n)}function c(t,e,n,r,i){for(var o=1,a=t/e,l=(t-n(r,i,a))/e;o>.001;){var s=n(r,i,a+l),u=n(r,i,a-l),c=Math.abs(t-s)/e,f=Math.abs(t-u)/e;c<o?(o=c,a+=l):f<o?(o=f,a-=l):l/=2}return a}function f(t,e,n){var r,i;return{x:(1-n)*(1-n)*t[0]+2*(1-n)*n*t[1]+n*n*t[2],y:(1-n)*(1-n)*e[0]+2*(1-n)*n*e[1]+n*n*e[2]}}function h(t,e,n){var r,i;return{x:(1-n)*(1-n)*(1-n)*t[0]+3*(1-n)*(1-n)*n*t[1]+3*(1-n)*n*n*t[2]+n*n*n*t[3],y:(1-n)*(1-n)*(1-n)*e[0]+3*(1-n)*(1-n)*n*e[1]+3*(1-n)*n*n*e[2]+n*n*n*e[3]}}function d(t,e,n){void 0===n&&(n=1);var r=t[0]-2*t[1]+t[2],i=e[0]-2*e[1]+e[2],o=2*t[1]-2*t[0],a=2*e[1]-2*e[0],l=4*(r*r+i*i),s=4*(r*o+i*a),u=o*o+a*a;if(0===l)return n*Math.sqrt(Math.pow(t[2]-t[0],2)+Math.pow(e[2]-e[0],2));var c=s/(2*l),f,h=n+c,d=u/l-c*c;return Math.sqrt(l)/2*(h*Math.sqrt(h*h+d)-c*Math.sqrt(c*c+d)+d*Math.log(Math.abs((h+Math.sqrt(h*h+d))/(c+Math.sqrt(c*c+d)))))}l.prototype={constructor:l,init:function(){this.length=this.getArcLength([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y])},getTotalLength:function(){return this.length},getPointAtLength:function(t){var e=c(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]);return this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e)},getTangentAtLength:function(t){var e=c(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),n=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),r=Math.sqrt(n.x*n.x+n.y*n.y),i;return i=r>0?{x:n.x/r,y:n.y/r}:{x:0,y:0}},getPropertiesAtLength:function(t){var e=c(t,this.length,this.getArcLength,[this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y]),n=this.getDerivative([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e),r=Math.sqrt(n.x*n.x+n.y*n.y),i;i=r>0?{x:n.x/r,y:n.y/r}:{x:0,y:0};var o=this.getPoint([this.a.x,this.b.x,this.c.x,this.d.x],[this.a.y,this.b.y,this.c.y,this.d.y],e);return{x:o.x,y:o.y,tangentX:i.x,tangentY:i.y}}};var p=[[],[],[-.5773502691896257,.5773502691896257],[0,-.7745966692414834,.7745966692414834],[-.33998104358485626,.33998104358485626,-.8611363115940526,.8611363115940526],[0,-.5384693101056831,.5384693101056831,-.906179845938664,.906179845938664],[.6612093864662645,-.6612093864662645,-.2386191860831969,.2386191860831969,-.932469514203152,.932469514203152],[0,.4058451513773972,-.4058451513773972,-.7415311855993945,.7415311855993945,-.9491079123427585,.9491079123427585],[-.1834346424956498,.1834346424956498,-.525532409916329,.525532409916329,-.7966664774136267,.7966664774136267,-.9602898564975363,.9602898564975363],[0,-.8360311073266358,.8360311073266358,-.9681602395076261,.9681602395076261,-.3242534234038089,.3242534234038089,-.6133714327005904,.6133714327005904],[-.14887433898163122,.14887433898163122,-.4333953941292472,.4333953941292472,-.6794095682990244,.6794095682990244,-.8650633666889845,.8650633666889845,-.9739065285171717,.9739065285171717],[0,-.26954315595234496,.26954315595234496,-.5190961292068118,.5190961292068118,-.7301520055740494,.7301520055740494,-.8870625997680953,.8870625997680953,-.978228658146057,.978228658146057],[-.1252334085114689,.1252334085114689,-.3678314989981802,.3678314989981802,-.5873179542866175,.5873179542866175,-.7699026741943047,.7699026741943047,-.9041172563704749,.9041172563704749,-.9815606342467192,.9815606342467192],[0,-.2304583159551348,.2304583159551348,-.44849275103644687,.44849275103644687,-.6423493394403402,.6423493394403402,-.8015780907333099,.8015780907333099,-.9175983992229779,.9175983992229779,-.9841830547185881,.9841830547185881],[-.10805494870734367,.10805494870734367,-.31911236892788974,.31911236892788974,-.5152486363581541,.5152486363581541,-.6872929048116855,.6872929048116855,-.827201315069765,.827201315069765,-.9284348836635735,.9284348836635735,-.9862838086968123,.9862838086968123],[0,-.20119409399743451,.20119409399743451,-.3941513470775634,.3941513470775634,-.5709721726085388,.5709721726085388,-.7244177313601701,.7244177313601701,-.8482065834104272,.8482065834104272,-.937273392400706,.937273392400706,-.9879925180204854,.9879925180204854],[-.09501250983763744,.09501250983763744,-.2816035507792589,.2816035507792589,-.45801677765722737,.45801677765722737,-.6178762444026438,.6178762444026438,-.755404408355003,.755404408355003,-.8656312023878318,.8656312023878318,-.9445750230732326,.9445750230732326,-.9894009349916499,.9894009349916499],[0,-.17848418149584785,.17848418149584785,-.3512317634538763,.3512317634538763,-.5126905370864769,.5126905370864769,-.6576711592166907,.6576711592166907,-.7815140038968014,.7815140038968014,-.8802391537269859,.8802391537269859,-.9506755217687678,.9506755217687678,-.9905754753144174,.9905754753144174],[-.0847750130417353,.0847750130417353,-.2518862256915055,.2518862256915055,-.41175116146284263,.41175116146284263,-.5597708310739475,.5597708310739475,-.6916870430603532,.6916870430603532,-.8037049589725231,.8037049589725231,-.8926024664975557,.8926024664975557,-.9558239495713977,.9558239495713977,-.9915651684209309,.9915651684209309],[0,-.16035864564022537,.16035864564022537,-.31656409996362983,.31656409996362983,-.46457074137596094,.46457074137596094,-.600545304661681,.600545304661681,-.7209661773352294,.7209661773352294,-.8227146565371428,.8227146565371428,-.9031559036148179,.9031559036148179,-.96020815213483,.96020815213483,-.9924068438435844,.9924068438435844],[-.07652652113349734,.07652652113349734,-.22778585114164507,.22778585114164507,-.37370608871541955,.37370608871541955,-.5108670019508271,.5108670019508271,-.636053680726515,.636053680726515,-.7463319064601508,.7463319064601508,-.8391169718222188,.8391169718222188,-.912234428251326,.912234428251326,-.9639719272779138,.9639719272779138,-.9931285991850949,.9931285991850949],[0,-.1455618541608951,.1455618541608951,-.2880213168024011,.2880213168024011,-.4243421202074388,.4243421202074388,-.5516188358872198,.5516188358872198,-.6671388041974123,.6671388041974123,-.7684399634756779,.7684399634756779,-.8533633645833173,.8533633645833173,-.9200993341504008,.9200993341504008,-.9672268385663063,.9672268385663063,-.9937521706203895,.9937521706203895],[-.06973927331972223,.06973927331972223,-.20786042668822127,.20786042668822127,-.34193582089208424,.34193582089208424,-.469355837986757,.469355837986757,-.5876404035069116,.5876404035069116,-.6944872631866827,.6944872631866827,-.7878168059792081,.7878168059792081,-.8658125777203002,.8658125777203002,-.926956772187174,.926956772187174,-.9700604978354287,.9700604978354287,-.9942945854823992,.9942945854823992],[0,-.1332568242984661,.1332568242984661,-.26413568097034495,.26413568097034495,-.3903010380302908,.3903010380302908,-.5095014778460075,.5095014778460075,-.6196098757636461,.6196098757636461,-.7186613631319502,.7186613631319502,-.8048884016188399,.8048884016188399,-.8767523582704416,.8767523582704416,-.9329710868260161,.9329710868260161,-.9725424712181152,.9725424712181152,-.9947693349975522,.9947693349975522],[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213]],_=[[],[],[1,1],[.8888888888888888,.5555555555555556,.5555555555555556],[.6521451548625461,.6521451548625461,.34785484513745385,.34785484513745385],[.5688888888888889,.47862867049936647,.47862867049936647,.23692688505618908,.23692688505618908],[.3607615730481386,.3607615730481386,.46791393457269104,.46791393457269104,.17132449237917036,.17132449237917036],[.4179591836734694,.3818300505051189,.3818300505051189,.27970539148927664,.27970539148927664,.1294849661688697,.1294849661688697],[.362683783378362,.362683783378362,.31370664587788727,.31370664587788727,.22238103445337448,.22238103445337448,.10122853629037626,.10122853629037626],[.3302393550012598,.1806481606948574,.1806481606948574,.08127438836157441,.08127438836157441,.31234707704000286,.31234707704000286,.26061069640293544,.26061069640293544],[.29552422471475287,.29552422471475287,.26926671930999635,.26926671930999635,.21908636251598204,.21908636251598204,.1494513491505806,.1494513491505806,.06667134430868814,.06667134430868814],[.2729250867779006,.26280454451024665,.26280454451024665,.23319376459199048,.23319376459199048,.18629021092773426,.18629021092773426,.1255803694649046,.1255803694649046,.05566856711617366,.05566856711617366],[.24914704581340277,.24914704581340277,.2334925365383548,.2334925365383548,.20316742672306592,.20316742672306592,.16007832854334622,.16007832854334622,.10693932599531843,.10693932599531843,.04717533638651183,.04717533638651183],[.2325515532308739,.22628318026289723,.22628318026289723,.2078160475368885,.2078160475368885,.17814598076194574,.17814598076194574,.13887351021978725,.13887351021978725,.09212149983772845,.09212149983772845,.04048400476531588,.04048400476531588],[.2152638534631578,.2152638534631578,.2051984637212956,.2051984637212956,.18553839747793782,.18553839747793782,.15720316715819355,.15720316715819355,.12151857068790319,.12151857068790319,.08015808715976021,.08015808715976021,.03511946033175186,.03511946033175186],[.2025782419255613,.19843148532711158,.19843148532711158,.1861610000155622,.1861610000155622,.16626920581699392,.16626920581699392,.13957067792615432,.13957067792615432,.10715922046717194,.10715922046717194,.07036604748810812,.07036604748810812,.03075324199611727,.03075324199611727],[.1894506104550685,.1894506104550685,.18260341504492358,.18260341504492358,.16915651939500254,.16915651939500254,.14959598881657674,.14959598881657674,.12462897125553388,.12462897125553388,.09515851168249279,.09515851168249279,.062253523938647894,.062253523938647894,.027152459411754096,.027152459411754096],[.17944647035620653,.17656270536699264,.17656270536699264,.16800410215645004,.16800410215645004,.15404576107681028,.15404576107681028,.13513636846852548,.13513636846852548,.11188384719340397,.11188384719340397,.08503614831717918,.08503614831717918,.0554595293739872,.0554595293739872,.02414830286854793,.02414830286854793],[.1691423829631436,.1691423829631436,.16427648374583273,.16427648374583273,.15468467512626524,.15468467512626524,.14064291467065065,.14064291467065065,.12255520671147846,.12255520671147846,.10094204410628717,.10094204410628717,.07642573025488905,.07642573025488905,.0497145488949698,.0497145488949698,.02161601352648331,.02161601352648331],[.1610544498487837,.15896884339395434,.15896884339395434,.15276604206585967,.15276604206585967,.1426067021736066,.1426067021736066,.12875396253933621,.12875396253933621,.11156664554733399,.11156664554733399,.09149002162245,.09149002162245,.06904454273764123,.06904454273764123,.0448142267656996,.0448142267656996,.019461788229726478,.019461788229726478],[.15275338713072584,.15275338713072584,.14917298647260374,.14917298647260374,.14209610931838204,.14209610931838204,.13168863844917664,.13168863844917664,.11819453196151841,.11819453196151841,.10193011981724044,.10193011981724044,.08327674157670475,.08327674157670475,.06267204833410907,.06267204833410907,.04060142980038694,.04060142980038694,.017614007139152118,.017614007139152118],[.14608113364969041,.14452440398997005,.14452440398997005,.13988739479107315,.13988739479107315,.13226893863333747,.13226893863333747,.12183141605372853,.12183141605372853,.10879729916714838,.10879729916714838,.09344442345603386,.09344442345603386,.0761001136283793,.0761001136283793,.057134425426857205,.057134425426857205,.036953789770852494,.036953789770852494,.016017228257774335,.016017228257774335],[.13925187285563198,.13925187285563198,.13654149834601517,.13654149834601517,.13117350478706238,.13117350478706238,.12325237681051242,.12325237681051242,.11293229608053922,.11293229608053922,.10041414444288096,.10041414444288096,.08594160621706773,.08594160621706773,.06979646842452049,.06979646842452049,.052293335152683286,.052293335152683286,.03377490158481415,.03377490158481415,.0146279952982722,.0146279952982722],[.13365457218610619,.1324620394046966,.1324620394046966,.12890572218808216,.12890572218808216,.12304908430672953,.12304908430672953,.11499664022241136,.11499664022241136,.10489209146454141,.10489209146454141,.09291576606003515,.09291576606003515,.07928141177671895,.07928141177671895,.06423242140852585,.06423242140852585,.04803767173108467,.04803767173108467,.030988005856979445,.030988005856979445,.013411859487141771,.013411859487141771],[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872]],g=[[1],[1,1],[1,2,1],[1,3,3,1]];function y(t,e){return g[t][e]}function m(t,e,n){var r=n.length-1,i,o,a;if(0===r)return 0;if(0===t){for(o=0,a=0;a<=r;a++)o+=y(r,a)*Math.pow(1-e,r-a)*Math.pow(e,a)*n[a];return o}for(i=new Array(r),a=0;a<r;a++)i[a]=r*(n[a+1]-n[a]);return m(t-1,e,i)}function v(t,e,n){var r=m(1,n,t),i=m(1,n,e),o=r*r+i*i;return Math.sqrt(o)}function b(t,e,n){var r,i,o,a;void 0===n&&(n=1);var l=20;for(r=n/2,i=0,o=0;o<l;o++)a=r*p[l][o]+r,i+=_[l][o]*v(t,e,a);return r*i}var x=2*Math.PI;function w(t,e,n,r){var i,o=t*n+e*r;return o>1&&(o=1),o<-1&&(o=-1),(t*r-e*n<0?-1:1)*Math.acos(o)}function k(t,e,n,r,i,o,a,l,s,u){var c=u*(t-n)/2+s*(e-r)/2,f=-s*(t-n)/2+u*(e-r)/2,h=a*a,d=l*l,p=c*c,_=f*f,g=h*d-h*_-d*p;g<0&&(g=0),g/=h*_+d*p;var y=(g=Math.sqrt(g)*(i===o?-1:1))*a/l*f,m=g*-l/a*c,v=u*y-s*m+(t+n)/2,b=s*y+u*m+(e+r)/2,k=(c-y)/a,M=(f-m)/l,A=(-c-y)/a,S=(-f-m)/l,C=w(1,0,k,M),E=w(k,M,A,S);return 0===o&&E>0&&(E-=x),1===o&&E<0&&(E+=x),[v,b,C,E]}function M(t,e){var n=4/3*Math.tan(e/4),r=Math.cos(t),i=Math.sin(t),o=Math.cos(t+e),a=Math.sin(t+e);return[r,i,r-i*n,i+r*n,o+a*n,a-o*n,o,a]}var A=function(t,e,n,r,i,o,a,l,s){var u=Math.sin(i*x/360),c=Math.cos(i*x/360),f=c*(t-l)/2+u*(e-s)/2,h=-u*(t-l)/2+c*(e-s)/2;if(0===f&&0===h)return[];if(0===n||0===r)return[];n=Math.abs(n),r=Math.abs(r);var d=f*f/(n*n)+h*h/(r*r);d>1&&(n*=Math.sqrt(d),r*=Math.sqrt(d));var p=k(t,e,l,s,o,a,n,r,u,c),_=[],g=p[2],y=p[3],m=Math.max(Math.ceil(Math.abs(y)/(x/4)),1);y/=m;for(var v=0;v<m;v++)_.push(M(g,y)),g+=y;return _.map((function(t){for(var e=0;e<t.length;e+=2){var i=t[e+0],o=t[e+1],a=c*(i*=n)-u*(o*=r),l=u*i+c*o;t[e+0]=a+p[0],t[e+1]=l+p[1]}return t}))},S=function(t,e,n,r,i,o,a,l,s){return new C(t,e,n,r,i,o,a,l,s)};function C(t,e,n,r,i,o,l,s,u){var c=0,f=[],h=[],d;A(t,e,n,r,i,o,l,s,u).forEach((function(t){var e=new a(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]),n=e.getTotalLength();c+=n,f.push(n),h.push(e)})),this.length=c,this.partialLengths=f,this.curves=h}C.prototype={constructor:C,init:function(){},getTotalLength:function(){return this.length},getPointAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var n=0,r=0;r<e;r++)n+=this.partialLengths[r];return this.curves[e].getPointAtLength(t-n)},getTangentAtLength:function(t){t<0?t=0:t>this.length&&(t=this.length);for(var e=this.partialLengths.length-1;this.partialLengths[e]>=t&&this.partialLengths[e]>0;)e--;e<this.partialLengths.length-1&&e++;for(var n=0,r=0;r<e;r++)n+=this.partialLengths[r];return this.curves[e].getTangentAtLength(t-n)},getPropertiesAtLength:function(t){var e=this.getTangentAtLength(t),n=this.getPointAtLength(t);return{x:n.x,y:n.y,tangentX:e.x,tangentY:e.y}}};var E=function(t,e,n,r){return new z(t,e,n,r)};function z(t,e,n,r){this.x0=t,this.x1=e,this.y0=n,this.y1=r}z.prototype.getTotalLength=function(){return Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2))},z.prototype.getPointAtLength=function(t){var e=t/Math.sqrt(Math.pow(this.x0-this.x1,2)+Math.pow(this.y0-this.y1,2)),n=(this.x1-this.x0)*e,r=(this.y1-this.y0)*e;return{x:this.x0+n,y:this.y0+r}},z.prototype.getTangentAtLength=function(){var t=Math.sqrt((this.x1-this.x0)*(this.x1-this.x0)+(this.y1-this.y0)*(this.y1-this.y0));return{x:(this.x1-this.x0)/t,y:(this.y1-this.y0)/t}},z.prototype.getPropertiesAtLength=function(t){var e=this.getPointAtLength(t),n=this.getTangentAtLength();return{x:e.x,y:e.y,tangentX:n.x,tangentY:n.y}};var T=function(t){var e=0,n=[],i=[];function o(t){if(!t)return null;for(var l=r(t),s=[0,0],u=[0,0],c,f,h=0;h<l.length;h++)"M"===l[h][0]?(f=[(s=[l[h][1],l[h][2]])[0],s[1]],i.push(null)):"m"===l[h][0]?(f=[(s=[l[h][1]+s[0],l[h][2]+s[1]])[0],s[1]],i.push(null)):"L"===l[h][0]?(e+=Math.sqrt(Math.pow(s[0]-l[h][1],2)+Math.pow(s[1]-l[h][2],2)),i.push(new E(s[0],l[h][1],s[1],l[h][2])),s=[l[h][1],l[h][2]]):"l"===l[h][0]?(e+=Math.sqrt(Math.pow(l[h][1],2)+Math.pow(l[h][2],2)),i.push(new E(s[0],l[h][1]+s[0],s[1],l[h][2]+s[1])),s=[l[h][1]+s[0],l[h][2]+s[1]]):"H"===l[h][0]?(e+=Math.abs(s[0]-l[h][1]),i.push(new E(s[0],l[h][1],s[1],s[1])),s[0]=l[h][1]):"h"===l[h][0]?(e+=Math.abs(l[h][1]),i.push(new E(s[0],s[0]+l[h][1],s[1],s[1])),s[0]=l[h][1]+s[0]):"V"===l[h][0]?(e+=Math.abs(s[1]-l[h][1]),i.push(new E(s[0],s[0],s[1],l[h][1])),s[1]=l[h][1]):"v"===l[h][0]?(e+=Math.abs(l[h][1]),i.push(new E(s[0],s[0],s[1],s[1]+l[h][1])),s[1]=l[h][1]+s[1]):"z"===l[h][0]||"Z"===l[h][0]?(e+=Math.sqrt(Math.pow(f[0]-s[0],2)+Math.pow(f[1]-s[1],2)),i.push(new E(s[0],f[0],s[1],f[1])),s=[f[0],f[1]]):"C"===l[h][0]?(c=new a(s[0],s[1],l[h][1],l[h][2],l[h][3],l[h][4],l[h][5],l[h][6]),e+=c.getTotalLength(),s=[l[h][5],l[h][6]],i.push(c)):"c"===l[h][0]?(c=new a(s[0],s[1],s[0]+l[h][1],s[1]+l[h][2],s[0]+l[h][3],s[1]+l[h][4],s[0]+l[h][5],s[1]+l[h][6]),e+=c.getTotalLength(),s=[l[h][5]+s[0],l[h][6]+s[1]],i.push(c)):"S"===l[h][0]?(c=h>0&&["C","c","S","s"].indexOf(l[h-1][0])>-1?new a(s[0],s[1],2*s[0]-l[h-1][l[h-1].length-4],2*s[1]-l[h-1][l[h-1].length-3],l[h][1],l[h][2],l[h][3],l[h][4]):new a(s[0],s[1],s[0],s[1],l[h][1],l[h][2],l[h][3],l[h][4]),e+=c.getTotalLength(),s=[l[h][3],l[h][4]],i.push(c)):"s"===l[h][0]?(c=h>0&&["C","c","S","s"].indexOf(l[h-1][0])>-1?new a(s[0],s[1],s[0]+c.d.x-c.c.x,s[1]+c.d.y-c.c.y,s[0]+l[h][1],s[1]+l[h][2],s[0]+l[h][3],s[1]+l[h][4]):new a(s[0],s[1],s[0],s[1],s[0]+l[h][1],s[1]+l[h][2],s[0]+l[h][3],s[1]+l[h][4]),e+=c.getTotalLength(),s=[l[h][3]+s[0],l[h][4]+s[1]],i.push(c)):"Q"===l[h][0]?(c=s[0]!=l[h][1]&&s[1]!=l[h][2]?new a(s[0],s[1],l[h][1],l[h][2],l[h][3],l[h][4]):new E(l[h][1],l[h][3],l[h][2],l[h][4]),e+=c.getTotalLength(),i.push(c),s=[l[h][3],l[h][4]],u=[l[h][1],l[h][2]]):"q"===l[h][0]?(c=0!=l[h][1]||0!=l[h][2]?new a(s[0],s[1],s[0]+l[h][1],s[1]+l[h][2],s[0]+l[h][3],s[1]+l[h][4]):new E(s[0]+l[h][1],s[0]+l[h][3],s[1]+l[h][2],s[1]+l[h][4]),e+=c.getTotalLength(),u=[s[0]+l[h][1],s[1]+l[h][2]],s=[l[h][3]+s[0],l[h][4]+s[1]],i.push(c)):"T"===l[h][0]?(c=h>0&&["Q","q","T","t"].indexOf(l[h-1][0])>-1?new a(s[0],s[1],2*s[0]-u[0],2*s[1]-u[1],l[h][1],l[h][2]):new E(s[0],l[h][1],s[1],l[h][2]),i.push(c),e+=c.getTotalLength(),u=[2*s[0]-u[0],2*s[1]-u[1]],s=[l[h][1],l[h][2]]):"t"===l[h][0]?(c=h>0&&["Q","q","T","t"].indexOf(l[h-1][0])>-1?new a(s[0],s[1],2*s[0]-u[0],2*s[1]-u[1],s[0]+l[h][1],s[1]+l[h][2]):new E(s[0],s[0]+l[h][1],s[1],s[1]+l[h][2]),e+=c.getTotalLength(),u=[2*s[0]-u[0],2*s[1]-u[1]],s=[l[h][1]+s[0],l[h][2]+s[0]],i.push(c)):"A"===l[h][0]?(c=new S(s[0],s[1],l[h][1],l[h][2],l[h][3],l[h][4],l[h][5],l[h][6],l[h][7]),e+=c.getTotalLength(),s=[l[h][6],l[h][7]],i.push(c)):"a"===l[h][0]&&(c=new S(s[0],s[1],l[h][1],l[h][2],l[h][3],l[h][4],l[h][5],s[0]+l[h][6],s[1]+l[h][7]),e+=c.getTotalLength(),s=[s[0]+l[h][6],s[1]+l[h][7]],i.push(c)),n.push(e);return o}o.getTotalLength=function(){return e},o.getPointAtLength=function(t){var e=l(t);return i[e.i].getPointAtLength(e.fraction)},o.getTangentAtLength=function(t){var e=l(t);return i[e.i].getTangentAtLength(e.fraction)},o.getPropertiesAtLength=function(t){var e=l(t);return i[e.i].getPropertiesAtLength(e.fraction)};var l=function(t){t<0?t=0:t>e&&(t=e);for(var r=n.length-1;n[r]>=t&&n[r]>0;)r--;return r++,{fraction:t-n[r-1],i:r}};return o(t)};t.svgPathProperties=T,t.parse=r,t.Bezier=a,Object.defineProperty(t,"__esModule",{value:!0})}))}({get exports(){return EZ},set exports(t){EZ=t}},EZ);const FZ='All shapes must be supplied as arrays of [x, y] points or an SVG path string (https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/d).\nExample valid ways of supplying a shape would be:\n[[0, 0], [10, 0], [10, 10]]\n"M0,0 L10,0 L10,10Z"\n';function DZ(t){return new HI(t).abs()}function qZ(t){return t.toString().split("M").map(((t,e)=>(t=t.trim(),e&&t?"M"+t:t))).filter((t=>t))}function RZ(t){return"M"+t.join("L")+"Z"}function BZ(t){return qZ(DZ(t))}function HZ(t,e){let n=DZ(t);return IZ(n)||UZ(n,e)}function IZ(t){let e=t.segments||[],n=[];if(!e.length||"M"!==e[0][0])return!1;for(let t=0;t<e.length;t++){let[r,i,o]=e[t];if("M"===r&&t||"Z"===r)break;if("M"===r||"L"===r)n.push([i,o]);else if("H"===r)n.push([i,n[n.length-1][1]]);else{if("V"!==r)return!1;n.push([n[n.length-1][0],i])}}return!!n.length&&{ring:n}}function UZ(t,e){let n=qZ(t)[0],r=[],i,o,a=3;if(!n)throw new TypeError(FZ);o=YZ(n),i=o.getTotalLength(),e&&OZ(e)&&e>0&&(a=Math.max(a,Math.ceil(i/e)));for(let t=0;t<a;t++){let e=o.getPointAtLength(i*t/a);r.push([e.x,e.y])}return{ring:r,skipBisect:!0}}function YZ(t){if("undefined"!=typeof window&&window&&window.document)try{let e=window.document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttributeNS(null,"d",t),e}catch(t){}return EZ.svgPathProperties(t)}function WZ(t,e){const n=t.length+e,r=CZ(t)/e;let i=0,o=0,a=r/2;for(;t.length<n;){let e=t[i],n=t[(i+1)%t.length],l=TZ(e,n);a<=o+l?(t.splice(i+1,0,l?NZ(e,n,(a-o)/l):e.slice(0)),a+=r):(o+=l,i++)}}function VZ(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0;for(let n=0;n<t.length;n++){let r=t[n],i=n===t.length-1?t[0]:t[n+1];for(;TZ(r,i)>e;)i=NZ(r,i,.5),t.splice(n+1,0,i)}}function ZZ(t,e){let n,r,i;if("string"==typeof t){let n=HZ(t,e);t=n.ring,i=n.skipBisect}else if(!Array.isArray(t))throw new TypeError(FZ);if(n=t.slice(0),!XZ(n))throw new TypeError(FZ);return n.length>1&&jZ(n[0],n[n.length-1])&&n.pop(),r=SZ(n),r>0&&n.reverse(),!i&&e&&OZ(e)&&e>0&&VZ(n,e),n}function XZ(t){return t.every((function(t){return Array.isArray(t)&&t.length>=2&&OZ(t[0])&&OZ(t[1])}))}function GZ(t,e){let n=t.length,r=1/0,i,o,a;for(let a=0;a<n;a++)o=0,e.forEach((function(e,r){let i=TZ(t[(a+r)%n],e);o+=i*i})),o<r&&(r=o,i=a);i&&(a=t.splice(0,i),t.splice(t.length,0,...a))}function $Z(t,e){let{maxSegmentLength:n=10,string:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i,o,a=QZ(ZZ(t,n),ZZ(e,n),r);return!r||"string"!=typeof t&&"string"!=typeof e?a:n=>n<1e-4&&"string"==typeof t?t:1-n<1e-4&&"string"==typeof e?e:a(n)}function QZ(t,e,n){let r;return r=t.length-e.length,WZ(t,r<0?-1*r:0),WZ(e,r>0?r:0),GZ(t,e),LZ(t,e,n)}var JZ={},KZ;function tX(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,o=eX(t,0,i,n,!0),a=[],l,s,u,c,f,h,d;if(!o||o.next===o.prev)return a;if(r&&(o=sX(t,e,o,n)),t.length>80*n){l=u=t[0],s=c=t[1];for(var p=n;p<i;p+=n)(f=t[p])<l&&(l=f),(h=t[p+1])<s&&(s=h),f>u&&(u=f),h>c&&(c=h);d=0!==(d=Math.max(u-l,c-s))?32767/d:0}return rX(o,a,n,l,s,d,0),a}function eX(t,e,n,r,i){var o,a;if(i===NX(t,e,n,r)>0)for(o=e;o<n;o+=r)a=EX(o,t[o],t[o+1],a);else for(o=n-r;o>=e;o-=r)a=EX(o,t[o],t[o+1],a);return a&&bX(a,a.next)&&(zX(a),a=a.next),a}function nX(t,e){if(!t)return t;e||(e=t);var n=t,r;do{if(r=!1,n.steiner||!bX(n,n.next)&&0!==vX(n.prev,n,n.next))n=n.next;else{if(zX(n),(n=e=n.prev)===n.next)break;r=!0}}while(r||n!==e);return e}function rX(t,e,n,r,i,o,a){if(t){!a&&o&&dX(t,r,i,o);for(var l=t,s,u;t.prev!==t.next;)if(s=t.prev,u=t.next,o?oX(t,r,i,o):iX(t))e.push(s.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),zX(t),t=u.next,l=u.next;else if((t=u)===l){a?1===a?rX(t=aX(nX(t),e,n),e,n,r,i,o,2):2===a&&lX(t,e,n,r,i,o):rX(nX(t),e,n,r,i,o,1);break}}}function iX(t){var e=t.prev,n=t,r=t.next;if(vX(e,n,r)>=0)return!1;for(var i=e.x,o=n.x,a=r.x,l=e.y,s=n.y,u=r.y,c=i<o?i<a?i:a:o<a?o:a,f=l<s?l<u?l:u:s<u?s:u,h=i>o?i>a?i:a:o>a?o:a,d=l>s?l>u?l:u:s>u?s:u,p=r.next;p!==e;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&yX(i,l,o,s,a,u,p.x,p.y)&&vX(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function oX(t,e,n,r){var i=t.prev,o=t,a=t.next;if(vX(i,o,a)>=0)return!1;for(var l=i.x,s=o.x,u=a.x,c=i.y,f=o.y,h=a.y,d=l<s?l<u?l:u:s<u?s:u,p=c<f?c<h?c:h:f<h?f:h,_=l>s?l>u?l:u:s>u?s:u,g=c>f?c>h?c:h:f>h?f:h,y=_X(d,p,e,n,r),m=_X(_,g,e,n,r),v=t.prevZ,b=t.nextZ;v&&v.z>=y&&b&&b.z<=m;){if(v.x>=d&&v.x<=_&&v.y>=p&&v.y<=g&&v!==i&&v!==a&&yX(l,c,s,f,u,h,v.x,v.y)&&vX(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,b.x>=d&&b.x<=_&&b.y>=p&&b.y<=g&&b!==i&&b!==a&&yX(l,c,s,f,u,h,b.x,b.y)&&vX(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;v&&v.z>=y;){if(v.x>=d&&v.x<=_&&v.y>=p&&v.y<=g&&v!==i&&v!==a&&yX(l,c,s,f,u,h,v.x,v.y)&&vX(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;b&&b.z<=m;){if(b.x>=d&&b.x<=_&&b.y>=p&&b.y<=g&&b!==i&&b!==a&&yX(l,c,s,f,u,h,b.x,b.y)&&vX(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function aX(t,e,n){var r=t;do{var i=r.prev,o=r.next.next;!bX(i,o)&&xX(i,r,r.next,o)&&AX(i,o)&&AX(o,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(o.i/n|0),zX(r),zX(r.next),r=t=o),r=r.next}while(r!==t);return nX(r)}function lX(t,e,n,r,i,o){var a=t;do{for(var l=a.next.next;l!==a.prev;){if(a.i!==l.i&&mX(a,l)){var s=CX(a,l);return a=nX(a,a.next),s=nX(s,s.next),rX(a,e,n,r,i,o,0),void rX(s,e,n,r,i,o,0)}l=l.next}a=a.next}while(a!==t)}function sX(t,e,n,r){var i=[],o,a,l,s,u;for(o=0,a=e.length;o<a;o++)(u=eX(t,l=e[o]*r,s=o<a-1?e[o+1]*r:t.length,r,!1))===u.next&&(u.steiner=!0),i.push(gX(u));for(i.sort(uX),o=0;o<i.length;o++)n=cX(i[o],n);return n}function uX(t,e){return t.x-e.x}function cX(t,e){var n=fX(t,e);if(!n)return e;var r=CX(n,t);return nX(r,r.next),nX(n,n.next)}function fX(t,e){var n=e,r=t.x,i=t.y,o=-1/0,a;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var l=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(l<=r&&l>o&&(o=l,a=n.x<n.next.x?n:n.next,l===r))return a}n=n.next}while(n!==e);if(!a)return null;var s=a,u=a.x,c=a.y,f=1/0,h;n=a;do{r>=n.x&&n.x>=u&&r!==n.x&&yX(i<c?r:o,i,u,c,i<c?o:r,i,n.x,n.y)&&(h=Math.abs(i-n.y)/(r-n.x),AX(n,t)&&(h<f||h===f&&(n.x>a.x||n.x===a.x&&hX(a,n)))&&(a=n,f=h)),n=n.next}while(n!==s);return a}function hX(t,e){return vX(t.prev,t,e.prev)<0&&vX(e.next,t,t.next)<0}function dX(t,e,n,r){var i=t;do{0===i.z&&(i.z=_X(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,pX(i)}function pX(t){var e,n,r,i,o,a,l,s,u=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,r=n,l=0,e=0;e<u&&(l++,r=r.nextZ);e++);for(s=u;l>0||s>0&&r;)0!==l&&(0===s||!r||n.z<=r.z)?(i=n,n=n.nextZ,l--):(i=r,r=r.nextZ,s--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1);return t}function _X(t,e,n,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function gX(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function yX(t,e,n,r,i,o,a,l){return(i-a)*(e-l)>=(t-a)*(o-l)&&(t-a)*(r-l)>=(n-a)*(e-l)&&(n-a)*(o-l)>=(i-a)*(r-l)}function mX(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!MX(t,e)&&(AX(t,e)&&AX(e,t)&&SX(t,e)&&(vX(t.prev,t,e.prev)||vX(t,e.prev,e))||bX(t,e)&&vX(t.prev,t,t.next)>0&&vX(e.prev,e,e.next)>0)}function vX(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function bX(t,e){return t.x===e.x&&t.y===e.y}function xX(t,e,n,r){var i=kX(vX(t,e,n)),o=kX(vX(t,e,r)),a=kX(vX(n,r,t)),l=kX(vX(n,r,e));return i!==o&&a!==l||(!(0!==i||!wX(t,n,e))||(!(0!==o||!wX(t,r,e))||(!(0!==a||!wX(n,t,r))||!(0!==l||!wX(n,e,r)))))}function wX(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function kX(t){return t>0?1:t<0?-1:0}function MX(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&xX(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function AX(t,e){return vX(t.prev,t,t.next)<0?vX(t,e,t.next)>=0&&vX(t,t.prev,e)>=0:vX(t,e,t.prev)<0||vX(t,t.next,e)<0}function SX(t,e){var n=t,r=!1,i=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}function CX(t,e){var n=new TX(t.i,t.x,t.y),r=new TX(e.i,e.x,e.y),i=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function EX(t,e,n,r){var i=new TX(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function zX(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function TX(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function NX(t,e,n,r){for(var i=0,o=e,a=n-r;o<n;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}({get exports(){return JZ},set exports(t){JZ=t}}).exports=tX,JZ.default=tX,tX.deviation=function(t,e,n,r){var i=e&&e.length,o=i?e[0]*n:t.length,a=Math.abs(NX(t,0,o,n));if(i)for(var l=0,s=e.length;l<s;l++){var u=e[l]*n,c=l<s-1?e[l+1]*n:t.length;a-=Math.abs(NX(t,u,c,n))}var f=0;for(l=0;l<r.length;l+=3){var h=r[l]*n,d=r[l+1]*n,p=r[l+2]*n;f+=Math.abs((t[h]-t[p])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[p+1]-t[h+1]))}return 0===a&&0===f?0:Math.abs((f-a)/a)},tX.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<e;a++)n.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};let jX="",LX=!0;function PX(){let t=JI.nodes,e=JSON.stringify(t.map((t=>[t.x.toFixed(0),t.y.toFixed(0)])));LX=e!==jX,jX=e}function OX(){return LX}var FX=200;function DX(t,e,n,r){var i=-1,o=wM,a=!0,l=t.length,s=[],u=e.length;if(!l)return s;n&&(e=df(e,_p(n))),r?(o=kM,a=!1):e.length>=FX&&(o=Qh,a=!1,e=new Gh(e));t:for(;++i<l;){var c=t[i],f=null==n?c:n(c);if(c=r||0!==c?c:0,a&&f==f){for(var h=u;h--;)if(e[h]===f)continue t;s.push(c)}else o(e,f,r)||s.push(c)}return s}function qX(t){return Kc(t)&&Fp(t)}var RX=ug((function(t,e){return qX(t)?DX(t,hf(e,1,qX,!0)):[]})),BX=RX,HX=function(){var t=document.createElement("canvas").getContext("2d");return function(e,n){var r;return t.font=n||"10px sans-serif",t.measureText(e).width}}();function IX(t,e){return 0===BX(t,e).length}function UX(t){var e={},n={},r={},i={};return t.forEach((function(o){if(o._transition.exiting){var a=o._data.member_ids||[o.id],l=o._data.column_names||[];t.forEach((function(t){if(t._transition.entering){var s=t._data.member_ids||[t.id],u=t._data.column_names||[],c,f=0===l.length&&u.length>0||IX(u,l),h,d=0===u.length&&l.length>0||IX(l,u);f&&IX(a,s)?(e[o.id]=t,i[t.id]=!0):d&&IX(s,a)&&(r[t.id]=o,n[o.id]=!0)}}))}})),{entering_node_of_an_exiting_node:e,exiting_node_of_an_entering_node:r,exiting_node_contains_an_entering_node:n,entering_node_contains_an_exiting_node:i}}function YX(t,e){var n=HX(t,"1px "+jc.layout.body_font.name),r;return(1-jc.item_label_padding/100)*e/n}function WX(t,e){var n,r=t._data.label,i=t._data.short_label,o=t.bounds[1][0]-t.bounds[0][0],a=t.bounds[1][1]-t.bounds[0][1],l=kC(jc.item_label_max_size),s=kC(jc.item_label_min_size),u;if(NM()){var c=e$(jc.zoom_focus[jc.geo_shapes_index]);l/=c.k,s/=c.k}var f=.5*a;if(e.label_font_size=e.label_opacity=e.short_label_font_size=e.short_label_opacity=0,r){u=YX(r,o);var h=Math.min(u,f);h=Math.min(h,l),e.label_font_size=h,n=h>=s,e.label_opacity=n?1:0}if(!n&&i){u=YX(i,o);var d=Math.min(u,f);d=Math.min(d,l),e.short_label_font_size=d,e.short_label_opacity=d>=s?1:0}}function VX(t,e){var n=t.map((function(t){return t})),r=t.map((function(t){return t.id})),i=[];e.forEach((function(t){i.push(t.id)})),e.forEach((function(t){-1===r.indexOf(t.id)&&n.push(t)})),n.forEach((function(t){t._transition={},t._transition.exiting=-1===r.indexOf(t.id),t._transition.entering=-1===i.indexOf(t.id)}));var o=UX(n);return n.forEach((function(t){var e=t._transition,n=!NM()||NM()&&t._data.geo_point&&jc.geo_point_show_labels,r=!n&&NM()&&t._data.geo_region;if(e.entering){var i=o.exiting_node_of_an_entering_node[t.id];e.enter={},e.enter.opacity=0,e.enter.x=i?i.x:t.x,e.enter.y=i?i.y:t.y,e.enter.fill=i?t.fill:"#ffffff",e.enter.label_fill="#ffffff",e.enter.path=t.path,WX(t,e.enter),e.enter.node_label_opacity=e.enter.label_opacity*(n?1:0),e.enter.node_short_label_opacity=e.enter.short_label_opacity*(n?1:0),e.enter.layer_label_opacity=e.enter.label_opacity*(r?1:0),e.enter.layer_short_label_opacity=e.enter.short_label_opacity*(r?1:0)}if(e.x=t.x,e.y=t.y,e.path=t.path,e.opacity=NM()&&t._data.geo_point?jc.geo_point_opacity:1,e.fill=t.fill,e.stroke_width=jc.stroke_width,NM()){var a=e$(jc.zoom_focus[jc.geo_shapes_index]);e.stroke_width/=a.k}if(e.label_fill=jc.text_color||IC(t.fill),e.label=t._data.label,e.short_label=t._data.short_label,WX(t,e),e.node_label_opacity=e.label_opacity*(n?1:0),e.node_short_label_opacity=e.short_label_opacity*(n?1:0),e.layer_label_opacity=e.label_opacity*(r?1:0),e.layer_short_label_opacity=e.short_label_opacity*(r?1:0),e.exiting){var l=o.entering_node_of_an_exiting_node[t.id];e.x=l?l.x:e.x,e.y=l?l.y:e.y,e.opacity=0}})),n}var ZX={},XX,GX,$X,QX,JX;function KX(t){im.stopPropagation(),t._data.feature_without_data||(x$(t._data),aG())}function tG(t){t._data.feature_without_data||(v$(t),aZ(t.id),aG())}function eG(){b$(),aZ(null),aG()}function nG(t){var e=kC(jc.group_label_size),n=jc.group_label_color||jc.layout.font_color,r=jc.group_label_weight,i=gD.data_foreground.select(".group-labels").selectAll("text").data(t).join("text").style("font-size",e+"px").style("font-weight",r).style("fill",n).style("text-anchor","middle").html("");i.append("tspan").attr("stroke",jc.layout.background_color).attr("stroke-width","0.25em"),i.append("tspan"),i.selectAll("tspan").text((function(t){return t.text})).attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("dy","-1em")}function rG(t,e){var n;if(t===e)return function(){return e};var r=FC(t),i=FC(e);if(r&&i)return MZ(t,e);var o="",a="",l,s=7;return $Z(o=r?DC(t,7):PC(l=BZ(t)),a=i?DC(e,7):PC(l=BZ(e)),{maxSegmentLength:!1})}function iG(t,e){WC(t),OX()&&y$(),t.forEach((function(t){t.fill=qC(t)}));var n=gD.data_foreground.select(".elements").selectAll("g"),r=gD.data_foreground.select(".labels").selectAll("g");n.interrupt();var i=[];n.each((function(t){i.push(t)}));var o=VX(t,i);n.data(o,(function(t){return t.id})).enter().append("g").classed("mark",!0).each((function(t){var e=t._transition;bm(this).style("opacity",e.enter.opacity).attr("transform","translate("+[e.enter.x,e.enter.y]+")").on("click",KX).on("mouseover",tG).on("mouseout",eG),bm(this).append("path").attr("d",e.enter.path).style("fill",e.enter.fill),bm(this).append("text").classed("label",!0).style("cursor","default").style("text-anchor","middle").attr("dy","0.33em").style("font-size",e.enter.label_font_size+"px").style("fill",e.enter.label_fill).style("opacity",e.enter.node_label_opacity).text(t._data.label),bm(this).append("text").classed("short-label",!0).style("cursor","default").style("text-anchor","middle").attr("dy","0.33em").style("font-size",e.enter.short_label_font_size+"px").style("fill",e.enter.label_fill).style("opacity",e.enter.node_short_label_opacity).text(t._data.short_label),this.__tween__={x:e.enter.x,y:e.enter.y}})),r.data(o,(function(t){return t.id})).enter().append("g").each((function(t){ZX[t.id]=bm(this);var e=t._transition;bm(this).style("opacity",e.enter.opacity).attr("transform","translate("+[e.enter.x,e.enter.y]+")"),bm(this).append("text").classed("label",!0).style("cursor","default").style("text-anchor","middle").attr("dy","0.33em").style("font-size",e.enter.label_font_size+"px").style("fill",e.enter.label_fill).text(t._data.label),bm(this).append("text").classed("short-label",!0).style("cursor","default").style("text-anchor","middle").attr("dy","0.33em").style("font-size",e.enter.short_label_font_size+"px").style("fill",e.enter.label_fill).text(t._data.short_label)})),gD.data_foreground.select(".elements").selectAll("g").filter((function(t){return t._transition.remove_immediately})).each((function(t){ZX[t.id].remove(),delete ZX[t.id]})).remove(),gD.data_foreground.select(".elements").selectAll("g").sort((function(t,e){let n=jc.draw_smaller_points_on_top,r=t.r?t.r:n?1/0:0,i=e.r?e.r:n?1/0:0;return n?i-r:r-i})).transition().ease(Aj).duration(e?$C():0).tween("all",(function(t){var e=t._transition,n=bm(this),r=n.node(),i=n.select("path"),o=n.select("text.label"),a=n.select("text.short-label"),l=ZX[t.id],s=g$()===t.id?.7:e.opacity,u=mZ(+n.style("opacity"),s),c=mZ(r.__tween__.x,e.x),f=mZ(r.__tween__.y,e.y),h=rG(i.attr("d"),e.path),d=hZ(i.style("fill"),e.fill),p=MZ(i.style("stroke-width"),e.stroke_width+"px"),_=hZ(i.style("stroke"),jc.stroke_color),g=MZ(o.style("font-size"),e.label_font_size+"px"),y=MZ(a.style("font-size"),e.short_label_font_size+"px"),m=hZ(o.style("fill"),e.label_fill),v=mZ(o.style("opacity"),e.node_label_opacity),b=mZ(a.style("opacity"),e.node_short_label_opacity),x=mZ(l.select(".label").style("opacity"),e.layer_label_opacity),w=mZ(l.select(".short-label").style("opacity"),e.layer_short_label_opacity);return function(e){var s=c(e),k=f(e);n.attr("transform","translate("+[s,k]+")").style("opacity",u(e)),i.attr("d",h(e)).style("fill",d(e)).style("stroke-width",p(e)).style("stroke",_(e)),o.style("font-size",g(e)).style("opacity",v(e)).style("fill",m(e)).text(t._data.label),a.style("font-size",y(e)).style("opacity",b(e)).style("fill",m(e)).text(t._data.short_label),l.attr("transform","translate("+[s,k]+")").style("opacity",u(e)),l.select(".label").style("font-size",g(e)).style("opacity",x(e)).style("fill",m(e)).text(t._data.label),l.select(".short-label").style("font-size",y(e)).style("opacity",w(e)).style("fill",m(e)).text(t._data.short_label),r.__tween__.x=s,r.__tween__.y=k,gD.data_foreground.select(".zoom-container").attr("transform",t$)}})).on("end",(function(t){var e=t._transition,n=bm(this),r=n.select("path");if(e.exiting)return n.remove(),ZX[t.id].remove(),void delete ZX[t.id];e.make_visible_at_end&&(n.style("opacity",1),ZX[t.id].style("opacity",1)),r.attr("d",e.path),m$()}))}function oG(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];iG(JI.nodes,t),nG(JI.labels)}function aG(){gD.data_foreground.select(".elements").selectAll("g.mark").style("opacity",(function(t){var e;return(t.id===g$()||t.id===oZ?.7:1)*t._transition.opacity}))}function lG(){XX=bm("#fl-layout-wrapper-outer"),GX=XX.select("#fl-layout-sidebar").append("div").classed("control-panel",!0),XX.select("#fl-layout-sidebar").append("div").classed("control-panel-overflow",!0),$X=bm(cJ.getSection("primary")),(QX=$X.select(".svg-container")).select("svg").on("click",(function(){aZ(null),aG(),w$()})),(JX=$X.append("div").attr("id","canvas-container").style("position","absolute").style("top","0").style("left","0")).append("canvas").attr("id","canvas").style("position","absolute").style("top","0"),JX.append("canvas").attr("id","pick-canvas").style("opacity",0).style("position","absolute").style("top","0")}var sG=ug((function(t,e){return qX(t)?DX(t,e):[]})),uG=sG,cG={},fG=["x","y","path","fill","stroke_width","opacity","label_font_size","short_label_font_size","label_fill","node_label_opacity","node_short_label_opacity","layer_label_opacity","layer_short_label_opacity"],hG={},dG={},pG={},_G,gG,yG,mG,vG,bG,xG=!1,wG=255,kG=[],MG=0;function AG(){vG.attr("width",yG).attr("height",mG),bG.clearRect(0,0,yG,mG),bG.save(),bG.translate(t$.x,t$.y),bG.scale(t$.k,t$.k),dG.id.forEach((function(t,e){if(cG[t]){var n=RC(e);bG.save(),bG.fillStyle="rgba("+[n.r,n.g,n.b]+","+wG+")",bG.translate(dG.x[e],dG.y[e]),bG.beginPath();var r=new Path2D(dG.path[e]);bG.fill(r),bG.restore()}})),bG.restore()}function SG(){var t=Mm(vG.node()),e=bG.getImageData(t[0],t[1],1,1).data,n=BC(e[0],e[1],e[2]),r=dG.id[n],i;return(cG[r]?cG[r].datum:void 0)&&e[3]===wG||(r=null),r}function CG(){if(xG){var t=oZ,e=SG();if(t!==e){var n=cG[e],r=n&&n.datum&&n.datum._data.feature_without_data;if(null===e||r)return b$(),aZ(null),void LG();aZ(e),v$(n.datum),LG()}}}function EG(){xG&&(b$(),aZ(null),LG())}function zG(){var t=SG();if(!t)return w$(),aZ(null),void LG();var e=cG[t],n;e&&e.datum&&e.datum._data.feature_without_data||e&&(x$(e.datum._data),LG())}function TG(){if(kG&&0!==kG.length){var t=kC(jc.group_label_size),e=jc.group_label_color||jc.layout.font_color,n=jc.group_label_weight;gG.save(),gG.font=n+" "+t+"px '"+jc.layout.body_font.name+"'",gG.fillStyle=e,gG.strokeStyle=jc.layout.background_color,gG.lineWidth=.25*t;var r=-t;kG.forEach((function(t){gG.strokeText(t.text,t.x,t.y+r),gG.fillText(t.text,t.x,t.y+r)})),gG.restore()}}function NG(){gG.save(),gG.strokeStyle=jc.stroke_color,pG.x.forEach(((t,e)=>{let n=dG.id[e];if(cG[n]){gG.save(),gG.translate(pG.x[e],pG.y[e]),gG.save(),gG.globalAlpha=n===g$()||n===oZ?.7:pG.opacity[e],gG.fillStyle=pG.fill[e],gG.lineWidth=pG.stroke_width[e],gG.beginPath();var r=new Path2D(pG.path[e]);gG.fill(r),jc.stroke_width>0&&gG.stroke(r),gG.restore(),0!==pG.node_label_opacity[e]&&(gG.save(),gG.fillStyle=pG.label_fill[e],gG.globalAlpha=pG.opacity[e]*pG.node_label_opacity[e],gG.font=pG.label_font_size[e]+"px '"+jc.layout.body_font.name+"'",gG.fillText(cG[n].datum._data.label,0,0),gG.restore()),0!==pG.node_short_label_opacity[e]&&(gG.save(),gG.fillStyle=pG.label_fill[e],gG.globalAlpha=pG.opacity[e]*pG.node_short_label_opacity[e],gG.font=pG.short_label_font_size[e]+"px '"+jc.layout.body_font.name+"'",gG.fillText(cG[n].datum._data.short_label,0,0),gG.restore()),gG.restore()}})),gG.restore()}function jG(){pG.x.forEach(((t,e)=>{let n=dG.id[e];cG[n]&&(gG.save(),gG.translate(pG.x[e],pG.y[e]),gG.fillStyle=pG.label_fill[e],pG.layer_label_opacity[e]>0&&(gG.globalAlpha=pG.opacity[e]*pG.layer_label_opacity[e],gG.font=pG.label_font_size[e]+"px '"+jc.layout.body_font.name+"'",gG.fillText(cG[n].datum._data.label,0,0)),pG.layer_short_label_opacity[e]>0&&(gG.globalAlpha=pG.opacity[e]*pG.layer_short_label_opacity[e],gG.font=pG.short_label_font_size[e]+"px '"+jc.layout.body_font.name+"'",gG.fillText(cG[n].datum._data.short_label,0,0)),gG.restore())}))}function LG(){var t=window.devicePixelRatio||1;_G.style("width",yG+"px").style("height",mG+"px").attr("width",yG*t).attr("height",mG*t),gG.clearRect(0,0,yG,mG),gG.textAlign="center",gG.textBaseline="middle",gG.scale(t,t),gG.save(),gG.translate(t$.x,t$.y),gG.scale(t$.k,t$.k),NG(),jG(),TG(),gG.restore()}function PG(){var t=!0;return Object.keys(hG).forEach((function(e){if(t)for(var n=hG[e],r=dG[e],i=0;i<n.length;i++)if(n[i]!=r[i]){t=!1;break}})),t}function OG(t,e){var n,r;return r=t.map((function(t,n){var r="",i="",o,a=t,l=e[n];if(FC(a)&&FC(l))return MZ(a,l);var s=7;return $Z(r=FC(a)?DC(a,7):PC(o=BZ(a)),i=FC(l)?DC(l,7):PC(o=BZ(l)),{maxSegmentLength:!1})})),n=function(t){var e=r.map((function(e){return e(t)}));return e},n}function FG(t){var e=[],n;return Object.keys(cG).forEach((function(t){var n=cG[t];n.datum.fill=n.current.fill,e.push(n.datum)})),VX(t,e)}function DG(t){t.forEach((function(t){var e=t._transition,n=cG[t.id];void 0===n&&(e.entering||console.warn("Node not in display_lu has been identified as entering in transitionLayout"),cG[t.id]={current:{},target:{}},fG.forEach((function(n){cG[t.id].current[n]=e[n]})),n=cG[t.id]),fG.forEach((function(t){n.target[t]=e[t]})),n.datum=t,n.remove_immediately=e.remove_immediately,n.make_visible_at_end=e.make_visible_at_end,n.is_exiting=e.exiting,n.feature_without_data=!0===t._data.feature_without_data,n.radius=t.r}))}function qG(){var t={id:[]};return fG.forEach((function(e){t[e]=[]})),t}function RG(){let t=Object.keys(cG),e=jc.draw_smaller_points_on_top;return t=hg(t,(function(t){let n=cG[t];return n.radius?n.radius:e?1/0:0})),e&&t.reverse(),t}function BG(t,e,n){t[e].push(n[e])}function HG(){var t;hG=qG(),dG=qG(),RG().forEach((function(t){var e=cG[t].current;hG.id.push(t),fG.forEach((function(t){BG(hG,t,e)}));var n=cG[t].target;dG.id.push(t),fG.forEach((function(t){BG(dG,t,n)}))}))}function IG(){Object.keys(cG).forEach((function(t){var e;cG[t].is_exiting&&delete cG[t]}))}function UG(){hG.id.forEach((function(t,e){cG[t].current={},fG.forEach((function(n){cG[t].current[n]=pG[n][e]}))}))}function YG(t,e){var n=++MG,r;xG=!1,yG=Math.floor(cJ.getPrimaryWidth()),mG=Math.floor(cJ.getPrimaryHeight()),_G=_G||bm("#canvas"),gG=gG||_G.node().getContext("2d"),vG=vG||bm("#pick-canvas"),bG=bG||vG.node().getContext("2d"),vG.on("mousemove",CG).on("mouseout",EG).on("click",zG),DG(FG(t)),HG();var i={},o;i.path=OG(hG.path,dG.path),uG(fG,"path").forEach((function(t){i[t]=_Z(hG[t],dG[t])}));var a=PG();OX()&&y$();var l=null;function s(t){if(n===MG){l||(l=t);var r=t-l,o=0===$C()?1:r/$C();o=o>1?1:o,e||(o=1),a&&(o=1),o=Aj(o),fG.forEach((function(t){pG[t]=i[t](o)})),1===o&&(pG.path=dG.path),Object.keys(cG).forEach((function(t,e){var n=cG[t];1===o&&n.make_visible_at_end&&(pG.opacity[e]=1),n.remove_immediately&&(pG.opacity[e]=0)})),UG(),LG(),o<1&&n===MG&&window.requestAnimationFrame(s),1===o&&(IG(),xG=!0,AG(),m$())}}window.setTimeout((function(){window.requestAnimationFrame(s)}),0)}function WG(t,e){WC(t),t.forEach((function(t){t.fill=qC(t)})),YG(t,e)}function VG(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];kG=JI.labels,WG(JI.nodes,t)}let ZG={filter:void 0,show_all_geojson_regions:void 0,geo_fit_to_points:void 0,zoom_focus:void 0},XG,GG,$G,QG;function JG(){ZG.filter=jc.filter,ZG.show_all_geojson_regions=jc.show_all_geojson_regions,ZG.geo_fit_to_points=jc.geo_fit_to_points,ZG.zoom_focus=jc.zoom_focus.map((t=>({...t})))}function KG(t){if("zoom_focus"===t){let t=jc.geo_shapes_index,e=jc.zoom_focus[t],n=ZG.zoom_focus[t];return(void 0!==e||void 0!==n)&&(void 0===e&&void 0!==n||void 0!==e&&void 0===n||e.k!==n.k||e.lon!==n.lon||e.lat!==n.lat)}return jc[t]!==ZG[t]}let t$=GV;function e$(t){let e=cJ.getPrimaryWidth(),n=cJ.getPrimaryHeight(),r=JI.projection([t.lon,t.lat]),i;return null===r?GV:GV.translate(e/2-t.k*r[0],n/2-t.k*r[1]).scale(t.k)}function n$(t){let e=cJ.getPrimaryWidth(),n=cJ.getPrimaryHeight(),r=JI.projection.invert([(e/2-t.x)/t.k,(n/2-t.y)/t.k]),i;return{k:t.k,lon:r[0],lat:r[1]}}function r$(){if(!NM())return;if(void 0!==jc.zoom_focus[jc.geo_shapes_index])return;let t,e,n=[cJ.getPrimaryWidth()/2,cJ.getPrimaryHeight()/2],r=JI.projection.invert(n);jc.zoom_focus[jc.geo_shapes_index]={lon:r[0],lat:r[1],k:1}}function i$(){$G=QX.select(".fl-data-foreground"),XG=iZ().scaleExtent([1,10]).filter((function(){if(!(im.button>0||"touchstart"==im.type&&im.touches.length<2))return!0})).on("start",(function(){jc.geo_zoom_enabled&&NM()&&("canvas"===jc.renderer?EG():eG(),y$())})).on("zoom",(function(){jc.geo_zoom_enabled&&NM()&&(t$=im.transform,l$(),QG.node().__zoom=im.transform)})).on("end",(function(){jc.geo_zoom_enabled&&NM()&&(jc.zoom_focus[jc.geo_shapes_index]=n$(t$),u$())})),$G.call(XG),JX.select("canvas#pick-canvas").call(XG),QG=QX.select("#svg-state-zoom"),GG=iZ().on("start",(function(){y$()})).on("zoom",(function(){t$=im.transform,$G.node().__zoom=im.transform,JX.select("canvas#pick-canvas").node().__zoom=im.transform,"canvas"===jc.renderer?EG():eG()})),QG.call(GG)}function o$(t,e){XG.extent([[0,0],[t,e]]).translateExtent([[0,0],[t,e]]),GG.extent([[0,0],[t,e]]).translateExtent([[0,0],[t,e]])}function a$(t,e){QX.select("svg #svg-zoom-background").attr("width",t).attr("height",e)}function l$(){"svg"===jc.renderer?QX.select(".zoom-container").attr("transform",t$):LG()}function s$(){let t=NM()?e$(jc.zoom_focus[jc.geo_shapes_index]):GV,e=GV.translate(t.x,t.y).scale(t.k);QG.transition().ease(Aj).duration($C()).call(GG.transform,e),0===$C()&&(t$=t)}function u$(){var t=eU(),e=nU(t);tU(LM,t,e),tY(),"svg"===jc.renderer?oG(!1):VG(!1),k$(),JG()}function c$(){NM()&&(KG("zoom_focus")||(KG("filter")&&!jc.show_all_geojson_regions||KG("show_all_geojson_regions")&&"All"!==jc.filter||KG("geo_fit_to_points"))&&(jc.zoom_focus=[]))}let f$=bm("body").node(),h$;function d$(){h$=FV(jc.popup),h$.titleKey("__title").getLockedPosition(p$).onPanelClose(_$)}function p$(t){let e=LC(t),n,r;if(e)return[M$(e),N$(e).popup_datum]}function _$(){J$()}function g$(){return h$.locked()}function y$(){bm(".flourish-popup").style("opacity",0)}function m$(){bm(".flourish-popup").style("opacity",1)}function v$(t){let e=t._data,n=N$(e),r=M$(e);h$.setColumnNames(n.column_names).mouseover(r,n.popup_datum)}function b$(){h$.mouseout()}function x$(t){if(t.__flourish_id===g$())return void w$();let e=N$(t),n=M$(t);h$.setColumnNames(e.column_names).click(n,e.popup_datum,t.__flourish_id),J$()}function w$(){h$.clickout(),J$()}function k$(){let t=h$.locked();if(t){let e=LC(t);if(!e)return void h$.clickout();let n=N$(e);h$.setColumnNames(n.column_names)}h$.update()}function M$(t){let e=cJ.getSection("primary").getBoundingClientRect(),n=e.left,r=e.top,i=f$.getBoundingClientRect(),o=i.left,a=i.top,l=8,s={x:t.__layout_data.x,y:t.__layout_data.y};if(NM()){let t=e$(jc.zoom_focus[jc.geo_shapes_index]);s.x=t.x+t.k*s.x,s.y=t.y+t.k*s.y}let u={x:n-o+s.x,y:r-a+s.y+8};return[u.x,u.y]}function A$(t,e){LM.column_names.categoryColumns.forEach(((n,r)=>{e.push({name:n,value:t.categoryColumns[r]})}))}function S$(t,e){LM.column_names.numericColumns.forEach(((n,r)=>{let i=t.numericColumns[r];e.push({name:n,value:isNaN(i)?"":_D(i)})}))}function C$(t,e){LM.column_names.label&&e.push({name:LM.column_names.label,value:t.label})}function E$(t,e){if("numeric"===e.type){let n=t.numericColumns[zC(e)];return isNaN(n)?"":_D(n)}return t.categoryColumns[zC(e)]}function z$(t,e){let n;["position_by_1","position_by_2","size_by","shade_by","aggregate_by"].forEach((n=>{let r=jc[n];"none"!==r.type&&e.push({name:jC(r),value:E$(t,r)})}))}function T$(t,e){LM.column_names.metadata.forEach(((n,r)=>{if(IV(e.map((t=>t.name)),n))return;let i=t.metadata[r];MC(+i)&&(i=_D(+i)),e.push({name:n,value:i})}))}function N$(t){let e=[];return jc.popup.popup_is_custom||jc.popup.panel_is_custom?(A$(t,e),S$(t,e),C$(t,e),LM.is_aggregated||T$(t,e)):(z$(t,e),LM.is_aggregated&&e.push({name:"Count",value:t.numericColumns[0]}),LM.is_aggregated||T$(t,e)),{column_names:{columns:e.map((t=>t.name))},popup_datum:{__title:t.label,columns:e.map((t=>t.value))}}}var j$,L$=.4,P$=.55;function O$(){var t=bm(cJ.getSection("primary")).append("div").attr("class","search-container");t.append("input").attr("type","text").on("focus",(function(){bm(this.parentElement).classed("active",!0).classed("expanded",!0),this.value="",this.setAttribute("data-type",""),this.setAttribute("data-value",""),D$()})).on("blur",(function(){bm(this.parentElement).classed("active",!1).classed("expanded",jc.search_expanded)})).on("keydown",q$).on("keyup",D$),t.append("div").attr("class","search-list"),t.append("div").attr("class","search-icon").append("svg").attr("width","12px").attr("height","12px").attr("viewBox","0 0 12 12").append("path").attr("d","M4.71428571,0.571428571 C5.35268176,0.571428571 5.96316673,0.695311261 6.54575893,0.943080357 C7.12835113,1.19084945 7.63057825,1.52566753 8.05245536,1.94754464 C8.47433247,2.36942175 8.80915055,2.87164887 9.05691964,3.45424107 C9.30468874,4.03683327 9.42857143,4.64731824 9.42857143,5.28571429 C9.42857143,6.26786205 9.15178848,7.15847815 8.59821429,7.95758929 L10.8950893,10.2544643 C11.0602687,10.4196437 11.1428571,10.6205345 11.1428571,10.8571429 C11.1428571,11.0892869 11.0580366,11.2901777 10.8883929,11.4598214 C10.7187492,11.6294651 10.5178583,11.7142857 10.2857143,11.7142857 C10.0446417,11.7142857 9.8437508,11.6294651 9.68303571,11.4598214 L7.38616071,9.16964286 C6.58704958,9.72321705 5.69643348,10 4.71428571,10 C4.07588967,10 3.4654047,9.87611731 2.8828125,9.62834821 C2.3002203,9.38057912 1.79799318,9.04576104 1.37611607,8.62388393 C0.954238962,8.20200682 0.619420882,7.6997797 0.371651786,7.1171875 C0.12388269,6.5345953 0,5.92411033 0,5.28571429 C0,4.64731824 0.12388269,4.03683327 0.371651786,3.45424107 C0.619420882,2.87164887 0.954238962,2.36942175 1.37611607,1.94754464 C1.79799318,1.52566753 2.3002203,1.19084945 2.8828125,0.943080357 C3.4654047,0.695311261 4.07588967,0.571428571 4.71428571,0.571428571 Z M4.71428571,2.28571429 C3.88838873,2.28571429 3.18192258,2.57923814 2.59486607,3.16629464 C2.00780956,3.75335115 1.71428571,4.4598173 1.71428571,5.28571429 C1.71428571,6.11161127 2.00780956,6.81807742 2.59486607,7.40513393 C3.18192258,7.99219044 3.88838873,8.28571429 4.71428571,8.28571429 C5.5401827,8.28571429 6.24553279,7.9933065 6.83035714,7.40848214 C7.4196458,6.81919348 7.71428571,6.11161127 7.71428571,5.28571429 C7.71428571,4.4598173 7.42076186,3.75335115 6.83370536,3.16629464 C6.24664885,2.57923814 5.5401827,2.28571429 4.71428571,2.28571429 Z").attr("id","search").attr("fill","#000000").attr("stroke","none").attr("stroke-width","1").attr("fill-rule","evenodd"),t.on("mousedown",(function(){F$(im.target)}))}function F$(t){var e,n;t.className.indexOf("search-item")<0||x$(LC(t.dataset.value))}function D$(){if(40!=im.keyCode&&38!=im.keyCode&&9!=im.keyCode&&13!=im.keyCode){var t=im.target.value;t.length<2&&!jc.search_dropdown?R$([]):R$(j$(UC(t)))}}function q$(){var t,e,n=bm(".search-container .search-list");9==im.keyCode||13==im.keyCode?(t=n.select(".selected")).empty()||(F$(t.node()),this.blur()):40==im.keyCode?((t=n.select(".selected")).empty()||(e=t.node().nextSibling),e||(e=n.select(".search-item[data-value]").node()),n.selectAll(".selected").classed("selected",!1),bm(e).classed("selected",!0)):38==im.keyCode&&((t=n.select(".selected")).empty()||(e=t.node().previousSibling),e||(e=n.select(".search-item:last-child").node()),n.selectAll(".selected").classed("selected",!1),bm(e).classed("selected",!0))}function R$(t){var e=Math.min(t.length,500),n=t.slice(0,e),r;bm(".search-container .search-list").style("opacity",n.length>0?1:null).html("").selectAll(".search-item").data(n).join((function(t){return t.append("div").attr("class","search-item").attr("data-value",(function(t){return t.__flourish_id})).append("p").html((function(t){return t.label}))}),(function(t){return t}),(function(t){return t.remove()}))}function B$(){var t=bm(".search-container"),e=LM.length>0&&void 0!==LM[0].label&&jc.search_enabled;if(t.style("display",e?null:"none"),e){var n=LM.filter((function(t){return""!==t.label})),r=jc.search_bg_color||(jc.layout.background_color_enabled?jc.layout.background_color:"#fff");(j$=_Y(n,(function(t){return t.label}))).normalizer(UC),t.classed("expanded",jc.search_expanded),t.select("input").attr("placeholder",jc.search_placeholder).attr("size",jc.search_placeholder.length).style("background-color",YC(r,jc.search_bg_opacity)).style("color",jc.search_text_color||jc.layout.font_color).style("width",jc.search_box_size+"rem").style("height",jc.search_box_size+"rem").style("padding","0 0 0 calc("+jc.search_box_size+"rem - 4px)").style("border-radius",jc.search_box_radius+"px").style("font-size",jc.search_box_size*P$+"rem").style("border","2px solid "+YC(jc.search_text_color||jc.layout.font_color,jc.search_box_stroke)),t.select(".search-list").style("box-shadow","0 1px 3px rgba(0,0,0,0.2)").style("background-color",r).style("color",jc.search_text_color||jc.layout.font_color).style("border-radius","3px").style("font-size",jc.search_box_size*P$+"rem"),t.select(".search-icon").style("width",jc.search_box_size*L$+"rem").style("height",jc.search_box_size*L$+"rem").style("left",jc.search_box_size*(1-L$)*.5+"rem").style("top",jc.search_box_size*(1-L$)*.5+"rem").select("svg path").attr("fill",jc.search_icon_color||jc.layout.font_color)}}function H$(t){return"count"===jc[t].aggregation_type}function I$(t){var e=NM(),n=CC(jc.position_by_1)&&!H$("position_by_1"),r=EC(jc.position_by_1),i=TC(jc.position_by_1),o=CC(jc.position_by_2)&&!H$("position_by_2"),a=EC(jc.position_by_2),l=TC(jc.position_by_2),s="none"!==jc.size_by.type&&!H$("size_by"),u=TC(jc.size_by),c=EC(jc.shade_by),f=CC(jc.shade_by)&&!H$("shade_by"),h=TC(jc.shade_by),d;return t.filter((function(t){var d=!0;return e||(n&&!MC(t.numericColumns[i])&&(d=!1),o&&!MC(t.numericColumns[l])&&(d=!1),s&&!MC(t.numericColumns[u])&&(d=!1),s&&t.numericColumns[u]<0&&(d=!1)),jc.filter_out_blank_values&&(!e&&r&&""===t.categoryColumns[i]&&(d=!1),!e&&a&&""===t.categoryColumns[l]&&(d=!1),f&&!MC(t.numericColumns[h])&&(d=!1),c&&""===t.categoryColumns[h]&&(d=!1)),d}))}function U$(t){var e;if(!Object.hasOwnProperty.call(t.column_names,"filter"))return t;var n=jc.filter,r;return n===jc.filter_control_all_text?t:t.filter((function(t){return t.filter===n}))}function Y$(){var t=U$(LM);(t=I$(t)).column_names=LM.column_names,OM(t)}function W$(){"Map"!==jc.geo_mode||iE()||(jc.geo_mode="Chart")}var V$=1;function Z$(t){t=t||document.body;var e=!1,n=!1,r=-1,i=t===document.body?window:t,o=document.createElement("div"),a;return o.appendChild(document.createElement("span")).innerText="Hold down "+("MacIntel"===window.navigator.platform?"⌘":"Ctrl")+" to zoom",o.setAttribute("class","flourish-scroll-hijack-overlay"),o.style.alignItems="center",o.style.justifyContent="center",o.style.position="absolute",o.style.top=o.style.left=0,o.style.width="100%",o.style.height="100%",o.style.background="rgba(0, 0, 0, 0.5)",o.style.color="white",o.style.pointerEvents="none",o.style.display="flex",o.style.fontSize="1.5rem",o.style.zIndex=9999,function t(e){return e?l():s()};function l(){return e||(e=!0,i.addEventListener("wheel",u,!0)),o}function s(){return e&&(e=!1,i.removeEventListener("wheel",u,!0),o.parentNode===document.body&&t.removeChild(o)),o}function u(t){t.ctrlKey||t.metaKey||(c(),t.stopPropagation())}function c(){r=Date.now(),n||(f(),t.appendChild(o))}function f(){var i=window.requestAnimationFrame(f);n=!0;var a=1-(Date.now()-r)/1e3/V$;a<=0||!e?(window.cancelAnimationFrame(i),o.parentNode===t&&t.removeChild(o),n=!1,r=-1):(a*=1.2,a=Math.max(0,a),a=Math.min(1,a),o.style.opacity=a)}}let X$;function G$(){X$=Z$(cJ.getSection("primary"))}function $$(){X$(jc.geo_zoom_enabled&&NM())}function Q$(){var t=cJ.getPrimaryWidth(),e=cJ.getPrimaryHeight();QX.select("svg").attr("width",Math.floor(t)).attr("height",e).style("z-index","-100"),gD.data_foreground.style("display","svg"===jc.renderer?"inline":"none"),JX.style("display","canvas"===jc.renderer?"inline":"none"),o$(t,e),a$(t,e)}function J$(){"canvas"===jc.renderer?LG():aG()}function K$(){if(!Flourish.fixed_height&&!Flourish.cypress){var t=XX.node().clientWidth,e=XX.node().clientHeight,n=300,r=Math.max(jc.aspect_ratio*t,n),i=1;if(Math.abs(r-e)>1)return void Flourish.setHeight(r)}var o=XX.node().offsetWidth;XX.classed("narrow",o<jc.narrow_breakpoint),sY(),LQ(),sU(),wD(),c$(),cJ.update(),GC(),FM(Ik.data),DM(LM),qM(),dC(),VC(),sE(LM,Ik.geo_regions,Ik.geo_points),W$(),Y$(),uE(LM),cE(LM),ZQ(),QQ(),IM(),hC(),aY(),Q$();var a=eU();CD(a),iU(a),gD.animationDuration($C()).update();var l=nU(a);tU(LM,a,l),PX(),tY(),r$(),s$(),"canvas"===jc.renderer?VG():oG(),aY(),B$(),k$(),$$(),JG()}var tQ,eQ,nQ,rQ,iQ,oQ,aQ,lQ,sQ,uQ,cQ,fQ=[],hQ=[],dQ=[],pQ=[],_Q=[];function gQ(){var t=[];return Ik.geo_regions&&Ik.geo_regions.column_names.shapes&&(t=Ik.geo_regions.column_names.shapes.map((function(t){return t}))),t}function yQ(){var t=[];return Ik.data.column_names.categoryColumns?(Ik.data.column_names.categoryColumns.forEach((function(e,n){t.push({type:"categorical",index:n,name:e,aggregation_type:"none"})})),t):t}function mQ(){var t=[];return Ik.data.column_names.numericColumns?("none"===jc.aggregate_by.type?Ik.data.column_names.numericColumns.forEach((function(e,n){t.push({type:"numeric",index:n,name:e,aggregation_type:"none"})})):Ik.data.column_names.numericColumns.forEach((function(e,n){jM.forEach((function(r){t.push({type:"numeric",index:n,name:e+" ("+r+")",aggregation_type:r})}))})),t):t}function vQ(t,e){var n=[];return jc.controls_dropdown_sort?jc.controls_dropdown_separate_categorical_and_numeric?(t=hg(t,"name"),e=hg(e,"name"),n=t.concat(e)):(n=t.concat(e),n=hg(n,"name")):n=t.concat(e),n}function bQ(t,e){var n;return-1===(n=e.aggregation_type?zg(t,{type:e.type,index:e.index,aggregation_type:e.aggregation_type}):zg(t,{type:e.type,index:e.index}))&&(n=0),n}function xQ(t){return t.map((function(t){return t.name}))}function wQ(){return!1===jc.controls_geo_visible&&!1===jc.controls_geo_shapes_visible&&!1===jc.controls_position_by_1_visible&&!1===jc.controls_position_by_2_visible&&!1===jc.controls_size_by_visible&&!1===jc.controls_shade_by_visible&&!1===jc.controls_aggregate_by_visible&&!1===jc.controls_filter_visible}function kQ(t,e,n){var r=e.split("\n").map((function(t){return t.trim()})),i;return 1===r.length&&""===r[0]?t:i=n?t.filter((function(t){return-1===r.indexOf(t.name)})):t.filter((function(t){return r.indexOf(t.name)>-1}))}function MQ(t){t.unshift({type:"none",index:null,name:"None",aggregation_type:"none"})}function AQ(t){"none"!==jc.aggregate_by.type&&t.unshift({type:"numeric",index:null,name:"Count",aggregation_type:"count"})}function SQ(){fQ=gQ()}function CQ(){var t=yQ(),e=mQ();AQ(hQ=vQ(t,e)),MQ(hQ=kQ(hQ,jc.controls_position_by_items,jc.controls_exclude_position_by_items))}function EQ(){var t=mQ();AQ(dQ=vQ([],t)),MQ(dQ=kQ(dQ,jc.controls_size_by_items,jc.controls_exclude_size_by_items))}function zQ(){var t=yQ(),e=mQ();AQ(pQ=vQ(t,e)),MQ(pQ=kQ(pQ,jc.controls_shade_by_items,jc.controls_exclude_shade_by_items))}function TQ(){var t=yQ();MQ(_Q=kQ(_Q=vQ(t,[]),jc.controls_aggregate_by_items,jc.controls_exclude_aggregate_by_items))}function NQ(){GX.selectAll(".control-label").style("color",jc.control_text_color||jc.layout.font_color)}function jQ(){sQ.update(),uQ.update(),cQ.update()}function LQ(){XX.select("#fl-layout-sidebar").classed("hidden",wQ()),GX.classed("hidden",!jc.show_controls)}function PQ(){var t=jc.layout.background_color_enabled?jc.layout.background_color:"#fff",e=Ps(t);e.opacity=0,GX.style("background",t),XX.select(".control-panel-overflow").style("background","linear-gradient(to top, "+t+", "+e+")")}function OQ(){tQ=Tk(jc.geo_control),eQ=Tk(jc.geo_shapes_control),rQ=Tk(jc.position_by_1_control),iQ=Tk(jc.position_by_2_control),nQ=Tk(jc.size_by_control),oQ=Tk(jc.shade_by_control),aQ=Tk(jc.filter_control),lQ=Tk(jc.aggregate_by_control),sQ=Rk(jc.controls_style,".fl-control",jc.layout),uQ=Bk(jc.button_style,".fl-control-buttons",jc.layout),cQ=Hk(jc.dropdown_style,".fl-control-dropdown",jc.layout)}function FQ(t,e,n){var r=GX.append("div").classed("control-wrapper "+e,!0);n&&r.append("div").classed("control-label",!0),t.appendTo(r.node()).on("change",$Q)}function DQ(){FQ(tQ,"geo-control",!1),FQ(eQ,"geo-shapes-control",!0),FQ(rQ,"position-by-1-control",!0),FQ(iQ,"position-by-2-control",!0),FQ(nQ,"size-by-control",!0),FQ(oQ,"shade-by-control",!0),FQ(lQ,"aggregate-by-control",!0),FQ(aQ,"filter-control",!0)}function qQ(t,e){GX.select(t).style("opacity",e?1:.2).select(".fl-control-dropdown").style("pointer-events",e?"all":"none")}function RQ(t,e){GX.select(t).style("display",e?"block":"none")}function BQ(){tQ.options(["Chart","Map"]).value(jc.geo_mode).update(),RQ(".geo-control",jc.controls_geo_visible&&iE())}function HQ(){eQ.options(fQ).index(jc.geo_shapes_index).update(),RQ(".geo-shapes-control","Map"===jc.geo_mode&&jc.controls_geo_shapes_visible&&iE()&&fQ.length>1),GX.select(".geo-shapes-control .control-label").text(jc.controls_geo_shapes_label)}function IQ(t){var e=1===t?rQ:iQ,n="position_by_"+t,r=jc[n],i=bQ(hQ,r);e.options(xQ(hQ)).index(i).update();var o=jc["controls_"+n+"_visible"]&&hQ.length>1,a=!NM();2===t&&"none"===jc.position_by_1.type&&"none"===jc.position_by_2.type&&(o=!1);var l=".position-by-"+t+"-control";RQ(l,o),qQ(l,a),GX.select(l+" .control-label").text(jc["controls_"+n+"_label"])}function UQ(){var t=bQ(dQ,jc.size_by);nQ.options(xQ(dQ)).index(t).update();var e=!0;NM()&&!rE()&&(e=!1),qQ(".size-by-control",e),RQ(".size-by-control",jc.controls_size_by_visible&&dQ.length>1),GX.select(".size-by-control .control-label").text(jc.controls_size_by_label)}function YQ(){var t=bQ(pQ,jc.shade_by);oQ.options(xQ(pQ)).index(t).update(),RQ(".shade-by-control",jc.controls_shade_by_visible&&pQ.length>1),GX.select(".shade-by-control .control-label").text(jc.controls_shade_by_label)}function WQ(){var t=bQ(_Q,jc.aggregate_by);lQ.options(xQ(_Q)).index(t).update(),qQ(".aggregate-by-control",!NM()),RQ(".aggregate-by-control",jc.controls_aggregate_by_visible&&_Q.length>1),GX.select(".aggregate-by-control .control-label").text(jc.controls_aggregate_by_label)}function VQ(){var t=void 0!==Ik.data.column_names.filter,e=jc.filter_control_include_all?[jc.filter_control_all_text]:[];if(t){var n=Ik.data.map((function(t){return t.filter}));jc.controls_dropdown_sort&&n.sort(),e=e.concat(OC(n)),aQ.options(e).value(jc.filter).update()}RQ(".filter-control",jc.controls_filter_visible&&t),GX.select(".filter-control .control-label").text(jc.controls_filter_label)}function ZQ(){BQ(),SQ(),HQ(),CQ(),IQ(1),IQ(2),EQ(),UQ(),zQ(),YQ(),TQ(),WQ(),VQ(),NQ(),jQ(),PQ()}function XQ(t,e,n){var r=e[t.index()];jc[n]={type:r.type,index:r.index,aggregation_type:r.aggregation_type}}function GQ(){XQ(rQ,hQ,"position_by_1"),XQ(iQ,hQ,"position_by_2"),XQ(nQ,dQ,"size_by"),XQ(oQ,pQ,"shade_by"),XQ(lQ,_Q,"aggregate_by"),jc.filter=aQ.value()}function $Q(){jc.geo_mode=tQ.value(),jc.geo_shapes_index=eQ.index(),GQ(),K$()}function QQ(){GQ()}var JQ=Object.freeze({input_decimal_separator:".",output_separators:",."});function KQ(t,e){return{decimal:t,thousands:e,grouping:[3],currency:["",""]}}function tJ(t){var e=new RegExp("[^-0-9eE"+t+"]","g");return function(n){return"number"==typeof n?n:""===n||void 0===n?NaN:parseFloat(n.replace(e,"").replace(t,"."))}}function eJ(t){var e=t.length>1,n=e?t.charAt(1):t.charAt(0),r=e?t.charAt(0):"",i=ck(KQ(n,r)).format;return i.decimal=n,i.thousands=r,i}function nJ(t){for(var e in JQ)void 0===t[e]&&(t[e]=JQ[e]);return{getParser:function(){return tJ(t.input_decimal_separator)},getFormatterFunction:function(){return eJ(t.output_separators)}}}var rJ=Object.freeze({transform_labels:!1,transform:"multiply",multiply_divide_constant:1,exponentiate_constant:0,multiplier:1,prefix:"",n_dec:2,suffix:"",strip_zeros:!0,strip_separator:!0,negative_sign:"-$nk"});function iJ(t,e){if(!(e=e>0?Math.floor(e):Math.ceil(e)))return Math.round(t);var n=Math.pow(10,Math.abs(e));return e>0?Math.round(t*n)/n:Math.round(t/n)*n}function oJ(t){var e=1;return t.transform_labels&&(e="multiply"===t.transform?t.multiply_divide_constant:"divide"===t.transform?1/t.multiply_divide_constant:Math.pow(10,t.exponentiate_constant)),function(t){return t*e}}function aJ(t,e){var n=t.n_dec>=0?Math.floor(t.n_dec):Math.ceil(t.n_dec),r=e(",."+(n>0?n:"0")+"f"),i=e.decimal,o=e.thousands,a=t.strip_zeros&&n>0?new RegExp("\\"+i+"?0+$"):null,l=t.strip_separator&&o,s=t.negative_sign,u=oJ(t);return function(e){var i=n>=0?u(e):iJ(u(e),n),c=i<0,f=Math.abs(i),h=l&&o&&f>=1e3&&f<1e4,d=r(f);return a&&(d=d.replace(a,"")),h&&(d=d.replace(o,"")),c&&"none"!==s?"-$nk"===s?"-"+t.prefix+d+t.suffix:"$-nk"===s?t.prefix+"-"+d+t.suffix:"($nk)"===s?"("+t.prefix+d+t.suffix+")":t.prefix+"("+d+")"+t.suffix:t.prefix+d+t.suffix}}function lJ(t){for(var e in rJ)void 0===t[e]&&(t[e]=rJ[e]);return function(e){return aJ(t,e)}}var sJ=nJ(jc.localization),uJ=lJ(jc.number_format),cJ=Nc(jc.layout);xD(),OQ(),eY(),O$(),MD();var fJ,hJ=function(){return qc.Date.now()},dJ="Expected a function",pJ=Math.max,_J=Math.min;function gJ(t,e,n){var r,i,o,a,l,s,u=0,c=!1,f=!1,h=!0;if("function"!=typeof t)throw new TypeError(dJ);function d(e){var n=r,o=i;return r=i=void 0,u=e,a=t.apply(o,n)}function p(t){return u=t,l=setTimeout(y,e),c?d(t):a}function _(t){var n,r,i=e-(t-s);return f?_J(i,o-(t-u)):i}function g(t){var n=t-s,r;return void 0===s||n>=e||n<0||f&&t-u>=o}function y(){var t=hJ();if(g(t))return m(t);l=setTimeout(y,_(t))}function m(t){return l=void 0,h&&r?d(t):(r=i=void 0,a)}function v(){void 0!==l&&clearTimeout(l),u=0,r=s=i=l=void 0}function b(){return void 0===l?a:m(hJ())}function x(){var t=hJ(),n=g(t);if(r=arguments,i=this,s=t,n){if(void 0===l)return p(s);if(f)return clearTimeout(l),l=setTimeout(y,e),d(s)}return void 0===l&&(l=setTimeout(y,e)),a}return e=kg(e)||0,vf(n)&&(c=!!n.leading,o=(f="maxWait"in n)?pJ(kg(n.maxWait)||0,e):o,h="trailing"in n?!!n.trailing:h),x.cancel=v,x.flush=b,x}var yJ="Expected a function";function mJ(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new TypeError(yJ);return vf(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),gJ(t,e,{leading:r,maxWait:e,trailing:i})}function vJ(){K$()}var bJ=mJ(vJ,500);function xJ(){var t;lG(),d$(),i$(),G$(),DQ(),lY(),XX.node().offsetWidth<jc.narrow_breakpoint&&(jc.show_controls=!1),JG(),K$(),window.addEventListener("resize",bJ)}function wJ(){K$()}return t.data=Ik,t.draw=xJ,t.state=jc,t.update=wJ,t}({});
//# sourceMappingURL=template.js.map
</script><script>
var path = document.location.href.match(/\/visualisation\/(\d+)/);
if (path) {
	path = path[0];
	const script = document.createElement("script");
	script.async = true;
	script.src = "https://www.googletagmanager.com/gtag/js?id=G-KW52XHYN9H";
	document.head.appendChild(script);

	window.dataLayer = window.dataLayer || [];
	window.gtag = function () { dataLayer.push(arguments); };

	gtag("js", new Date());
	gtag("config", "G-KW52XHYN9H");

	gtag("consent", "default", {
		ad_storage: "denied",
		analytics_storage: "denied",
		functionality_storage: "denied",
		personalization_storage: "denied",
		security_storage: "denied",
	});

	gtag("set", { "dimension1": path.substr(1) });
	gtag("set", { "dimension2": new Date().toISOString() });
}
</script><script>!function(){"use strict";var e,t,i=!1;function n(e){if(i&&window.top!==window.self){var t=window;"srcdoc"===t.location.pathname&&(t=t.parent);var n,o=(n={},window._Flourish_template_id&&(n.template_id=window._Flourish_template_id),window.Flourish&&window.Flourish.app&&window.Flourish.app.loaded_template_id&&(n.template_id=window.Flourish.app.loaded_template_id),window._Flourish_visualisation_id&&(n.visualisation_id=window._Flourish_visualisation_id),window.Flourish&&window.Flourish.app&&window.Flourish.app.loaded_visualisation&&(n.visualisation_id=window.Flourish.app.loaded_visualisation.id),window.Flourish&&window.Flourish.app&&window.Flourish.app.story&&(n.story_id=window.Flourish.app.story.id,n.slide_count=window.Flourish.app.story.slides.length),window.Flourish&&window.Flourish.app&&window.Flourish.app.current_slide&&(n.slide_index=window.Flourish.app.current_slide.index+1),n),r={sender:"Flourish",method:"customerAnalytics"};for(var a in o)o.hasOwnProperty(a)&&(r[a]=o[a]);for(var a in e)e.hasOwnProperty(a)&&(r[a]=e[a]);t.parent.postMessage(JSON.stringify(r),"*")}}function o(e){if("function"!=typeof e)throw new Error("Analytics callback is not a function");window.Flourish._analytics_listeners.push(e)}function r(){i=!0;[{event_name:"click",action_name:"click",use_capture:!0},{event_name:"keydown",action_name:"key_down",use_capture:!0},{event_name:"mouseenter",action_name:"mouse_enter",use_capture:!1},{event_name:"mouseleave",action_name:"mouse_leave",use_capture:!1}].forEach((function(e){document.body.addEventListener(e.event_name,(function(){n({action:e.action_name})}),e.use_capture)}))}function a(){if(null==e){var t=function(){var e=window.location;"about:srcdoc"==e.href&&(e=window.parent.location);var t={};return function(e,i,n){for(;n=i.exec(e);)t[decodeURIComponent(n[1])]=decodeURIComponent(n[2])}(e.search.substring(1).replace(/\+/g,"%20"),/([^&=]+)=?([^&]*)/g),t}();e="referrer"in t?/^https:\/\/medium.com\//.test(t.referrer):!("auto"in t)}return e}function s(e){var t=e||window.innerWidth;return t>999?650:t>599?575:400}function l(e){if(e&&window.top!==window.self){var t=window;"srcdoc"==t.location.pathname&&(t=t.parent);var i={sender:"Flourish",method:"scrolly"};if(e)for(var n in e)i[n]=e[n];t.parent.postMessage(JSON.stringify(i),"*")}}function d(e,i){if(window.top!==window.self){var n=window;if("srcdoc"==n.location.pathname&&(n=n.parent),t)return e=parseInt(e,10),void n.parent.postMessage({sentinel:"amp",type:"embed-size",height:e},"*");var o={sender:"Flourish",context:"iframe.resize",method:"resize",height:e,src:n.location.toString()};if(i)for(var r in i)o[r]=i[r];n.parent.postMessage(JSON.stringify(o),"*")}}function u(){return(-1!==navigator.userAgent.indexOf("Safari")||-1!==navigator.userAgent.indexOf("iPhone"))&&-1==navigator.userAgent.indexOf("Chrome")}function c(e){return"string"==typeof e||e instanceof String}function h(e){return"warn"!==e.method?(console.warn("BUG: validateWarnMessage called for method"+e.method),!1):!(null!=e.message&&!c(e.message))&&!(null!=e.explanation&&!c(e.explanation))}function f(e){return"resize"!==e.method?(console.warn("BUG: validateResizeMessage called for method"+e.method),!1):!!c(e.src)&&(!!c(e.context)&&!!("number"==typeof(t=e.height)?!isNaN(t)&&t>=0:c(t)&&/\d/.test(t)&&/^[0-9]*(\.[0-9]*)?(cm|mm|Q|in|pc|pt|px|em|ex|ch|rem|lh|vw|vh|vmin|vmax|%)?$/i.test(t)));var t}function p(e){throw new Error("Validation for setSetting is not implemented yet; see issue #4328")}function m(e){return"scrolly"!==e.method?(console.warn("BUG: validateScrolly called for method"+e.method),!1):!!Array.isArray(e.slides)}function w(e){return"customerAnalytics"===e.method||(console.warn("BUG: validateCustomerAnalyticsMessage called for method"+e.method),!1)}function g(e){return"request-upload"!==e.method?(console.warn("BUG: validateResizeMessage called for method"+e.method),!1):!!c(e.name)&&!(null!=e.accept&&!c(e.accept))}function y(e,t){var i=function(e){for(var t={warn:h,resize:f,setSetting:p,customerAnalytics:w,"request-upload":g,scrolly:m},i={},n=0;n<e.length;n++){var o=e[n];if(!t[o])throw new Error("No validator found for method "+o);i[o]=t[o]}return i}(t);window.addEventListener("message",(function(t){if(null!=t.source&&(t.origin===document.location.origin||t.origin.match(/\/\/localhost:\d+$|\/\/(?:public|app)\.flourish.devlocal$|\/\/flourish-api\.com$|\.flourish\.(?:local(:\d+)?|net|rocks|studio)$|\.uri\.sh$|\/\/flourish-user-templates\.com$/))){var n;try{n=JSON.parse(t.data)}catch(e){return void console.warn("Unexpected non-JSON message: "+JSON.stringify(t.data))}if("Flourish"===n.sender)if(n.method)if(Object.prototype.hasOwnProperty.call(i,n.method))if(i[n.method](n)){for(var o=document.querySelectorAll("iframe"),r=0;r<o.length;r++)if(o[r].contentWindow==t.source||o[r].contentWindow==t.source.parent)return void e(n,o[r]);console.warn("could not find frame",n)}else console.warn("Validation failed for the message",n);else console.warn("No validator implemented for message",n);else console.warn("The 'method' property was missing from message",n)}})),u()&&(window.addEventListener("resize",v),v())}function v(){for(var e=document.querySelectorAll(".flourish-embed"),t=0;t<e.length;t++){var i=e[t];if(!i.getAttribute("data-width")){var n=i.querySelector("iframe");if(n){var o=window.getComputedStyle(i),r=i.offsetWidth-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight);n.style.width=r+"px"}}}}function _(e,t){var i=e.parentNode;if(i.classList.contains("fl-scrolly-wrapper"))console.warn("createScrolly is being called more than once per story. This should not happen.");else{i.classList.add("fl-scrolly-wrapper"),i.style.position="relative",i.style.paddingBottom="1px",i.style.transform="translate3d(0, 0, 0)",e.style.position="sticky";var n=i.getAttribute("data-height")||null;n||(n="80vh",e.style.height=n),e.style.top="calc(50vh - "+n+"/2)";var o=i.querySelector(".flourish-credit");o&&(o.style.position="sticky",o.style.top="calc(50vh + "+n+"/2)"),t.forEach((function(e,t){var n=document.createElement("div");n.setAttribute("data-slide",t),n.classList.add("fl-scrolly-caption"),n.style.position="relative",n.style.transform="translate3d(0,0,0)",n.style.textAlign="center",n.style.maxWidth="500px",n.style.height="auto",n.style.marginTop="0",n.style.marginBottom="100vh",n.style.marginLeft="auto",n.style.marginRight="auto";var o=document.createElement("div");o.innerHTML=e,o.style.display="inline-block",o.style.paddingTop="1.25em",o.style.paddingRight="1.25em",o.style.paddingBottom="1.25em",o.style.paddingLeft="1.25em",o.style.background="rgba(255,255,255,0.9)",o.style.boxShadow="0px 0px 10px rgba(0,0,0,0.2)",o.style.borderRadius="10px",o.style.textAlign="center",o.style.maxWidth="100%",o.style.margin="0 20px",o.style.overflowX="hidden",n.appendChild(o),i.appendChild(n)})),function(e){for(var t=new IntersectionObserver((function(t){t.forEach((function(t){if(t.isIntersecting){var i=e.querySelector("iframe");i&&(i.src=i.src.replace(/#slide-.*/,"")+"#slide-"+t.target.getAttribute("data-slide"))}}))}),{rootMargin:"0px 0px -0% 0px"}),i=e.querySelectorAll(".fl-scrolly-caption"),n=0;n<i.length;n++)t.observe(i[n]);e.querySelectorAll(".fl-scrolly-caption img").forEach((function(e){e.style.maxWidth="100%"}))}(i)}}function F(e,t,i,n,o){var r=document.createElement("iframe");if(r.setAttribute("scrolling","no"),r.setAttribute("frameborder","0"),r.setAttribute("title","Interactive or visual content"),r.setAttribute("sandbox","allow-same-origin allow-forms allow-scripts allow-downloads allow-popups allow-popups-to-escape-sandbox allow-top-navigation-by-user-activation"),t.appendChild(r),r.offsetParent||"fixed"===getComputedStyle(r).position)x(e,t,r,i,n,o);else{var a={embed_url:e,container:t,iframe:r,width:i,height:n,play_on_load:o};if(window._flourish_poll_items?window._flourish_poll_items.push(a):window._flourish_poll_items=[a],window._flourish_poll_items.length>1)return r;var s=setInterval((function(){window._flourish_poll_items=window._flourish_poll_items.filter((function(e){return!e.iframe.offsetParent||(x(e.embed_url,e.container,e.iframe,e.width,e.height,e.play_on_load),!1)})),window._flourish_poll_items.length||clearInterval(s)}),500)}return r}function x(e,t,i,n,o,r){var a;return n&&"number"==typeof n?(a=n,n+="px"):n&&n.match(/^[ \t\r\n\f]*([+-]?\d+|\d*\.\d+(?:[eE][+-]?\d+)?)(?:\\?[Pp]|\\0{0,4}[57]0(?:\r\n|[ \t\r\n\f])?)(?:\\?[Xx]|\\0{0,4}[57]8(?:\r\n|[ \t\r\n\f])?)[ \t\r\n\f]*$/)&&(a=parseFloat(n)),o&&"number"==typeof o&&(o+="px"),n?i.style.width=n:u()?i.style.width=t.offsetWidth+"px":i.style.width="100%",!!o||(e.match(/\?/)?e+="&auto=1":e+="?auto=1",o=s(a||i.offsetWidth)+"px"),o&&("%"===o.charAt(o.length-1)&&(o=parseFloat(o)/100*t.parentNode.offsetHeight+"px"),i.style.height=o),i.setAttribute("src",e+(r?"#play-on-load":"")),i}function b(e){return!Array.isArray(e)&&"object"==typeof e&&null!=e}function A(e,t){for(var i in t)b(e[i])&&b(t[i])?A(e[i],t[i]):e[i]=t[i];return e}!function(){var e,i=window.top===window.self,c=i?null:(t="#amp=1"==window.location.hash,{createEmbedIframe:F,isFixedHeight:a,getHeightForBreakpoint:s,startEventListeners:y,notifyParentWindow:d,initScrolly:l,createScrolly:_,isSafari:u,initCustomerAnalytics:r,addAnalyticsListener:o,sendCustomerAnalyticsMessage:n}),h=!0;function f(){var t;Flourish.fixed_height||(null!=e?t=e:h&&(t=c.getHeightForBreakpoint()),t!==window.innerHeight&&c.notifyParentWindow(t))}function p(){-1!==window.location.search.indexOf("enable_customer_analytics=1")&&Flourish.enableCustomerAnalytics(),f(),window.addEventListener("resize",f)}Flourish.warn=function(e){if("string"==typeof e&&(e={message:e}),i||"editor"!==Flourish.environment)console.warn(e.message);else{var t={sender:"Flourish",method:"warn",message:e.message,explanation:e.explanation};window.parent.postMessage(JSON.stringify(t),"*")}},Flourish.uploadImage=function(e){if(i||"story_editor"!==Flourish.environment)throw"Invalid upload request";var t={sender:"Flourish",method:"request-upload",name:e.name,accept:e.accept};window.parent.postMessage(JSON.stringify(t),"*")},Flourish.setSetting=function(e,t){if("editor"===Flourish.environment||"sdk"===Flourish.environment){var i={sender:"Flourish",method:"setSetting",name:e,value:t};window.parent.postMessage(JSON.stringify(i),"*")}else if("story_editor"===Flourish.environment){var n={};n[e]=t,A(window.template.state,function(e){var t={};for(var i in e){for(var n=t,o=i.indexOf("."),r=0;o>=0;o=i.indexOf(".",r=o+1)){var a=i.substring(r,o);a in n||(n[a]={}),n=n[a]}n[i.substring(r)]=e[i]}return t}(n))}},Flourish.setHeight=function(t){Flourish.fixed_height||(e=t,h=null==t,f())},Flourish.checkHeight=function(){if(!i){var e=Flourish.__container_height;null!=e?(Flourish.fixed_height=!0,c.notifyParentWindow(e)):c.isFixedHeight()?Flourish.fixed_height=!0:(Flourish.fixed_height=!1,f())}},Flourish.fixed_height=i||c.isFixedHeight(),Flourish.enableCustomerAnalytics=function(){c&&c.initCustomerAnalytics()},"loading"===document.readyState?document.addEventListener("DOMContentLoaded",p):p()}()}();
//# sourceMappingURL=embedded.js.map
</script><script>
window.addEventListener("message", function(event) {

	var a = document.createElement("a");
	a.href = event.origin;
	var origin_okay = (a.hostname == window.location.hostname)
		|| window.location.hostname === "localhost"
		|| (a.hostname.match(/\.flourish\.local$/) && window.location.hostname.match(/\.flourish\.local$/))
		|| (a.hostname.match(/\.flourish\.net$/) && window.location.hostname.match(/\.flourish\.net$/))
		|| (a.hostname.match(/\.flourish\.rocks$/) && window.location.hostname.match(/\.flourish\.rocks$/))
		|| (a.hostname.match(/\.flourish\.studio$/) && window.location.hostname.match(/\.flourish\.studio$/))
		|| (a.hostname == "app.flourish.studio" && window.location.hostname == "flourish-user-templates.com")
		|| (a.hostname == "flourish-user-preview.com" && window.location.hostname == "flourish-user-templates.com")
		|| (
			(a.hostname == "public.flourish.studio" && window.location.hostname == "flo.uri.sh")
			|| (a.hostname == "public.flourish.rocks" && window.location.hostname == "staging-flo.uri.sh")
			|| (a.hostname == "public.dev.flourish.rocks" && window.location.hostname == "dev-flo.uri.sh")
		);

	if (!origin_okay) return;

	var message = event.data;
	var port = event.ports[0];
	if (!port || typeof message !== "object" || message.sender !== "Flourish") return;
	var result = null;
	function assign(target, source) {
		for (var k in source) {
			if (source.hasOwnProperty(k)) target[k] = source[k];
		}
	}
	function deepAssign(target, source, is_destructive) {
		for (var k in source) {
			if (!source.hasOwnProperty(k)) continue;
			if (
				typeof target[k] === "object" && target[k] != null && !Array.isArray(target[k])
				&& typeof source[k] === "object" && source[k] != null && !Array.isArray(source[k])
			) {
				deepAssign(target[k], source[k], is_destructive);
			}
			else target[k] = source[k];
		}
		if (is_destructive) {
			for (var k in target) {
				if (target.hasOwnProperty(k) && !source.hasOwnProperty(k)) delete target[k];
			}
		}
	}
	try {
		var i, a;
		switch(message.method) {
			case "getState":
			result = window.template.state;
			if (message.argument) for (a = message.argument.split("."), i = 0; i < a.length; i++) {
				result = result[a[i]];
			}
			break;

			case "setState":
			deepAssign(window.template.state, message.argument);
			break;

			case "hasData":
			result = !!window.template.data;
			break;

			case "setData":
			assign(window.template.data, message.argument);
			break;

			case "getData":
			result = window.template.data;
			break;

			case "draw":
			window.template.draw();
			break;

			case "update":
			window.template.update();
			break;

			case "snapshot":
			result = window.snapshot(message.argument, port);
			break;

			case "setFixedHeight":
			if (window.Flourish) {
				window.Flourish.fixed_height = message.argument != null;
				window.Flourish.__container_height = message.argument;
				if (window.Flourish.checkHeight) window.Flourish.checkHeight();
			}
			break;

			case "sync":
			var spec = message.argument;
			if (spec.data) {
				assign(window.template.data, spec.data);
			}
			if (spec.state) {
				deepAssign(window.template.state, spec.state, spec.overwrite_state);
			}
			// only allow draw or update, not both
			if (spec.draw) {
				window.template.draw();
			}
			else if (spec.update) {
				window.template.update();
			}
			result = "success";
			break;
		}

		port.postMessage({result: result});
	}
	catch (e) {
		port.postMessage({error: e.message});
		throw e;
	}
}, false);
</script></body></html>